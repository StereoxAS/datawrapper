!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("../../../../../../../../static/vendor/jschardet/jschardet.min.js"),require("../../../../../../../../static/vendor/xlsx/xlsx.full.min.js"),require("cm/lib/codemirror"),require("cm/mode/javascript/javascript"),require("cm/addon/mode/simple"),require("cm/addon/hint/show-hint"),require("cm/addon/edit/matchbrackets"),require("cm/addon/display/placeholder"),require("Handsontable")):"function"==typeof define&&define.amd?define("svelte/editor",["../../../../../../../../static/vendor/jschardet/jschardet.min.js","../../../../../../../../static/vendor/xlsx/xlsx.full.min.js","cm/lib/codemirror","cm/mode/javascript/javascript","cm/addon/mode/simple","cm/addon/hint/show-hint","cm/addon/edit/matchbrackets","cm/addon/display/placeholder","Handsontable"],t):e.editor=t(e.jschardet,e.xlsx,e.CodeMirror,null,null,null,null,null,e.HOT)}(this,function(jschardet,xlsx_full_min_js,CodeMirror,javascript,simple,showHint,matchbrackets,placeholder,HOT){"use strict";function noop(){}function assign(e,t){for(var n in t)e[n]=t[n];return e}function appendNode(e,t){t.appendChild(e)}function insertNode(e,t,n){t.insertBefore(e,n)}function detachNode(e){e.parentNode.removeChild(e)}function detachBefore(e){for(;e.previousSibling;)e.parentNode.removeChild(e.previousSibling)}function detachAfter(e){for(;e.nextSibling;)e.parentNode.removeChild(e.nextSibling)}function reinsertChildren(e,t){for(;e.firstChild;)t.appendChild(e.firstChild)}function reinsertBefore(e,t){for(var n=e.parentNode;n.firstChild!==e;)t.appendChild(n.firstChild)}function destroyEach(e){for(var t=0;t<e.length;t+=1)e[t]&&e[t].d()}function createFragment(){return document.createDocumentFragment()}function createElement(e){return document.createElement(e)}function createSvgElement(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function createText(e){return document.createTextNode(e)}function createComment(){return document.createComment("")}function addListener(e,t,n){e.addEventListener(t,n,!1)}function removeListener(e,t,n){e.removeEventListener(t,n,!1)}function setAttribute(e,t,n){e.setAttribute(t,n)}function setStyle(e,t,n){e.style.setProperty(t,n)}function selectOption(e,t){for(var n=0;n<e.options.length;n+=1){var r=e.options[n];if(r.__value===t)return void(r.selected=!0)}}function selectValue(e){var t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function blankObject(){return Object.create(null)}function destroy(e){this.destroy=noop,this.fire("destroy"),this.set=this.get=noop,!1!==e&&this._fragment.u(),this._fragment.d(),this._fragment=this._state=null}function _differs(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function _differsImmutable(e,t){return e!=e?t==t:e!==t}function fire(e,t){var n=e in this._handlers&&this._handlers[e].slice();if(n)for(var r=0;r<n.length;r+=1){var a=n[r];a.__calling||(a.__calling=!0,a.call(this,t),a.__calling=!1)}}function get(e){return e?this._state[e]:this._state}function init(e,t){e._handlers=blankObject(),e._bind=t._bind,e.options=t,e.root=t.root||e,e.store=e.root.store||t.store}function observe(e,t,n){var r=t.bind(this);return n&&!1===n.init||r(this.get()[e],void 0),this.on(n&&n.defer?"update":"state",function(t){t.changed[e]&&r(t.current[e],t.previous&&t.previous[e])})}function on(e,t){if("teardown"===e)return this.on("destroy",t);var n=this._handlers[e]||(this._handlers[e]=[]);return n.push(t),{cancel:function(){var e=n.indexOf(t);~e&&n.splice(e,1)}}}function set(e){this._set(assign({},e)),this.root._lock||(this.root._lock=!0,callAll(this.root._beforecreate),callAll(this.root._oncreate),callAll(this.root._aftercreate),this.root._lock=!1)}function _set(e){var t=this._state,n={},r=!1;for(var a in e)this._differs(e[a],t[a])&&(n[a]=r=!0);r&&(this._state=assign(assign({},t),e),this._recompute(n,this._state),this._bind&&this._bind(n,this._state),this._fragment&&(this.fire("state",{changed:n,current:this._state,previous:t}),this._fragment.p(n,this._state),this.fire("update",{changed:n,current:this._state,previous:t})))}function callAll(e){for(;e&&e.length;)e.shift()()}function _mount(e,t){this._fragment[this._fragment.i?"i":"m"](e,t||null)}function _unmount(){this._fragment&&this._fragment.u()}function removeFromStore(){this.store._remove(this)}jschardet=jschardet&&jschardet.hasOwnProperty("default")?jschardet.default:jschardet,CodeMirror=CodeMirror&&CodeMirror.hasOwnProperty("default")?CodeMirror.default:CodeMirror,HOT=HOT&&HOT.hasOwnProperty("default")?HOT.default:HOT;var proto={destroy:destroy,get:get,fire:fire,observe:observe,on:on,set:set,teardown:destroy,_recompute:noop,_set:_set,_mount:_mount,_unmount:_unmount,_differs:_differs};function _isObject(e){var t=typeof e;return"function"===t||"object"===t&&!!e}var ArrayProto=Array.prototype,ObjProto=Object.prototype,slice=ArrayProto.slice,toString=ObjProto.toString,hasOwnProperty=ObjProto.hasOwnProperty,nativeIsArray=Array.isArray,nativeKeys=Object.keys;function _has(e,t){return null!=e&&hasOwnProperty.call(e,t)}function _keys(e){if(!_isObject(e))return[];if(nativeKeys)return nativeKeys(e);var t=[];for(var n in e)_has(e,n)&&t.push(n);return hasEnumBug&&collectNonEnumProps(e,t),t}function _each(e,t,n){var r,a;if(t=optimizeCb(t,n),isArrayLike(e))for(r=0,a=e.length;r<a;r++)t(e[r],r,e);else{var o=_keys(e);for(r=0,a=o.length;r<a;r++)t(e[o[r]],o[r],e)}return e}function _sortedIndex(e,t,n,r){for(var a=(n=cb(n,r,1))(t),o=0,i=getLength(e);o<i;){var s=Math.floor((o+i)/2);n(e[s])<a?o=s+1:i=s}return o}var _indexOf=createIndexFinder(1,_findIndex,_sortedIndex);function _values(e){for(var t=_keys(e),n=t.length,r=Array(n),a=0;a<n;a++)r[a]=e[t[a]];return r}function _contains(e,t,n,r){return isArrayLike(e)||(e=_values(e)),("number"!=typeof n||r)&&(n=0),_indexOf(e,t,n)>=0}var _isArray=nativeIsArray||function(e){return"[object Array]"===toString.call(e)};function customFunction(){return"function"!=typeof/./&&"object"!=typeof Int8Array&&"undefined"!=typeof document&&"function"!=typeof document.childNodes?function(e){return"function"==typeof e||!1}:null}var _isFunction=customFunction()||function(e){return"[object Function]"===toString.call(e)};function customArguments(){return"[object Arguments]"===toString.call(arguments)?null:function(e){return _has(e,"callee")}}var _isArguments=customArguments()||function(e){return"[object Arguments]"===toString.call(e)};function _isNumber(e){return"[object Number]"===toString.call(e)}function _isNaN(e){return _isNumber(e)&&isNaN(e)}function _invert(e){for(var t={},n=_keys(e),r=0,a=n.length;r<a;r++)t[e[n[r]]]=n[r];return t}var _iteratee=builtinIteratee;function _identity(e){return e}var _extendOwn=createAssigner(_keys);function _isMatch(e,t){var n=_keys(t),r=n.length;if(null==e)return!r;for(var a=Object(e),o=0;o<r;o++){var i=n[o];if(t[i]!==a[i]||!(i in a))return!1}return!0}function _matcher(e){return e=_extendOwn({},e),function(t){return _isMatch(t,e)}}function optimizeCb(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,a){return e.call(t,n,r,a)};case 4:return function(n,r,a,o){return e.call(t,n,r,a,o)}}return function(){return e.apply(t,arguments)}}function builtinIteratee(e,t){return cb(e,t,1/0)}function cb(e,t,n){return _iteratee!==builtinIteratee?_iteratee(e,t):null==e?_identity:_isFunction(e)?optimizeCb(e,t,n):_isObject(e)?_matcher(e):property(e)}function restArgs(e,t){return t=null==t?e.length-1:+t,function(){for(var n=arguments,r=Math.max(arguments.length-t,0),a=Array(r),o=0;o<r;o++)a[o]=n[o+t];switch(t){case 0:return e.call(this,a);case 1:return e.call(this,arguments[0],a);case 2:return e.call(this,arguments[0],arguments[1],a)}var i=Array(t+1);for(o=0;o<t;o++)i[o]=n[o];return i[t]=a,e.apply(this,i)}}function property(e){return function(t){return null==t?void 0:t[e]}}var MAX_ARRAY_INDEX=Math.pow(2,53)-1,getLength=property("length"),isArrayLike=function(e){var t=getLength(e);return"number"==typeof t&&t>=0&&t<=MAX_ARRAY_INDEX};function group(e,t){return function(n,r,a){var o=t?[[],[]]:{};return r=cb(r,a),_each(n,function(t,a){var i=r(t,a,n);e(o,t,i)}),o}}function flatten(e,t,n,r){for(var a=(r=r||[]).length,o=0,i=getLength(e);o<i;o++){var s=e[o];if(isArrayLike(s)&&(_isArray(s)||_isArguments(s)))if(t)for(var c=0,l=s.length;c<l;)r[a++]=s[c++];else flatten(s,t,n,r),a=r.length;else n||(r[a++]=s)}return r}function createPredicateIndexFinder(e){return function(t,n,r){n=cb(n,r);for(var a=getLength(t),o=e>0?0:a-1;o>=0&&o<a;o+=e)if(n(t[o],o,t))return o;return-1}}function createIndexFinder(e,t,n){return function(r,a,o){var i=0,s=getLength(r);if("number"==typeof o)e>0?i=o>=0?o:Math.max(o+s,i):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return r[o=n(r,a)]===a?o:-1;if(a!=a)return(o=t(slice.call(r,i,s),_isNaN))>=0?o+i:-1;for(o=e>0?i:s-1;o>=0&&o<s;o+=e)if(r[o]===a)return o;return-1}}var hasEnumBug=!{toString:null}.propertyIsEnumerable("toString"),nonEnumerableProps=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function collectNonEnumProps(e,t){var n=nonEnumerableProps.length,r=e.constructor,a=_isFunction(r)&&r.prototype||ObjProto,o="constructor";for(_has(e,o)&&!_contains(t,o)&&t.push(o);n--;)(o=nonEnumerableProps[n])in e&&e[o]!==a[o]&&!_contains(t,o)&&t.push(o)}function createAssigner(e,t){return function(n){var r=arguments,a=arguments.length;if(t&&(n=Object(n)),a<2||null==n)return n;for(var o=1;o<a;o++)for(var i=r[o],s=e(i),c=s.length,l=0;l<c;l++){var u=s[l];!_isObject(n)||t&&void 0!==n[u]||(n[u]=i[u])}return n}}var escapeMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},unescapeMap=_invert(escapeMap),_findIndex=createPredicateIndexFinder(1);function _findKey(e,t,n){t=cb(t,n);for(var r,a=_keys(e),o=0,i=a.length;o<i;o++)if(t(e[r=a[o]],r,e))return r}function _find(e,t,n){var r=(isArrayLike(e)?_findIndex:_findKey)(e,t,n);if(void 0!==r&&-1!==r)return e[r]}function _findWhere(e,t){return _find(e,_matcher(t))}function active_i(e){var t=e.active,n=e.steps;return n.indexOf(_findWhere(n,{id:t}))}function passed(e){var t=e.index,n=e.active_i;return t<e.maxStep&&t!==n}function class_(e){var t=e.step,n=e.index,r=e.active,a=e.passed,o=e.$lastEditStep,i=[];return t.readonly&&i.push("readonly"),r===t.id?i.push("active"):(n>o+1&&i.push("unseen"),a&&i.push("passed")),i.join(" ")}function data$1(){return{step:{title:"",index:1},maxStep:1,active:1}}var methods={select:function(e,t){if(!t.redirect&&(e.preventDefault(),!t.readonly&&(this.fire("select",t),"/edit/"===location.pathname.substr(0,6)))){var n=this.store.get().id;window.history.pushState({step:t,id:n},"","/edit/"+n+"/"+t.id)}}},previousPageUrl;function onupdate(e){var t=e.changed,n=e.current;if(t.active_i){var r=n.steps[n.active_i];if(r){var a=this.store.get(),o=a.id,i=a.title;window.document.title=i+" - "+o+" - "+r.title+" | Datawrapper"}}}function create_main_fragment(e,t){var n,r,a,o,i,s,c,l,u,d=t.step.title,h=t.passed&&create_if_block(e,t);function f(t){var n=e.get();e.select(t,n.step)}return{c:function(){n=createElement("a"),r=createElement("span"),a=createText(t.index),o=createText("\n    "),i=createElement("span"),s=createText("\n    "),h&&h.c(),c=createText("\n    "),l=createElement("div"),this.h()},h:function(){r.className="step",i.className="title",l.className="corner",addListener(n,"click",f),setStyle(n,"width",95/t.steps.length+"%"),n.href=u=t.step.redirect?t.step.redirect:"#"+t.step.id,n.className=t.class_},m:function(e,t){insertNode(n,e,t),appendNode(r,n),appendNode(a,r),appendNode(o,n),appendNode(i,n),i.innerHTML=d,appendNode(s,n),h&&h.m(n,null),appendNode(c,n),appendNode(l,n)},p:function(t,r){t.index&&(a.data=r.index),t.step&&d!==(d=r.step.title)&&(i.innerHTML=d),r.passed?h||((h=create_if_block(e,r)).c(),h.m(n,c)):h&&(h.u(),h.d(),h=null),t.steps&&setStyle(n,"width",95/r.steps.length+"%"),t.step&&u!==(u=r.step.redirect?r.step.redirect:"#"+r.step.id)&&(n.href=u),t.class_&&(n.className=r.class_)},u:function(){i.innerHTML="",detachNode(n),h&&h.u()},d:function(){h&&h.d(),removeListener(n,"click",f)}}}function create_if_block(e,t){var n;return{c:function(){n=createElement("i"),this.h()},h:function(){n.className="fa fa-check"},m:function(e,t){insertNode(n,e,t)},u:function(){detachNode(n)},d:noop}}function EditorNavStep(e){init(this,e),this._state=assign(assign(this.store._init(["lastEditStep"]),data$1()),e.data),this.store._add(this,["lastEditStep"]),this._recompute({active:1,steps:1,index:1,active_i:1,maxStep:1,step:1,passed:1,$lastEditStep:1},this._state),this._handlers.update=[onupdate],this._handlers.destroy=[removeFromStore];var t=this;e.root||(this._oncreate=[]),this._fragment=create_main_fragment(this,this._state),this.root._oncreate.push(function(){t.fire("update",{changed:{active:1,steps:1,index:1,active_i:1,maxStep:1,step:1,passed:1,$lastEditStep:1,class_:1},current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),callAll(this._oncreate))}function trackEvent(e,t,n,r){window._paq&&window._paq.push(["trackEvent",e,t,n,r])}function trackPageView(e){void 0===e&&(e=0),window._paq&&(previousPageUrl&&window._paq.push(["setReferrerUrl",previousPageUrl]),window._paq.push(["setGenerationTimeMs",e]),window._paq.push(["setCustomUrl",window.location.pathname]),window._paq.push(["setDocumentTitle",window.document.title]),window._paq.push(["trackPageView"]),previousPageUrl=window.location.pathname)}function data$2(){return{steps:[]}}assign(EditorNavStep.prototype,proto),assign(EditorNavStep.prototype,methods),EditorNavStep.prototype._recompute=function(e,t){(e.active||e.steps)&&this._differs(t.active_i,t.active_i=active_i(t))&&(e.active_i=!0),(e.index||e.active_i||e.maxStep)&&this._differs(t.passed,t.passed=passed(t))&&(e.passed=!0),(e.step||e.index||e.active||e.passed||e.$lastEditStep)&&this._differs(t.class_,t.class_=class_(t))&&(e.class_=!0)};var methods$1={select:function(e,t){if(this.set({active:e.id}),void 0===t){var n=this.get().steps;t=n.indexOf(_findWhere(n,{id:e.id}))}var r=this.store.get().lastEditStep;window.history.pushState({id:this.store.get().id,step:e},null,e.id),this.store.set({lastEditStep:Math.max(r,t+1)}),trackPageView()},popstate:function(e){if(e.state&&e.state.id&&e.state.step){var t=e.state,n=t.id,r=t.step;n===this.store.get().id?(this.set({active:r.id}),trackPageView()):window.location.href="/edit/"+n+"/"+r.id}}},app;function oncreate(){var e=this,t=this.get(),n=t.active,r=t.steps,a=this.store.get(),o=a.lastEditStep,i=a.id,s=_findWhere(r,{id:n});this.store.set({lastEditStep:Math.max(o,r.indexOf(s)+1)}),this.store.on("navigate",function(t){e.select({id:t})}),window.history.replaceState({step:s,id:i},s.title)}function create_main_fragment$1(e,t){var n,r,a;function o(t){e.popstate(t)}window.addEventListener("popstate",o);for(var i=t.steps,s=[],c=0;c<i.length;c+=1)s[c]=create_each_block(e,assign(assign({},t),{each_value:i,step:i[c],i:c}));var l=t.$user.id!=t.$authorId&&t.$user.isAdmin&&create_if_block$1(e,t);return{c:function(){n=createElement("div");for(var e=0;e<s.length;e+=1)s[e].c();r=createText("\n\n"),l&&l.c(),a=createComment(),this.h()},h:function(){n.className="create-nav svelte-nols97"},m:function(e,t){insertNode(n,e,t);for(var o=0;o<s.length;o+=1)s[o].m(n,null);insertNode(r,e,t),l&&l.m(e,t),insertNode(a,e,t)},p:function(t,r){var o=r.steps;if(t.steps||t.active){for(var i=0;i<o.length;i+=1){var c=assign(assign({},r),{each_value:o,step:o[i],i:i});s[i]?s[i].p(t,c):(s[i]=create_each_block(e,c),s[i].c(),s[i].m(n,null))}for(;i<s.length;i+=1)s[i].u(),s[i].d();s.length=o.length}r.$user.id!=r.$authorId&&r.$user.isAdmin?l?l.p(t,r):((l=create_if_block$1(e,r)).c(),l.m(a.parentNode,a)):l&&(l.u(),l.d(),l=null)},u:function(){detachNode(n);for(var e=0;e<s.length;e+=1)s[e].u();detachNode(r),l&&l.u(),detachNode(a)},d:function(){window.removeEventListener("popstate",o),destroyEach(s),l&&l.d()}}}function create_each_block(e,t){var n=t.step,r=t.each_value,a=t.i,o={},i={index:a+1};a in t.each_value&&(i.step=n,o.step=!0),"steps"in t&&(i.steps=t.steps,o.steps=!0),"active"in t&&(i.active=t.active,o.active=!0);var s=new EditorNavStep({root:e.root,data:i,_bind:function(t,n){var i=e.get(),s={};!o.step&&t.step&&(r[a]=n.step,s.steps=i.steps),!o.steps&&t.steps&&(s.steps=n.steps),!o.active&&t.active&&(s.active=n.active),e._set(s),o={}}});return e.root._beforecreate.push(function(){s._bind({step:1,steps:1,active:1},s.get())}),s.on("select",function(t){e.select(n,a)}),{c:function(){s._fragment.c()},m:function(e,t){s._mount(e,t)},p:function(e,t){n=t.step,r=t.each_value,a=t.i;var i={};i.index=a+1,!o.step&&e.steps&&(i.step=n,o.step=!0),!o.steps&&e.steps&&(i.steps=t.steps,o.steps=!0),!o.active&&e.active&&(i.active=t.active,o.active=!0),s._set(i),o={}},u:function(){s._unmount()},d:function(){s.destroy(!1)}}}function create_if_block$1(e,t){var n,r,a,o,i,s,c;return{c:function(){n=createElement("div"),r=createText("This chart belongs to "),a=createElement("a"),o=createText("User "),i=createText(t.$authorId),c=createText(". Great power comes with great responsibility, so be careful with what you're doing!"),this.h()},h:function(){a.target="_blank",a.href=s="/admin/chart/by/"+t.$authorId,n.className="alert alert-warning",setStyle(n,"text-align","center"),setStyle(n,"margin-top","10px")},m:function(e,t){insertNode(n,e,t),appendNode(r,n),appendNode(a,n),appendNode(o,a),appendNode(i,a),appendNode(c,n)},p:function(e,t){e.$authorId&&(i.data=t.$authorId),e.$authorId&&s!==(s="/admin/chart/by/"+t.$authorId)&&(a.href=s)},u:function(){detachNode(n)},d:noop}}function EditorNav(e){init(this,e),this._state=assign(assign(this.store._init(["user","authorId"]),data$2()),e.data),this.store._add(this,["user","authorId"]),this._handlers.destroy=[removeFromStore];var t=this;e.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=create_main_fragment$1(this,this._state),this.root._oncreate.push(function(){oncreate.call(t),t.fire("update",{changed:{steps:1,active:1,$user:1,$authorId:1},current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),this._lock=!0,callAll(this._beforecreate),callAll(this._oncreate),callAll(this._aftercreate),this._lock=!1)}function __(e,t){var n=arguments;if(void 0===t&&(t="core"),e=e.trim(),!dw.backend.__messages[t])return"MISSING:"+e;var r=dw.backend.__messages[t][e]||dw.backend.__messages.core[e]||e;if(arguments.length>2)for(var a=2;a<arguments.length;a++){var o=a-1;r=r.replace("$"+o,n[a])}return r}function data$3(){return{placeholder:__("upload / paste here")}}function create_main_fragment$2(e,t){var n,r,a,o=!1;function i(){o=!0,e.store.set({_rawData:a.value}),o=!1}return{c:function(){n=createElement("form"),r=createElement("div"),a=createElement("textarea"),this.h()},h:function(){addListener(a,"input",i),a.readOnly=t.readonly,a.id="upload-data-text",setStyle(a,"resize","none"),a.placeholder=t.placeholder,a.className="svelte-h5ftni",r.className="control-group",n.className="upload-form"},m:function(e,o){insertNode(n,e,o),appendNode(r,n),appendNode(a,r),a.value=t.$_rawData},p:function(e,t){o||(a.value=t.$_rawData),e.readonly&&(a.readOnly=t.readonly),e.placeholder&&(a.placeholder=t.placeholder)},u:function(){detachNode(n)},d:function(){removeListener(a,"input",i)}}}function TextAreaUpload(e){init(this,e),this._state=assign(assign(this.store._init(["_rawData"]),data$3()),e.data),this.store._add(this,["_rawData"]),this._handlers.destroy=[removeFromStore],this._fragment=create_main_fragment$2(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}function datasetsArray(e){var t=e.datasets;return Object.keys(t).map(function(e){return t[e]})}function data$4(){return{selectedDataset:"--"}}function onupdate$1(e){var t=e.changed,n=e.current;if(t.selectedDataset&&"--"!==n.selectedDataset){var r=n.selectedDataset;this.set({chartData:r.data}),r.presets&&Object.keys(r.presets).forEach(function(e){dw.backend.currentChart.set(e,r.presets[e])})}}function create_main_fragment$3(e,t){for(var n,r,a,o,i,s,c,l,u,d,h=__("upload / quick help"),f=__("upload / try a dataset"),p=__("upload / sample dataset"),m=!1,_=t.datasetsArray,v=[],g=0;g<_.length;g+=1)v[g]=create_each_block$1(e,assign(assign({},t),{each_value:_,group:_[g],group_index:g}));function b(){m=!0,e.set({selectedDataset:selectValue(l)}),m=!1}return{c:function(){n=createElement("p"),r=createText(h),a=createText("\n\n"),o=createElement("div"),i=createElement("p"),s=createText(f),c=createText("\n    "),l=createElement("select"),u=createElement("option"),d=createText(p);for(var e=0;e<v.length;e+=1)v[e].c();this.h()},h:function(){u.__value="--",u.value=u.__value,addListener(l,"change",b),"selectedDataset"in t||e.root._beforecreate.push(b),l.disabled=t.readonly,l.id="demo-datasets",l.className="svelte-1jdst2k",o.className="demo-datasets"},m:function(e,h){insertNode(n,e,h),appendNode(r,n),insertNode(a,e,h),insertNode(o,e,h),appendNode(i,o),appendNode(s,i),appendNode(c,o),appendNode(l,o),appendNode(u,l),appendNode(d,u);for(var f=0;f<v.length;f+=1)v[f].m(l,null);selectOption(l,t.selectedDataset)},p:function(t,n){var r=n.datasetsArray;if(t.datasetsArray){for(var a=0;a<r.length;a+=1){var o=assign(assign({},n),{each_value:r,group:r[a],group_index:a});v[a]?v[a].p(t,o):(v[a]=create_each_block$1(e,o),v[a].c(),v[a].m(l,null))}for(;a<v.length;a+=1)v[a].u(),v[a].d();v.length=r.length}m||selectOption(l,n.selectedDataset),t.readonly&&(l.disabled=n.readonly)},u:function(){detachNode(n),detachNode(a),detachNode(o);for(var e=0;e<v.length;e+=1)v[e].u()},d:function(){destroyEach(v),removeListener(l,"change",b)}}}function create_each_block$1(e,t){for(var n,r,a=t.group,o=(t.each_value,t.group_index,a.datasets),i=[],s=0;s<o.length;s+=1)i[s]=create_each_block_1(e,assign(assign({},t),{each_value_1:o,dataset:o[s],dataset_index:s}));return{c:function(){n=createElement("optgroup");for(var e=0;e<i.length;e+=1)i[e].c();this.h()},h:function(){setAttribute(n,"label",r=a.type)},m:function(e,t){insertNode(n,e,t);for(var r=0;r<i.length;r+=1)i[r].m(n,null)},p:function(t,o){a=o.group,o.each_value,o.group_index;var s=a.datasets;if(t.datasetsArray){for(var c=0;c<s.length;c+=1){var l=assign(assign({},o),{each_value_1:s,dataset:s[c],dataset_index:c});i[c]?i[c].p(t,l):(i[c]=create_each_block_1(e,l),i[c].c(),i[c].m(n,null))}for(;c<i.length;c+=1)i[c].u(),i[c].d();i.length=s.length}t.datasetsArray&&r!==(r=a.type)&&setAttribute(n,"label",r)},u:function(){detachNode(n);for(var e=0;e<i.length;e+=1)i[e].u()},d:function(){destroyEach(i)}}}function create_each_block_1(e,t){t.group,t.each_value,t.group_index;var n,r,a,o=t.dataset,i=(t.each_value_1,t.dataset_index,o.title);return{c:function(){n=createElement("option"),r=createText(i),this.h()},h:function(){n.__value=a=o,n.value=n.__value,n.className="demo-dataset"},m:function(e,t){insertNode(n,e,t),appendNode(r,n)},p:function(e,t){t.group,t.each_value,t.group_index,o=t.dataset,t.each_value_1,t.dataset_index,e.datasetsArray&&i!==(i=o.title)&&(r.data=i),e.datasetsArray&&a!==(a=o)&&(n.__value=a),n.value=n.__value},u:function(){detachNode(n)},d:noop}}function UploadHelp(e){init(this,e),this._state=assign(data$4(),e.data),this._recompute({datasets:1},this._state),this._handlers.update=[onupdate$1];var t=this;e.root||(this._oncreate=[],this._beforecreate=[]),this._fragment=create_main_fragment$3(this,this._state),this.root._oncreate.push(function(){t.fire("update",{changed:{datasets:1,readonly:1,selectedDataset:1,datasetsArray:1},current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),callAll(this._beforecreate),callAll(this._oncreate))}function fetchJSON(e,t,n,r,a){var o={method:t,body:r,mode:"cors",credentials:n};window.fetch(e,o).then(function(e){return 200!=e.status?new Error(e.statusText):e.text()}).then(function(e){try{return JSON.parse(e)}catch(t){return console.warn("malformed json input",e),e}}).then(a).catch(function(e){console.error(e)})}function getJSON(e,t,n){return 2==arguments.length&&(n=t,t="include"),fetchJSON(e,"GET",t,null,n)}function postJSON(e,t,n){return fetchJSON(e,"POST","include",t,n)}function putJSON(e,t,n){return fetchJSON(e,"PUT","include",t,n)}function arrayToObject(e){if(_isArray(e)){var t={};return Object.keys(e).forEach(function(n){return t[n]=e[n]}),t}return e}function tailLength(e){return String(e-Math.floor(e)).replace(/00000*[0-9]+$/,"").replace(/99999*[0-9]+$/,"").length-2}function toFixed(e){return(+e).toFixed(Math.max(0,tailLength(e)))}function loadScript(e,t){var n=document.createElement("script");n.src=e,n.onload=function(){console.log("script",e,"loaded"),t&&t()},document.body.appendChild(n)}function loadStylesheet(e,t){var n=document.createElement("link");n.rel="stylesheet",n.href=e,n.onload=function(){console.log("style",e,"loaded"),t&&t()},document.head.appendChild(n)}function data$5(){return{selected:!1,sheets:[]}}function onupdate$2(e){var t=this,n=e.changed,r=e.current;n.sheets&&r.sheets.length>1?setTimeout(function(){t.set({selected:r.sheets[0]})},300):n.sheets&&1===r.sheets.length&&putJSON("/api/charts/"+dw.backend.currentChart.get("id")+"/data",r.sheets[0].csv,function(){window.location.href="describe"}),n.selected&&this.set({chartData:r.selected.csv})}function create_main_fragment$4(e,t){var n;function r(e){return e.sheets.length?e.sheets.length>1?create_if_block_1:create_if_block_2:create_if_block$2}var a=r(t),o=a(e,t);return{c:function(){n=createElement("div"),o.c()},m:function(e,t){insertNode(n,e,t),o.m(n,null)},p:function(t,i){a===(a=r(i))&&o?o.p(t,i):(o.u(),o.d(),(o=a(e,i)).c(),o.m(n,null))},u:function(){detachNode(n),o.u()},d:function(){o.d()}}}function create_each_block$2(e,t){var n,r,a,o=t.sheet,i=(t.each_value,t.sheet_index,o.name);return{c:function(){n=createElement("option"),r=createText(i),this.h()},h:function(){n.__value=a=o,n.value=n.__value},m:function(e,t){insertNode(n,e,t),appendNode(r,n)},p:function(e,t){o=t.sheet,t.each_value,t.sheet_index,e.sheets&&i!==(i=o.name)&&(r.data=i),e.sheets&&a!==(a=o)&&(n.__value=a),n.value=n.__value},u:function(){detachNode(n)},d:noop}}function create_if_block$2(e,t){var n,r=__("upload / parsing-xls");return{c:function(){n=createElement("div"),this.h()},h:function(){n.className="alert alert-info"},m:function(e,t){insertNode(n,e,t),n.innerHTML=r},p:noop,u:function(){n.innerHTML="",detachNode(n)},d:noop}}function create_if_block_1(e,t){for(var n,r,a,o,i,s=__("upload / select sheet"),c=!1,l=t.sheets,u=[],d=0;d<l.length;d+=1)u[d]=create_each_block$2(e,assign(assign({},t),{each_value:l,sheet:l[d],sheet_index:d}));function h(){c=!0,e.set({selected:selectValue(o)}),c=!1}return{c:function(){n=createElement("p"),r=createText(s),a=createText("\n    "),o=createElement("select");for(var e=0;e<u.length;e+=1)u[e].c();this.h()},h:function(){addListener(o,"change",h),"selected"in t||e.root._beforecreate.push(h),o.disabled=i=!t.sheets.length,o.className="svelte-1jdst2k"},m:function(e,i){insertNode(n,e,i),appendNode(r,n),insertNode(a,e,i),insertNode(o,e,i);for(var s=0;s<u.length;s+=1)u[s].m(o,null);selectOption(o,t.selected)},p:function(t,n){var r=n.sheets;if(t.sheets){for(var a=0;a<r.length;a+=1){var s=assign(assign({},n),{each_value:r,sheet:r[a],sheet_index:a});u[a]?u[a].p(t,s):(u[a]=create_each_block$2(e,s),u[a].c(),u[a].m(o,null))}for(;a<u.length;a+=1)u[a].u(),u[a].d();u.length=r.length}c||selectOption(o,n.selected),t.sheets&&i!==(i=!n.sheets.length)&&(o.disabled=i)},u:function(){detachNode(n),detachNode(a),detachNode(o);for(var e=0;e<u.length;e+=1)u[e].u()},d:function(){destroyEach(u),removeListener(o,"change",h)}}}function create_if_block_2(e,t){var n,r=__("upload / xls / uploading data");return{c:function(){n=createElement("p")},m:function(e,t){insertNode(n,e,t),n.innerHTML=r},p:noop,u:function(){n.innerHTML="",detachNode(n)},d:noop}}function SelectSheet(e){init(this,e),this._state=assign(data$5(),e.data),this._handlers.update=[onupdate$2];var t=this;e.root||(this._oncreate=[],this._beforecreate=[]),this._fragment=create_main_fragment$4(this,this._state),this.root._oncreate.push(function(){t.fire("update",{changed:{sheets:1,selected:1},current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),callAll(this._beforecreate),callAll(this._oncreate))}function readFile(e,t){var n=new FileReader;n.onload=function(){try{for(var r=new Uint8Array(n.result),a="",o=0,i=0;i<r.length;++i)r[i]>122&&o++,a+=String.fromCharCode(r[i]);var s=jschardet.detect(a);s.confidence<=.95&&o<10&&(s.encoding="utf-8"),(n=new FileReader).onload=function(){return t(null,n.result)},n.readAsText(e,s.encoding)}catch(e){console.warn(e),t(null,n.result)}},n.readAsArrayBuffer(e)}function readSpreadsheet(e,t){var n="undefined"!=typeof FileReader&&(FileReader.prototype||{}).readAsBinaryString,r=new FileReader;r.onload=function(){try{var e=n?r.result:new Uint8Array(r.result),a=XLSX.read(e,{type:n?"binary":"array"});t(null,a.SheetNames.map(function(e){return{name:e,sheet:a.Sheets[e],csv:XLSX.utils.sheet_to_csv(a.Sheets[e])}}))}catch(e){console.error(e),t(null,r.result)}},r.readAsBinaryString(e)}assign(EditorNav.prototype,proto),assign(EditorNav.prototype,methods$1),assign(TextAreaUpload.prototype,proto),assign(UploadHelp.prototype,proto),UploadHelp.prototype._recompute=function(e,t){e.datasets&&this._differs(t.datasetsArray,t.datasetsArray=datasetsArray(t))&&(e.datasetsArray=!0)},assign(SelectSheet.prototype,proto);var coreUploads=[{id:"copy",title:__("upload / copy-paste"),longTitle:__("upload / copy-paste / long"),icon:"fa fa-clipboard",mainPanel:TextAreaUpload,sidebar:UploadHelp,action:function(){}},{id:"upload",title:__("upload / upload-csv"),longTitle:__("upload / upload-csv / long"),icon:"fa-file-excel-o fa",mainPanel:TextAreaUpload,sidebar:UploadHelp,isFileUpload:!0,onFileUpload:function(e){var t=e.target.files[0];"text/"===t.type.substr(0,5)||".csv"===t.name.substr(t.name.length-4)?(app.set({Sidebar:UploadHelp}),readFile(t,function(e,t){putJSON("/api/charts/"+dw.backend.currentChart.get("id")+"/data",t,function(){window.location.href="describe"})})):"application/"===t.type.substr(0,12)?(app.set({Sidebar:SelectSheet,sheets:[]}),readSpreadsheet(t,function(e,t){if(e)return app.set({error:e});app.set({sheets:t})})):app.set({error:__("upload / csv-required")})},action:function(){}}];function data$6(){return{dragover:!1,MainPanel:TextAreaUpload,Sidebar:UploadHelp,active:coreUploads[0],buttons:coreUploads,sheets:[],chart:{id:""},readonly:!1,chartData:"",transpose:!1,firstRowIsHeader:!0,skipRows:0}}var methods$2={addButton:function(e){coreUploads.push(e),this.set({buttons:coreUploads});var t=this.get().defaultMethod;e.id===t&&this.btnAction(e)},btnAction:function(e){var t=this.store;this.set({active:e}),"copy"===e.id&&t.get("externalData")&&t.set({externalData:""});var n=e.id;"upload"===e.id&&(n="copy",setTimeout(function(){},1e3)),t.setMetadata("data.upload-method",n),e.action&&e.action(),e.mainPanel&&this.set({MainPanel:e.mainPanel}),e.sidebar&&this.set({Sidebar:e.sidebar})},btnUpload:function(e,t){e.onFileUpload&&e.onFileUpload(t)},dragStart:function(e){"copy"===this.get().active.id&&(e.preventDefault(),this.set({dragover:!0}))},resetDrag:function(){this.set({dragover:!1})},onFileDrop:function(e){if("copy"===this.get().active.id){this.resetDrag(),e.preventDefault();var t=[];if(e.dataTransfer.items){for(var n=0;n<e.dataTransfer.items.length;n++)"file"===e.dataTransfer.items[n].kind&&t.push(e.dataTransfer.items[n].getAsFile());e.dataTransfer.items.clear()}else{for(var r=0;r<e.dataTransfer.files.length;r++)t.push(e.dataTransfer.files[r]);e.dataTransfer.items.clear()}for(var a=this.store,o=0;o<t.length;o++)if("text/"===t[o].type.substr(0,5))return readFile(t[o],function(e,t){a.set({_rawData:t}),a.storeData(function(){setTimeout(function(){a.fire("navigate","describe")},500)})})}}};function oncreate$1(){var e=this;app=this;var t=this.store.getMetadata("data.upload-method","copy");this.set({defaultMethod:t}),coreUploads.forEach(function(n){n.id===t&&e.set({active:n})})}function create_main_fragment$5(e,t){for(var n,r,a,o,i,s,c,l,u,d,h,f,p,m,_,v,g,b,y,N,x,w,k=__("upload / title"),M=t.active.longTitle||t.active.title,T={},E={},C=__("Proceed"),S=t.dragover&&create_if_block$3(e,t),$=t.buttons,D=[],L=0;L<$.length;L+=1)D[L]=create_each_block$3(e,assign(assign({},t),{each_value:$,btn:$[L],btn_index:L}));var A=t.error&&create_if_block_2$1(e,t),Y=t.Sidebar;function H(t){var n={};return"chartData"in t&&(n.chartData=t.chartData,T.chartData=!0),"readonly"in t&&(n.readonly=t.readonly,T.readonly=!0),"sheets"in t&&(n.sheets=t.sheets,T.sheets=!0),"datasets"in t&&(n.datasets=t.datasets,T.datasets=!0),{root:e.root,data:n,_bind:function(t,n){e.get();var r={};!T.chartData&&t.chartData&&(r.chartData=n.chartData),!T.readonly&&t.readonly&&(r.readonly=n.readonly),!T.sheets&&t.sheets&&(r.sheets=n.sheets),!T.datasets&&t.datasets&&(r.datasets=n.datasets),e._set(r),T={}}}}if(Y){var F=new Y(H(t));e.root._beforecreate.push(function(){F._bind({chartData:1,readonly:1,sheets:1,datasets:1},F.get())})}var R=t.MainPanel;function B(t){var n={};return"chartData"in t&&(n.chartData=t.chartData,E.chartData=!0),"readonly"in t&&(n.readonly=t.readonly,E.readonly=!0),{root:e.root,data:n,_bind:function(t,n){e.get();var r={};!E.chartData&&t.chartData&&(r.chartData=n.chartData),!E.readonly&&t.readonly&&(r.readonly=n.readonly),e._set(r),E={}}}}if(R){var I=new R(B(t));e.root._beforecreate.push(function(){I._bind({chartData:1,readonly:1},I.get())})}function U(t){e.onFileDrop(t)}function O(t){e.dragStart(t)}function P(t){e.dragStart(t)}function j(t){e.resetDrag()}function z(t){e.resetDrag()}return{c:function(){n=createElement("div"),S&&S.c(),r=createText("\n    "),a=createElement("div"),o=createElement("div"),i=createElement("div"),s=createElement("h3"),c=createText("\n\n                "),l=createElement("ul");for(var e=0;e<D.length;e+=1)D[e].c();u=createText("\n\n                "),A&&A.c(),d=createText("\n\n                "),h=createElement("h4"),f=createText(M),p=createText("\n\n                "),F&&F._fragment.c(),m=createText("\n        "),_=createElement("div"),I&&I._fragment.c(),v=createText("\n\n            "),g=createElement("div"),b=createElement("a"),y=createText(C),N=createText(" "),x=createElement("i"),this.h()},h:function(){l.className="import-methods svelte-oe6wy4",i.className="sidebar",o.className="span5",x.className="icon-chevron-right icon-white",b.href="describe",b.className="submit btn btn-primary",b.id="describe-proceed",g.className="buttons pull-right",_.className="span7",a.className="row",a.style.cssText=w=t.dragover?"opacity: 0.5;filter:blur(6px);background:white;pointer-events:none":"",addListener(n,"drop",U),addListener(n,"dragover",O),addListener(n,"dragenter",P),addListener(n,"dragend",j),addListener(n,"dragleave",z),n.className="chart-editor dw-create-upload upload-data"},m:function(e,t){insertNode(n,e,t),S&&S.m(n,null),appendNode(r,n),appendNode(a,n),appendNode(o,a),appendNode(i,o),appendNode(s,i),s.innerHTML=k,appendNode(c,i),appendNode(l,i);for(var w=0;w<D.length;w+=1)D[w].m(l,null);appendNode(u,i),A&&A.m(i,null),appendNode(d,i),appendNode(h,i),appendNode(f,h),appendNode(p,i),F&&F._mount(i,null),appendNode(m,a),appendNode(_,a),I&&I._mount(_,null),appendNode(v,_),appendNode(g,_),appendNode(b,g),appendNode(y,b),appendNode(N,b),appendNode(x,b)},p:function(t,o){o.dragover?S||((S=create_if_block$3(e,o)).c(),S.m(n,r)):S&&(S.u(),S.d(),S=null);var s=o.buttons;if(t.buttons||t.active){for(var c=0;c<s.length;c+=1){var u=assign(assign({},o),{each_value:s,btn:s[c],btn_index:c});D[c]?D[c].p(t,u):(D[c]=create_each_block$3(e,u),D[c].c(),D[c].m(l,null))}for(;c<D.length;c+=1)D[c].u(),D[c].d();D.length=s.length}if(o.error?A?A.p(t,o):((A=create_if_block_2$1(e,o)).c(),A.m(i,d)):A&&(A.u(),A.d(),A=null),t.active&&M!==(M=o.active.longTitle||o.active.title)&&(f.data=M),Y!==(Y=o.Sidebar))F&&F.destroy(),Y&&((F=new Y(H(o)))._fragment.c(),F._mount(i,null));else{var h={};!T.chartData&&t.chartData&&(h.chartData=o.chartData,T.chartData=!0),!T.readonly&&t.readonly&&(h.readonly=o.readonly,T.readonly=!0),!T.sheets&&t.sheets&&(h.sheets=o.sheets,T.sheets=!0),!T.datasets&&t.datasets&&(h.datasets=o.datasets,T.datasets=!0),F._set(h),T={}}if(R!==(R=o.MainPanel))I&&I.destroy(),R&&((I=new R(B(o)))._fragment.c(),I._mount(_,v));else{var p={};!E.chartData&&t.chartData&&(p.chartData=o.chartData,E.chartData=!0),!E.readonly&&t.readonly&&(p.readonly=o.readonly,E.readonly=!0),I._set(p),E={}}t.dragover&&w!==(w=o.dragover?"opacity: 0.5;filter:blur(6px);background:white;pointer-events:none":"")&&(a.style.cssText=w)},u:function(){s.innerHTML="",detachNode(n),S&&S.u();for(var e=0;e<D.length;e+=1)D[e].u();A&&A.u()},d:function(){S&&S.d(),destroyEach(D),A&&A.d(),F&&F.destroy(!1),I&&I.destroy(!1),removeListener(n,"drop",U),removeListener(n,"dragover",O),removeListener(n,"dragenter",P),removeListener(n,"dragend",j),removeListener(n,"dragleave",z)}}}function create_if_block$3(e,t){var n,r=__("upload / drag-csv-here");return{c:function(){n=createElement("div"),this.h()},h:function(){n.className="draginfo svelte-oe6wy4"},m:function(e,t){insertNode(n,e,t),n.innerHTML=r},u:function(){n.innerHTML="",detachNode(n)},d:noop}}function create_each_block$3(e,t){var n,r,a,o,i,s,c,l,u,d=t.btn,h=(t.each_value,t.btn_index,d.title),f=d.isFileUpload&&create_if_block_1$1(e,t);return{c:function(){n=createElement("li"),r=createElement("label"),f&&f.c(),a=createText("\n                            "),o=createElement("i"),s=createText("\n                            "),c=createElement("span"),l=createText(h),this.h()},h:function(){o.className=i=d.icon+" svelte-oe6wy4",c.className="svelte-oe6wy4",r.className="svelte-oe6wy4",addListener(n,"click",click_handler),n.className=u="action "+(t.active==d?"active":"")+" svelte-oe6wy4",n._svelte={component:e,each_value:t.each_value,btn_index:t.btn_index}},m:function(e,t){insertNode(n,e,t),appendNode(r,n),f&&f.m(r,null),appendNode(a,r),appendNode(o,r),appendNode(s,r),appendNode(c,r),appendNode(l,c)},p:function(t,s){d=s.btn,s.each_value,s.btn_index,d.isFileUpload?f?f.p(t,s):((f=create_if_block_1$1(e,s)).c(),f.m(r,a)):f&&(f.u(),f.d(),f=null),t.buttons&&i!==(i=d.icon+" svelte-oe6wy4")&&(o.className=i),t.buttons&&h!==(h=d.title)&&(l.data=h),(t.active||t.buttons)&&u!==(u="action "+(s.active==d?"active":"")+" svelte-oe6wy4")&&(n.className=u),n._svelte.each_value=s.each_value,n._svelte.btn_index=s.btn_index},u:function(){detachNode(n),f&&f.u()},d:function(){f&&f.d(),removeListener(n,"click",click_handler)}}}function create_if_block_1$1(e,t){var n;t.btn,t.each_value,t.btn_index;return{c:function(){n=createElement("input"),this.h()},h:function(){addListener(n,"change",change_handler),n.accept=".csv, .tsv, .txt, .xlsx, .xls, .ods, .dbf",n.className="file-upload svelte-oe6wy4",setAttribute(n,"type","file"),n._svelte={component:e,each_value:t.each_value,btn_index:t.btn_index}},m:function(e,t){insertNode(n,e,t)},p:function(e,t){t.btn,t.each_value,t.btn_index,n._svelte.each_value=t.each_value,n._svelte.btn_index=t.btn_index},u:function(){detachNode(n)},d:function(){removeListener(n,"change",change_handler)}}}function create_if_block_2$1(e,t){var n,r,a,o;function i(t){e.set({error:!1})}return{c:function(){n=createElement("div"),(r=createElement("div")).textContent="✕",a=createText("\n                    "),o=createElement("noscript"),this.h()},h:function(){addListener(r,"click",i),r.className="action close",n.className="alert alert-error"},m:function(e,i){insertNode(n,e,i),appendNode(r,n),appendNode(a,n),appendNode(o,n),o.insertAdjacentHTML("afterend",t.error)},p:function(e,t){e.error&&(detachAfter(o),o.insertAdjacentHTML("afterend",t.error))},u:function(){detachAfter(o),detachNode(n)},d:function(){removeListener(r,"click",i)}}}function change_handler(e){var t=this._svelte.component,n=this._svelte.each_value[this._svelte.btn_index];t.btnUpload(n,e)}function click_handler(e){var t=this._svelte.component,n=this._svelte.each_value[this._svelte.btn_index];t.btnAction(n)}function UploadStep(e){init(this,e),this._state=assign(data$6(),e.data);var t=this;e.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=create_main_fragment$5(this,this._state),this.root._oncreate.push(function(){oncreate$1.call(t),t.fire("update",{changed:{dragover:1,buttons:1,active:1,error:1,Sidebar:1,chartData:1,readonly:1,sheets:1,datasets:1,MainPanel:1},current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),this._lock=!0,callAll(this._beforecreate),callAll(this._oncreate),callAll(this._aftercreate),this._lock=!1)}function data$7(){return{notoggle:!1,id:!1,open:!0}}assign(UploadStep.prototype,proto),assign(UploadStep.prototype,methods$2);var methods$3={toggle:function(){if(!this.get().notoggle){var e=this.get(),t=e.open,n=e.id;if(n){var r=JSON.parse(window.localStorage.getItem("dw-vis-groups"))||{};r["locator-map"]||(r["locator-map"]={}),r["locator-map"][n]="open"==r["locator-map"][n]?"closed":"open",window.localStorage.setItem("dw-vis-groups",JSON.stringify(r))}this.set({open:!t})}}};function oncreate$2(){var e=this.get()||{},t=e.id;if(!e.notoggle&&t){var n=JSON.parse(window.localStorage.getItem("dw-vis-groups"))||{};n["locator-map"]&&n["locator-map"][t]&&this.set({open:"closed"!=n["locator-map"][t]})}}function create_main_fragment$6(e,t){var n,r,a,o,i,s,c=!t.notoggle&&create_if_block$4(e,t);function l(t){e.toggle()}var u=t.open&&create_if_block_1$2(e,t);return{c:function(){n=createElement("div"),r=createElement("label"),c&&c.c(),a=createText("\n        "),o=createElement("noscript"),i=createText("\n\n    "),u&&u.c(),this.h()},h:function(){addListener(r,"click",l),r.className="group-title svelte-cx9ls9",n.className=s="vis-option-type-group "+(t.open?"group-open":"")+" "+(t.notoggle?"notoggle":"")+" svelte-cx9ls9"},m:function(e,s){insertNode(n,e,s),appendNode(r,n),c&&c.m(r,null),appendNode(a,r),appendNode(o,r),o.insertAdjacentHTML("afterend",t.label),appendNode(i,n),u&&u.m(n,null)},p:function(t,i){i.notoggle?c&&(c.u(),c.d(),c=null):c||((c=create_if_block$4(e,i)).c(),c.m(r,a)),t.label&&(detachAfter(o),o.insertAdjacentHTML("afterend",i.label)),i.open?u||((u=create_if_block_1$2(e,i)).c(),u.m(n,null)):u&&(u.u(),u.d(),u=null),(t.open||t.notoggle)&&s!==(s="vis-option-type-group "+(i.open?"group-open":"")+" "+(i.notoggle?"notoggle":"")+" svelte-cx9ls9")&&(n.className=s)},u:function(){detachAfter(o),detachNode(n),c&&c.u(),u&&u.u()},d:function(){c&&c.d(),removeListener(r,"click",l),u&&u.d()}}}function create_if_block$4(e,t){var n,r,a;return{c:function(){n=createElement("i"),r=createText("\n        "),a=createElement("i"),this.h()},h:function(){n.className="fa fa-chevron-up expand-group pull-right",a.className="fa fa-chevron-down collapse-group pull-right"},m:function(e,t){insertNode(n,e,t),insertNode(r,e,t),insertNode(a,e,t)},u:function(){detachNode(n),detachNode(r),detachNode(a)},d:noop}}function create_if_block_1$2(e,t){var n,r=e._slotted.default;return{c:function(){n=createElement("div"),this.h()},h:function(){n.className="option-group-content vis-option-type-chart-description"},m:function(e,t){insertNode(n,e,t),r&&appendNode(r,n)},u:function(){detachNode(n),r&&reinsertChildren(n,r)},d:noop}}function Group(e){init(this,e),this._state=assign(data$7(),e.data),this._slotted=e.slots||{};var t=this;e.root||(this._oncreate=[]),this.slots={},this._fragment=create_main_fragment$6(this,this._state),this.root._oncreate.push(function(){oncreate$2.call(t),t.fire("update",{changed:{open:1,notoggle:1,label:1},current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),callAll(this._oncreate))}function active(e){return e.$type}function chartTypes(e){return e.$visualizations.filter(function(e){return e.title&&"chart"===e["svelte-workflow"]&&"map"!==e.namespace})}function activeChartTypes(e){return e.chartTypes.filter(function(e){return!e.archived})}function archivedChartTypes(e){return e.chartTypes.filter(function(e){return e.archived})}assign(Group.prototype,proto),assign(Group.prototype,methods$3);var methods$4={select:function(e){this.store.set({type:e.id})}};function create_main_fragment$7(e,t){for(var n,r,a,o,i,s,c,l=!1,u=t.activeChartTypes,d=[],h=0;h<u.length;h+=1)d[h]=create_each_block$4(e,assign(assign({},t),{each_value:u,vis:u[h],vis_index:h}));var f=t.archivedChartTypes,p=[];for(h=0;h<f.length;h+=1)p[h]=create_each_block_1$1(e,assign(assign({},t),{each_value_1:f,vis:f[h],vis_index_1:h}));function m(){l=!0,e.set({active:selectValue(s)}),l=!1}return{c:function(){n=createElement("div"),r=createElement("div");for(var e=0;e<d.length;e+=1)d[e].c();a=createText("\n    "),o=createElement("div"),i=createText("Archived chart types:\n        "),s=createElement("select"),c=createElement("option");for(e=0;e<p.length;e+=1)p[e].c();this.h()},h:function(){r.className="vis-thumbs",c.__value=t.undefined,c.value=c.__value,addListener(s,"change",m),"active"in t||e.root._beforecreate.push(m),o.className="vis-archive-select",n.className="vis-selector-unfolded"},m:function(e,l){insertNode(n,e,l),appendNode(r,n);for(var u=0;u<d.length;u+=1)d[u].m(r,null);appendNode(a,n),appendNode(o,n),appendNode(i,o),appendNode(s,o),appendNode(c,s);for(u=0;u<p.length;u+=1)p[u].m(s,null);selectOption(s,t.active)},p:function(t,n){var a=n.activeChartTypes;if(t.activeChartTypes||t.active){for(var o=0;o<a.length;o+=1){var i=assign(assign({},n),{each_value:a,vis:a[o],vis_index:o});d[o]?d[o].p(t,i):(d[o]=create_each_block$4(e,i),d[o].c(),d[o].m(r,null))}for(;o<d.length;o+=1)d[o].u(),d[o].d();d.length=a.length}t.undefined&&(c.__value=n.undefined),c.value=c.__value;var u=n.archivedChartTypes;if(t.archivedChartTypes){for(o=0;o<u.length;o+=1){var h=assign(assign({},n),{each_value_1:u,vis:u[o],vis_index_1:o});p[o]?p[o].p(t,h):(p[o]=create_each_block_1$1(e,h),p[o].c(),p[o].m(s,null))}for(;o<p.length;o+=1)p[o].u(),p[o].d();p.length=u.length}l||selectOption(s,n.active)},u:function(){detachNode(n);for(var e=0;e<d.length;e+=1)d[e].u();for(e=0;e<p.length;e+=1)p[e].u()},d:function(){destroyEach(d),destroyEach(p),removeListener(s,"change",m)}}}function create_each_block$4(e,t){var n,r,a,o,i,s,c=t.vis,l=(t.each_value,t.vis_index,c.icon),u=c.title;return{c:function(){n=createElement("a"),r=createElement("noscript"),a=createText("\n            "),o=createElement("div"),i=createText(u),this.h()},h:function(){o.className="title",addListener(n,"click",click_handler$1),n.className=s="vis-thumb "+(t.active===c.id?"active":""),n._svelte={component:e,each_value:t.each_value,vis_index:t.vis_index}},m:function(e,t){insertNode(n,e,t),appendNode(r,n),r.insertAdjacentHTML("beforebegin",l),appendNode(a,n),appendNode(o,n),appendNode(i,o)},p:function(e,t){c=t.vis,t.each_value,t.vis_index,e.activeChartTypes&&l!==(l=c.icon)&&(detachBefore(r),r.insertAdjacentHTML("beforebegin",l)),e.activeChartTypes&&u!==(u=c.title)&&(i.data=u),(e.active||e.activeChartTypes)&&s!==(s="vis-thumb "+(t.active===c.id?"active":""))&&(n.className=s),n._svelte.each_value=t.each_value,n._svelte.vis_index=t.vis_index},u:function(){detachBefore(r),detachNode(n)},d:function(){removeListener(n,"click",click_handler$1)}}}function create_each_block_1$1(e,t){var n,r,a,o=t.vis,i=(t.each_value_1,t.vis_index_1,o.title);return{c:function(){n=createElement("option"),r=createText(i),this.h()},h:function(){n.__value=a=o.id,n.value=n.__value},m:function(e,t){insertNode(n,e,t),appendNode(r,n)},p:function(e,t){o=t.vis,t.each_value_1,t.vis_index_1,e.archivedChartTypes&&i!==(i=o.title)&&(r.data=i),e.archivedChartTypes&&a!==(a=o.id)&&(n.__value=a),n.value=n.__value},u:function(){detachNode(n)},d:noop}}function click_handler$1(e){var t=this._svelte.component,n=this._svelte.each_value[this._svelte.vis_index];t.select(n)}function VisSelector(e){init(this,e),this._state=assign(assign({undefined:void 0},this.store._init(["type","visualizations"])),e.data),this.store._add(this,["type","visualizations"]),this._recompute({$type:1,$visualizations:1,chartTypes:1},this._state),this._handlers.destroy=[removeFromStore],e.root||(this._oncreate=[],this._beforecreate=[]),this._fragment=create_main_fragment$7(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),callAll(this._beforecreate))}function create_main_fragment$8(e,t){var n,r,a,o,i,s,c,l,u,d,h,f,p,m,_,v,g,b,y,N,x,w,k,M,T,E,C,S,$,D,L,A,Y,H,F,R,B,I=__("Title"),U=!1,O=__("Description"),P=!1,j=__("Notes"),z=!1,W=__("Source name"),V=!1,q=__("Source URL"),G=!1,J=__("visualize / annotate / byline"),X=!1;function K(){U=!0,e.store.set({title:l.value}),U=!1}function Z(){var t=e.get(),n=e.store.get();P=!0,t.$metadata.describe.intro=p.value,e.store.set({metadata:n.metadata}),P=!1}function Q(){var t=e.get(),n=e.store.get();z=!0,t.$metadata.annotate.notes=b.value,e.store.set({metadata:n.metadata}),z=!1}function ee(){var t=e.get(),n=e.store.get();V=!0,t.$metadata.describe["source-name"]=T.value,e.store.set({metadata:n.metadata}),V=!1}function te(){var t=e.get(),n=e.store.get();G=!0,t.$metadata.describe["source-url"]=L.value,e.store.set({metadata:n.metadata}),G=!1}function ne(){var t=e.get(),n=e.store.get();X=!0,t.$metadata.describe.byline=B.value,e.store.set({metadata:n.metadata}),X=!1}return{c:function(){n=createElement("div"),r=createElement("div"),(a=createElement("label")).innerHTML='<input type="checkbox"> hide',o=createText("\n        "),i=createElement("label"),s=createText(I),c=createText("\n        "),l=createElement("input"),u=createText("\n\n        "),d=createElement("label"),h=createText(O),f=createText("\n        "),p=createElement("textarea"),m=createText("\n\n        "),_=createElement("label"),v=createText(j),g=createText("\n        "),b=createElement("input"),y=createText("\n\n    "),N=createElement("div"),x=createElement("div"),w=createElement("label"),k=createText(W),M=createText("\n            "),T=createElement("input"),E=createText("\n        "),C=createElement("div"),S=createElement("label"),$=createText(q),D=createText("\n            "),L=createElement("input"),A=createText("\n\n    "),Y=createElement("div"),H=createElement("label"),F=createText(J),R=createText("\n        "),B=createElement("input"),this.h()},h:function(){a.className="hide-title svelte-18mezzx",i.className="control-label",i.htmlFor="text-title",addListener(l,"input",K),l.className="input-xlarge span4",l.autocomplete="off",setAttribute(l,"type","text"),d.className="control-label",d.htmlFor="text-intro",addListener(p,"input",Z),p.id="text-intro",p.className="input-xlarge span4",_.className="control-label",_.htmlFor="text-notes",addListener(b,"input",Q),b.className="input-xlarge span4",setAttribute(b,"type","text"),r.className="pull-left",setStyle(r,"position","relative"),w.className="control-label",addListener(T,"input",ee),T.className="span2",T.placeholder=__("name of the organisation"),setAttribute(T,"type","text"),x.className="span2",S.className="control-label",addListener(L,"input",te),L.className="span2",L.placeholder=__("URL of the dataset"),setAttribute(L,"type","text"),C.className="span2",N.className="row",H.className="control-label",addListener(B,"input",ne),B.className="input-xlarge span4",B.placeholder=__("visualize / annotate / byline / placeholder"),setAttribute(B,"type","text"),Y.className="chart-byline",n.className="story-title control-group"},m:function(e,I){insertNode(n,e,I),appendNode(r,n),appendNode(a,r),appendNode(o,r),appendNode(i,r),appendNode(s,i),appendNode(c,r),appendNode(l,r),l.value=t.$title,appendNode(u,r),appendNode(d,r),appendNode(h,d),appendNode(f,r),appendNode(p,r),p.value=t.$metadata.describe.intro,appendNode(m,r),appendNode(_,r),appendNode(v,_),appendNode(g,r),appendNode(b,r),b.value=t.$metadata.annotate.notes,appendNode(y,n),appendNode(N,n),appendNode(x,N),appendNode(w,x),appendNode(k,w),appendNode(M,x),appendNode(T,x),T.value=t.$metadata.describe["source-name"],appendNode(E,N),appendNode(C,N),appendNode(S,C),appendNode($,S),appendNode(D,C),appendNode(L,C),L.value=t.$metadata.describe["source-url"],appendNode(A,n),appendNode(Y,n),appendNode(H,Y),appendNode(F,H),appendNode(R,Y),appendNode(B,Y),B.value=t.$metadata.describe.byline},p:function(e,t){U||(l.value=t.$title),P||(p.value=t.$metadata.describe.intro),z||(b.value=t.$metadata.annotate.notes),V||(T.value=t.$metadata.describe["source-name"]),G||(L.value=t.$metadata.describe["source-url"]),X||(B.value=t.$metadata.describe.byline)},u:function(){detachNode(n)},d:function(){removeListener(l,"input",K),removeListener(p,"input",Z),removeListener(b,"input",Q),removeListener(T,"input",ee),removeListener(L,"input",te),removeListener(B,"input",ne)}}}function ChartDescription(e){init(this,e),this._state=assign(this.store._init(["title","metadata"]),e.data),this.store._add(this,["title","metadata"]),this._handlers.destroy=[removeFromStore],this._fragment=create_main_fragment$8(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}function data$8(){return{active:"vis"}}assign(VisSelector.prototype,proto),assign(VisSelector.prototype,methods$4),VisSelector.prototype._recompute=function(e,t){e.$type&&this._differs(t.active,t.active=active(t))&&(e.active=!0),e.$visualizations&&this._differs(t.chartTypes,t.chartTypes=chartTypes(t))&&(e.chartTypes=!0),e.chartTypes&&(this._differs(t.activeChartTypes,t.activeChartTypes=activeChartTypes(t))&&(e.activeChartTypes=!0),this._differs(t.archivedChartTypes,t.archivedChartTypes=archivedChartTypes(t))&&(e.archivedChartTypes=!0))},assign(ChartDescription.prototype,proto);var methods$5={tabNav:function(e,t){e.preventDefault(),this.set({active:t})}};function create_main_fragment$9(e,t){var n,r,a,o,i,s,c,l,u,d,h,f,p,m,_,v,g,b,y,N,x,w,k=__("Chart type"),M=__("Refine"),T=__("Annotate"),E=__("Design");function C(t){e.tabNav(t,"vis")}function S(t){e.tabNav(t,"refine")}function $(t){e.tabNav(t,"annotate")}function D(t){e.tabNav(t,"design")}function L(e){return"vis"===e.active?create_if_block$5:"refine"==e.active?create_if_block_1$3:"annotate"==e.active?create_if_block_2$2:"design"==e.active?create_if_block_3:null}var A=L(t),Y=A&&A(e,t);return{c:function(){n=createElement("div"),r=createElement("div"),a=createElement("div"),o=createElement("ul"),i=createElement("li"),s=createElement("a"),l=createElement("li"),u=createElement("a"),h=createElement("li"),f=createElement("a"),m=createElement("li"),_=createElement("a"),g=createText("\n\n            "),b=createElement("div"),y=createElement("div"),Y&&Y.c(),x=createText("\n\n        "),(w=createElement("div")).textContent="PREVIEW",this.h()},h:function(){addListener(s,"click",C),s.href="#vis",i.className=c="vis"===t.active?"active":"",addListener(u,"click",S),u.href="#refine",l.className=d="refine"===t.active?"active":"",addListener(f,"click",$),f.href="#annotate",h.className=p="annotate"===t.active?"active":"",addListener(_,"click",D),_.href="#design",m.className=v="design"===t.active?"active":"",o.className="nav nav-tabs visualize-nav-tabs",o.dataset.target="tab-container",y.className=N="section "+t.active+" svelte-en2xks",b.className="tab-container",a.className="span4 visconfig",setStyle(a,"min-height","516px"),w.className="span8",r.className="row",n.className="dw-create-visualize chart-editor chart-editor-web"},m:function(e,t){insertNode(n,e,t),appendNode(r,n),appendNode(a,r),appendNode(o,a),appendNode(i,o),appendNode(s,i),s.innerHTML=k,appendNode(l,o),appendNode(u,l),u.innerHTML=M,appendNode(h,o),appendNode(f,h),f.innerHTML=T,appendNode(m,o),appendNode(_,m),_.innerHTML=E,appendNode(g,a),appendNode(b,a),appendNode(y,b),Y&&Y.m(y,null),appendNode(x,r),appendNode(w,r)},p:function(t,n){t.active&&c!==(c="vis"===n.active?"active":"")&&(i.className=c),t.active&&d!==(d="refine"===n.active?"active":"")&&(l.className=d),t.active&&p!==(p="annotate"===n.active?"active":"")&&(h.className=p),t.active&&v!==(v="design"===n.active?"active":"")&&(m.className=v),A!==(A=L(n))&&(Y&&(Y.u(),Y.d()),(Y=A&&A(e,n))&&Y.c(),Y&&Y.m(y,null)),t.active&&N!==(N="section "+n.active+" svelte-en2xks")&&(y.className=N)},u:function(){s.innerHTML="",u.innerHTML="",f.innerHTML="",_.innerHTML="",detachNode(n),Y&&Y.u()},d:function(){removeListener(s,"click",C),removeListener(u,"click",S),removeListener(f,"click",$),removeListener(_,"click",D),Y&&Y.d()}}}function create_if_block$5(e,t){var n,r,a,o,i,s,c,l=__("Hint"),u=__("visualize / transpose-hint").replace("[LINK]",'<a href="#" id="btn-transpose"><img style="height:14px" src="/static/css/chart-editor/transpose.png" />').replace("[/LINK]","</a>"),d=new VisSelector({root:e.root});return{c:function(){d._fragment.c(),n=createText("\n                        "),r=createElement("p"),a=createElement("b"),o=createText(l),i=createText(":"),s=createText(" "),c=createElement("noscript")},m:function(e,t){d._mount(e,t),insertNode(n,e,t),insertNode(r,e,t),appendNode(a,r),appendNode(o,a),appendNode(i,a),appendNode(s,r),appendNode(c,r),c.insertAdjacentHTML("afterend",u)},u:function(){detachAfter(c),d._unmount(),detachNode(n),detachNode(r)},d:function(){d.destroy(!1)}}}function create_if_block_1$3(e,t){var n;return{c:function(){n=createText("REFINE")},m:function(e,t){insertNode(n,e,t)},u:function(){detachNode(n)},d:noop}}function create_if_block_2$2(e,t){var n,r,a,o=new ChartDescription({root:e.root}),i={label:__("Annotate your chart")},s=new Group({root:e.root,slots:{default:createFragment()},data:i});return{c:function(){n=createElement("div"),r=createText("\n                                "),o._fragment.c(),a=createText("\n                            "),s._fragment.c(),this.h()},h:function(){n.className="story"},m:function(e,t){insertNode(n,e,t),appendNode(r,s._slotted.default),o._mount(s._slotted.default,null),appendNode(a,s._slotted.default),s._mount(n,null)},u:function(){detachNode(n)},d:function(){o.destroy(!1),s.destroy(!1)}}}function create_if_block_3(e,t){var n;return{c:function(){n=createText("DESIGN")},m:function(e,t){insertNode(n,e,t)},u:function(){detachNode(n)},d:noop}}function VisualizeStep(e){init(this,e),this._state=assign(data$8(),e.data),e.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=create_main_fragment$9(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),this._lock=!0,callAll(this._beforecreate),callAll(this._oncreate),callAll(this._aftercreate),this._lock=!1)}assign(VisualizeStep.prototype,proto),assign(VisualizeStep.prototype,methods$5);var _delay=restArgs(function(e,t,n){return setTimeout(function(){return e.apply(null,n)},t)});function _debounce(e,t,n){var r,a,o=function(t,n){r=null,n&&(a=e.apply(t,n))},i=restArgs(function(i){if(r&&clearTimeout(r),n){var s=!r;r=setTimeout(o,t),s&&(a=e.apply(this,i))}else r=_delay(o,t,this,i);return a});return i.cancel=function(){clearTimeout(r),r=null},i}function clone(e){if(!e||"object"!=typeof e)return e;try{return JSON.parse(JSON.stringify(e))}catch(t){return e}}function title(e){var t=e.column;return __("describe / edit-column").replace("%s",'"'+(t?t.title()||t.name():"--")+'"')}function metaColumns(e){var t=e.columns;return t?t.map(function(e){return{key:column_name_to_var(e.name()),title:e.title(),type:e.type()}}):[]}function keywords(e){var t=["sum","round","min","max","median","mean"];return e.metaColumns.forEach(function(e){t.push(e.key),"number"===e.type&&(t.push(e.key+"__sum"),t.push(e.key+"__min"),t.push(e.key+"__max"),t.push(e.key+"__mean"),t.push(e.key+"__median"))}),t}function data$9(){return{name:"",formula:""}}var methods$6={insert:function(e){var t=this.get().cm;t.replaceSelection(e.key),t.focus()},removeColumn:function(){var e=this.get().column,t=this.store.get("dw_chart"),n=t.dataset(),r=clone(t.get("metadata.describe.computed-columns",{}));delete r[e.name()];var a=n.columnOrder()[n.indexOf(e.name())],o=[];t.get("metadata.data.changes",[]).forEach(function(e){e.column!==a&&(e.column>a&&e.column--,o.push(e))}),t.set("metadata.describe.computed-columns",r),t.set("metadata.data.changes",o),t.saveSoon(),this.fire("updateTable"),this.fire("unselect")}};function oncreate$3(){var e=this,t=this.get().column,n=this.store.get("dw_chart"),r=n.get("metadata.describe.computed-columns",{});this.set({formula:r[t.name()]||"",name:t.title()}),this.observe("column",function(t){t&&e.set({formula:r[t.name()]||"",name:t.title()})});var a=this;var o=CodeMirror.fromTextArea(this.refs.code,{value:this.get("formula")||"",mode:"simple",indentUnit:2,tabSize:2,lineWrapping:!0,matchBrackets:!0,placeholder:"// enter formula here",continueComments:"Enter",extraKeys:{Tab:"autocomplete"},hintOptions:{hint:function(e){var t=e.getCursor(),n=e.getTokenAt(t),r=[],o=a.get("keywords");return"variable"===n.type&&(r=o.filter(function(e){return 0===e.toLowerCase().indexOf(n.string.toLowerCase())})),{list:r,from:CodeMirror.Pos(t.line,n.start),to:CodeMirror.Pos(t.line,n.end)}}}});window.CodeMirror=CodeMirror,this.set({cm:o});var i=_debounce(function(){return e.fire("updateTable")},1500);this.observe("formula",function(t){t!==o.getValue()&&o.setValue(t);var r=e.get().column,a=clone(n.get("metadata.describe.computed-columns",{}));a[r.name()]!==t&&(a[r.name()]=t,n.set("metadata.describe.computed-columns",a),n.saveSoon&&n.saveSoon(),i())}),this.observe("name",function(t){var r=e.get().column,a=clone(n.get("metadata.data.changes",[])),o=n.dataset(),s=o.columnOrder()[o.indexOf(r.name())],c=-1;a.forEach(function(e,t){e.column===s&&0===e.row&&(c=t)}),c>-1?(a[c].value=t,a[c].time=(new Date).getTime()):a.push({column:s,row:0,value:t,time:(new Date).getTime()}),n.set("metadata.data.changes",a),n.saveSoon&&n.saveSoon(),i()}),o.on("change",function(t){e.set({formula:t.getValue()})}),this.observe("metaColumns",function(){var t=new RegExp("(?:"+e.get("keywords").join("|")+")");CodeMirror.defineSimpleMode("simplemode",{start:[{regex:/"(?:[^\\]|\\.)*?(?:"|$)/,token:"string"},{regex:/(function)(\s+)([a-z$][\w$]*)/,token:["keyword",null,"keyword"]},{regex:/(?:function|var|return|if|for|while|else|do|this)\b/,token:"keyword"},{regex:/true|false|null|undefined/,token:"atom"},{regex:/0x[a-f\d]+|[-+]?(?:\.\d+|\d+\.?\d*)(?:e[-+]?\d+)?/i,token:"number"},{regex:/\/\/.*/,token:"comment"},{regex:/\/(?:[^\\]|\\.)*?\//,token:"variable-3"},{regex:/\/\*/,token:"comment",next:"comment"},{regex:/[-+/*=<>!]+/,token:"operator"},{regex:/[{[(]/,indent:!0},{regex:/[}\])]/,dedent:!0},{regex:t,token:"variable-2"},{regex:/[a-z$][\w$]*/,token:"variable"},{regex:/<</,token:"meta",mode:{spec:"xml",end:/>>/}}],comment:[{regex:/.*?\*\//,token:"comment",next:"start"},{regex:/.*/,token:"comment"}],meta:{dontIndentStates:["comment"],lineComment:"//"}}),o.setOption("mode","simplemode")})}function column_name_to_var(e){return e.toString().toLowerCase().replace(/\s+/g,"_").replace(/[^\w-]+/g,"").replace(/-/g,"_").replace(/__+/g,"_").replace(/^_+/,"").replace(/_+$/,"").replace(/^(\d)/,"_$1").replace(/^(abstract|arguments|await|boolean|break|byte|case|catch|char|class|const|continue|debugger|default|delete|do|double|else|enum|eval|export|extends|false|final|finally|float|for|function|goto|if|implements|import|in|instanceof|int|interface|let|long|native|new|null|package|private|protected|public|return|short|static|super|switch|synchronized|this|throw|throws|transient|true|try|typeof|var|void|volatile|while|window|with|yield)$/,"$1_")}function create_main_fragment$10(e,t){var n,r,a,o,i,s,c,l,u,d,h,f,p,m,_,v,g,b,y,N,x,w,k,M,T,E,C,S=__("computed columns / modal / intro"),$=__("computed columns / modal / name"),D=!1,L=__("computed columns / modal / formula"),A=__("computed columns / modal / available columns"),Y=__("computed columns / modal / remove");function H(){D=!0,e.set({name:h.value}),D=!1}for(var F=t.metaColumns,R=[],B=0;B<F.length;B+=1)R[B]=create_each_block$5(e,assign(assign({},t),{each_value:F,col:F[B],col_index:B}));function I(t){e.removeColumn()}return{c:function(){n=createElement("div"),r=createElement("h3"),a=createText(t.title),o=createText("\n    "),i=createElement("p"),s=createText(S),c=createText("\n\n    "),l=createElement("label"),u=createText($),d=createText("\n    "),h=createElement("input"),f=createText("\n\n    "),p=createElement("label"),m=createText(L),_=createText("\n    "),v=createElement("textarea"),g=createText("\n\n    "),b=createElement("p"),y=createText(A),N=createText(":"),x=createText("\n\n    "),w=createElement("ul");for(var e=0;e<R.length;e+=1)R[e].c();k=createText("\n\n"),M=createElement("button"),T=createElement("i"),E=createText(" "),C=createText(Y),this.h()},h:function(){r.className="first",l.className="svelte-a4yq1f",addListener(h,"input",H),setAttribute(h,"type","text"),p.className="svelte-a4yq1f",v.className="code",setStyle(b,"margin-top","1em"),w.className="col-select svelte-a4yq1f",setStyle(n,"margin-bottom","15px"),T.className="fa fa-trash",addListener(M,"click",I),M.className="btn btn-danger"},m:function(S,$){insertNode(n,S,$),appendNode(r,n),appendNode(a,r),appendNode(o,n),appendNode(i,n),appendNode(s,i),appendNode(c,n),appendNode(l,n),appendNode(u,l),appendNode(d,n),appendNode(h,n),h.value=t.name,appendNode(f,n),appendNode(p,n),appendNode(m,p),appendNode(_,n),appendNode(v,n),e.refs.code=v,appendNode(g,n),appendNode(b,n),appendNode(y,b),appendNode(N,b),appendNode(x,n),appendNode(w,n);for(var D=0;D<R.length;D+=1)R[D].m(w,null);insertNode(k,S,$),insertNode(M,S,$),appendNode(T,M),appendNode(E,M),appendNode(C,M)},p:function(t,n){t.title&&(a.data=n.title),D||(h.value=n.name);var r=n.metaColumns;if(t.metaColumns){for(var o=0;o<r.length;o+=1){var i=assign(assign({},n),{each_value:r,col:r[o],col_index:o});R[o]?R[o].p(t,i):(R[o]=create_each_block$5(e,i),R[o].c(),R[o].m(w,null))}for(;o<R.length;o+=1)R[o].u(),R[o].d();R.length=r.length}},u:function(){detachNode(n);for(var e=0;e<R.length;e+=1)R[e].u();detachNode(k),detachNode(M)},d:function(){removeListener(h,"input",H),e.refs.code===v&&(e.refs.code=null),destroyEach(R),removeListener(M,"click",I)}}}function create_each_block$5(e,t){var n,r,a=t.col,o=(t.each_value,t.col_index,a.key);return{c:function(){n=createElement("li"),r=createText(o),this.h()},h:function(){addListener(n,"click",click_handler$2),n.className="svelte-a4yq1f",n._svelte={component:e,each_value:t.each_value,col_index:t.col_index}},m:function(e,t){insertNode(n,e,t),appendNode(r,n)},p:function(e,t){a=t.col,t.each_value,t.col_index,e.metaColumns&&o!==(o=a.key)&&(r.data=o),n._svelte.each_value=t.each_value,n._svelte.col_index=t.col_index},u:function(){detachNode(n)},d:function(){removeListener(n,"click",click_handler$2)}}}function click_handler$2(e){var t=this._svelte.component,n=this._svelte.each_value[this._svelte.col_index];t.insert(n)}function ComputedColumnEditor(e){init(this,e),this.refs={},this._state=assign(data$9(),e.data),this._recompute({column:1,columns:1,metaColumns:1},this._state);var t=this;e.root||(this._oncreate=[]),this._fragment=create_main_fragment$10(this,this._state),this.root._oncreate.push(function(){oncreate$3.call(t),t.fire("update",{changed:{column:1,columns:1,metaColumns:1,title:1,name:1},current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),callAll(this._oncreate))}function data$10(){return{disabled:!1,faded:!1}}function create_main_fragment$11(e,t){var n,r,a,o,i,s,c;function l(){e.set({value:a.checked})}return{c:function(){n=createElement("div"),r=createElement("label"),a=createElement("input"),o=createElement("span"),i=createText("  "),s=createText(t.label),this.h()},h:function(){addListener(a,"change",l),setAttribute(a,"type","checkbox"),a.disabled=t.disabled,a.className="svelte-1cqoaak",o.className="css-ui svelte-1cqoaak",r.className=c="checkbox "+(t.disabled?"disabled":"")+" "+(t.faded?"faded":"")+" svelte-1cqoaak",n.className="control-group vis-option-group vis-option-type-checkbox"},m:function(e,c){insertNode(n,e,c),appendNode(r,n),appendNode(a,r),a.checked=t.value,appendNode(o,r),appendNode(i,r),appendNode(s,r)},p:function(e,t){a.checked=t.value,e.disabled&&(a.disabled=t.disabled),e.label&&(s.data=t.label),(e.disabled||e.faded)&&c!==(c="checkbox "+(t.disabled?"disabled":"")+" "+(t.faded?"faded":"")+" svelte-1cqoaak")&&(r.className=c)},u:function(){detachNode(n)},d:function(){removeListener(a,"change",l)}}}function Checkbox(e){init(this,e),this._state=assign(data$10(),e.data),this._fragment=create_main_fragment$11(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}function data$11(){return{disabled:!1,width:"auto",labelWidth:"auto",options:[],optgroups:[]}}function create_main_fragment$12(e,t){var n,r,a,o,i,s,c,l,u=!1,d=t.options.length&&create_if_block$6(e,t),h=t.optgroups.length&&create_if_block_1$4(e,t);function f(){u=!0,e.set({value:selectValue(s)}),u=!1}return{c:function(){n=createElement("div"),r=createElement("label"),o=createText("\n\n    "),i=createElement("div"),s=createElement("select"),d&&d.c(),c=createComment(),h&&h.c(),this.h()},h:function(){setStyle(r,"width",t.labelWidth),r.className=a="control-label "+(t.disabled?"disabled":"")+" svelte-jp3jqj",addListener(s,"change",f),"value"in t||e.root._beforecreate.push(f),s.disabled=t.disabled,setStyle(s,"width",t.width),i.className=l="controls form-inline "+(t.disabled?"disabled":""),n.className="control-group vis-option-type-select"},m:function(e,a){insertNode(n,e,a),appendNode(r,n),r.innerHTML=t.label,appendNode(o,n),appendNode(i,n),appendNode(s,i),d&&d.m(s,null),appendNode(c,s),h&&h.m(s,null),selectOption(s,t.value)},p:function(t,n){t.label&&(r.innerHTML=n.label),t.labelWidth&&setStyle(r,"width",n.labelWidth),t.disabled&&a!==(a="control-label "+(n.disabled?"disabled":"")+" svelte-jp3jqj")&&(r.className=a),n.options.length?d?d.p(t,n):((d=create_if_block$6(e,n)).c(),d.m(s,c)):d&&(d.u(),d.d(),d=null),n.optgroups.length?h?h.p(t,n):((h=create_if_block_1$4(e,n)).c(),h.m(s,null)):h&&(h.u(),h.d(),h=null),u||selectOption(s,n.value),t.disabled&&(s.disabled=n.disabled),t.width&&setStyle(s,"width",n.width),t.disabled&&l!==(l="controls form-inline "+(n.disabled?"disabled":""))&&(i.className=l)},u:function(){r.innerHTML="",detachNode(n),d&&d.u(),h&&h.u()},d:function(){d&&d.d(),h&&h.d(),removeListener(s,"change",f)}}}function create_each_block$6(e,t){var n,r,a,o=t.opt,i=(t.each_value,t.opt_index,o.label);return{c:function(){n=createElement("option"),r=createText(i),this.h()},h:function(){n.__value=a=o.value,n.value=n.__value},m:function(e,t){insertNode(n,e,t),appendNode(r,n)},p:function(e,t){o=t.opt,t.each_value,t.opt_index,e.options&&i!==(i=o.label)&&(r.data=i),e.options&&a!==(a=o.value)&&(n.__value=a),n.value=n.__value},u:function(){detachNode(n)},d:noop}}function create_if_block$6(e,t){for(var n,r=t.options,a=[],o=0;o<r.length;o+=1)a[o]=create_each_block$6(e,assign(assign({},t),{each_value:r,opt:r[o],opt_index:o}));return{c:function(){for(var e=0;e<a.length;e+=1)a[e].c();n=createComment()},m:function(e,t){for(var r=0;r<a.length;r+=1)a[r].m(e,t);insertNode(n,e,t)},p:function(t,r){var o=r.options;if(t.options){for(var i=0;i<o.length;i+=1){var s=assign(assign({},r),{each_value:o,opt:o[i],opt_index:i});a[i]?a[i].p(t,s):(a[i]=create_each_block$6(e,s),a[i].c(),a[i].m(n.parentNode,n))}for(;i<a.length;i+=1)a[i].u(),a[i].d();a.length=o.length}},u:function(){for(var e=0;e<a.length;e+=1)a[e].u();detachNode(n)},d:function(){destroyEach(a)}}}function create_each_block_1$2(e,t){for(var n,r,a=t.optgroup,o=(t.each_value_1,t.optgroup_index,a.options),i=[],s=0;s<o.length;s+=1)i[s]=create_each_block_2(e,assign(assign({},t),{each_value_2:o,opt:o[s],opt_index_1:s}));return{c:function(){n=createElement("optgroup");for(var e=0;e<i.length;e+=1)i[e].c();this.h()},h:function(){setAttribute(n,"label",r=a.label)},m:function(e,t){insertNode(n,e,t);for(var r=0;r<i.length;r+=1)i[r].m(n,null)},p:function(t,o){a=o.optgroup,o.each_value_1,o.optgroup_index;var s=a.options;if(t.optgroups){for(var c=0;c<s.length;c+=1){var l=assign(assign({},o),{each_value_2:s,opt:s[c],opt_index_1:c});i[c]?i[c].p(t,l):(i[c]=create_each_block_2(e,l),i[c].c(),i[c].m(n,null))}for(;c<i.length;c+=1)i[c].u(),i[c].d();i.length=s.length}t.optgroups&&r!==(r=a.label)&&setAttribute(n,"label",r)},u:function(){detachNode(n);for(var e=0;e<i.length;e+=1)i[e].u()},d:function(){destroyEach(i)}}}function create_each_block_2(e,t){t.optgroup,t.each_value_1,t.optgroup_index;var n,r,a,o=t.opt,i=(t.each_value_2,t.opt_index_1,o.label);return{c:function(){n=createElement("option"),r=createText(i),this.h()},h:function(){n.__value=a=o.value,n.value=n.__value},m:function(e,t){insertNode(n,e,t),appendNode(r,n)},p:function(e,t){t.optgroup,t.each_value_1,t.optgroup_index,o=t.opt,t.each_value_2,t.opt_index_1,e.optgroups&&i!==(i=o.label)&&(r.data=i),e.optgroups&&a!==(a=o.value)&&(n.__value=a),n.value=n.__value},u:function(){detachNode(n)},d:noop}}function create_if_block_1$4(e,t){for(var n,r=t.optgroups,a=[],o=0;o<r.length;o+=1)a[o]=create_each_block_1$2(e,assign(assign({},t),{each_value_1:r,optgroup:r[o],optgroup_index:o}));return{c:function(){for(var e=0;e<a.length;e+=1)a[e].c();n=createComment()},m:function(e,t){for(var r=0;r<a.length;r+=1)a[r].m(e,t);insertNode(n,e,t)},p:function(t,r){var o=r.optgroups;if(t.optgroups){for(var i=0;i<o.length;i+=1){var s=assign(assign({},r),{each_value_1:o,optgroup:o[i],optgroup_index:i});a[i]?a[i].p(t,s):(a[i]=create_each_block_1$2(e,s),a[i].c(),a[i].m(n.parentNode,n))}for(;i<a.length;i+=1)a[i].u(),a[i].d();a.length=o.length}},u:function(){for(var e=0;e<a.length;e+=1)a[e].u();detachNode(n)},d:function(){destroyEach(a)}}}function Select(e){init(this,e),this._state=assign(data$11(),e.data),e.root||(this._oncreate=[],this._beforecreate=[]),this._fragment=create_main_fragment$12(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),callAll(this._beforecreate))}assign(ComputedColumnEditor.prototype,proto),assign(ComputedColumnEditor.prototype,methods$6),ComputedColumnEditor.prototype._recompute=function(e,t){e.column&&this._differs(t.title,t.title=title(t))&&(e.title=!0),e.columns&&this._differs(t.metaColumns,t.metaColumns=metaColumns(t))&&(e.metaColumns=!0),e.metaColumns&&this._differs(t.keywords,t.keywords=keywords(t))&&(e.keywords=!0)},assign(Checkbox.prototype,proto),assign(Select.prototype,proto);var _now=Date.now||function(){return(new Date).getTime()};function _throttle(e,t,n){var r,a,o,i,s=0;n||(n={});var c=function(){s=!1===n.leading?0:_now(),r=null,i=e.apply(a,o),r||(a=o=null)},l=function(){var l=_now();s||!1!==n.leading||(s=l);var u=t-(l-s);return a=this,o=arguments,u<=0||u>t?(r&&(clearTimeout(r),r=null),s=l,i=e.apply(a,o),r||(a=o=null)):r||!1===n.trailing||(r=setTimeout(c,u)),i};return l.cancel=function(){clearTimeout(r),s=0,r=a=o=null},l}function title$1(e){var t=e.column;return __("describe / edit-column").replace("%s",'"'+(t?t.title()||t.name():"--")+'"')}function data$12(){return{columnFormat:{type:"auto",ignore:!1,"number-divisor":"-","number-format":"auto","number-prepend":"","number-append":""},colTypes:[],divisors_opts:[{value:0,label:__("describe / column-format / no-change")},{value:"auto",label:__("describe / column-format / automatic")}],divisors:[{label:__("describe / column-format / divide-by"),options:[{value:3,label:"1000"},{value:6,label:"1 million"},{value:9,label:"1 billion"}]},{label:__("describe / column-format / multiply-by"),options:[{value:-2,label:"100"},{value:-3,label:"1000"},{value:-6,label:"1 million"},{value:-9,label:"1 billion"},{value:-12,label:"1 trillion"}]}],numberFormats:[{label:__("Decimal places"),options:[{value:"n3",label:"3 (1,234.568)"},{value:"n2",label:"2 (1,234.57)"},{value:"n1",label:"1 (1,234.6)"},{value:"n0",label:"0 (1,235)"}]},{label:__("Significant digits"),options:[{value:"s6",label:"6 (1,234.57)"},{value:"s5",label:"5 (123.45)"},{value:"s4",label:"4 (12.34)"},{value:"s3",label:"3 (1.23)"},{value:"s2",label:"2 (0.12)"},{value:"s1",label:"1 (0.01)"}]}]}}var methods$7={autoDivisor:function(){var e=this.store.get("dw_chart"),t=this.get().column,n=dw.utils.metricSuffix(e.locale()),r=t.values(),a=dw.utils.significantDimension(r),o=a<-2?3*Math.round(-1*a/3):a>4?-1*a:0,i=r.map(function(e){return e/Math.pow(10,o)}),s=dw.utils.significantDimension(i);s<=0&&(s=i.reduce(function(e,t){return Math.max(e,Math.min(3,dw.utils.tailLength(t)))},0)),s===o&&(o=0,s=0),o>15&&(o=0,s=0),this.set({columnFormat:{"number-divisor":o,"number-format":"n"+Math.max(0,s),"number-prepend":"","number-append":o?n[o]||" × 10<sup>"+o+"</sup>":""}})},getColumnFormat:function(e){var t=clone(arrayToObject(this.store.get("dw_chart").get("metadata.data.column-format",{}))[e.name()]);return t&&"auto"!==t&&void 0===t.length||(t={type:"auto",ignore:!1,"number-prepend":"","number-append":"","number-format":"auto"}),t}};function oncreate$4(){var e=this,t=_throttle(function(){e.fire("updateTable")},100,{leading:!1}),n=_throttle(function(){e.fire("updateTable")},100,{leading:!1}),r=this.get().column;this.set({colTypes:[{value:"auto",label:"auto ("+r.type()+")"},{value:"text",label:"Text"},{value:"number",label:"Number"},{value:"date",label:"Date"}]}),this.set({columnFormat:this.getColumnFormat(r)}),this.observe("column",function(t){e.set({columnFormat:e.getColumnFormat(t)}),e.get().colTypes[0].label="auto ("+r.type()+")"}),this.observe("columnFormat",function(r){var a=e.store.get("dw_chart"),o=e.get().column,i=arrayToObject(clone(a.get("metadata.data.column-format",{}))),s=i[o.name()];if(!s||JSON.stringify(s)!==JSON.stringify(r)){if("auto"===r["number-divisor"])return void setTimeout(function(){return e.autoDivisor()},100);i[o.name()]=clone(r),a.set("metadata.data.column-format",i),a.saveSoon&&a.saveSoon(),s&&s.type===r.type?n():t()}})}function create_main_fragment$13(e,t){var n,r,a,o,i,s,c,l,u,d={},h={},f={label:__("Column type"),options:t.colTypes,width:"180px"};"type"in t.columnFormat&&(f.value=t.columnFormat.type,d.value=!0);var p=new Select({root:e.root,data:f,_bind:function(t,n){var r=e.get(),a={};!d.value&&t.value&&(r.columnFormat.type=n.value,a.columnFormat=r.columnFormat),e._set(a),d={}}});e.root._beforecreate.push(function(){p._bind({value:1},p.get())});var m={label:__("Hide column from visualization")};"ignore"in t.columnFormat&&(m.value=t.columnFormat.ignore,h.value=!0);var _=new Checkbox({root:e.root,data:m,_bind:function(t,n){var r=e.get(),a={};!h.value&&t.value&&(r.columnFormat.ignore=n.value,a.columnFormat=r.columnFormat),e._set(a),h={}}});e.root._beforecreate.push(function(){_._bind({value:1},_.get())});var v=t.column&&"number"==t.column.type()&&create_if_block$7(e,t);return{c:function(){n=createElement("div"),r=createElement("h3"),a=createText(t.title),o=createText("\n\n    "),i=createElement("div"),p._fragment.c(),s=createText("\n\n        "),_._fragment.c(),c=createText("\n\n        "),l=createElement("hr"),u=createText("\n\n        "),v&&v.c(),this.h()},h:function(){r.className="first",i.className="form-horizontal"},m:function(e,t){insertNode(n,e,t),appendNode(r,n),appendNode(a,r),appendNode(o,n),appendNode(i,n),p._mount(i,null),appendNode(s,i),_._mount(i,null),appendNode(c,i),appendNode(l,i),appendNode(u,i),v&&v.m(i,null)},p:function(t,n){t.title&&(a.data=n.title);var r={};r.label=__("Column type"),t.colTypes&&(r.options=n.colTypes),!d.value&&t.columnFormat&&(r.value=n.columnFormat.type,d.value=!0),p._set(r),d={};var o={};o.label=__("Hide column from visualization"),!h.value&&t.columnFormat&&(o.value=n.columnFormat.ignore,h.value=!0),_._set(o),h={},n.column&&"number"==n.column.type()?v?v.p(t,n):((v=create_if_block$7(e,n)).c(),v.m(i,null)):v&&(v.u(),v.d(),v=null)},u:function(){detachNode(n),v&&v.u()},d:function(){p.destroy(!1),_.destroy(!1),v&&v.d()}}}function create_if_block$7(e,t){var n,r,a,o,i,s,c,l,u,d,h={},f={},p=__("Prepend/Append"),m=!1,_=!1,v={label:__("Round numbers to"),options:[{value:"-",label:__("describe / column-format / individual")},{value:"auto",label:__("describe / column-format / auto-detect")}],optgroups:t.numberFormats,width:"180px"};"number-format"in t.columnFormat&&(v.value=t.columnFormat["number-format"],h.value=!0);var g=new Select({root:e.root,data:v,_bind:function(t,n){var r=e.get(),a={};!h.value&&t.value&&(r.columnFormat["number-format"]=n.value,a.columnFormat=r.columnFormat),e._set(a),h={}}});e.root._beforecreate.push(function(){g._bind({value:1},g.get())});var b={label:__("Divide numbers by"),options:t.divisors_opts,optgroups:t.divisors,width:"180px"};"number-divisor"in t.columnFormat&&(b.value=t.columnFormat["number-divisor"],f.value=!0);var y=new Select({root:e.root,data:b,_bind:function(t,n){var r=e.get(),a={};!f.value&&t.value&&(r.columnFormat["number-divisor"]=n.value,a.columnFormat=r.columnFormat),e._set(a),f={}}});function N(){var t=e.get();m=!0,t.columnFormat["number-prepend"]=l.value,e.set({columnFormat:t.columnFormat}),m=!1}function x(){var t=e.get();_=!0,t.columnFormat["number-append"]=d.value,e.set({columnFormat:t.columnFormat}),_=!1}return e.root._beforecreate.push(function(){y._bind({value:1},y.get())}),{c:function(){g._fragment.c(),n=createText("\n        "),y._fragment.c(),r=createText("\n\n        "),a=createElement("div"),o=createElement("label"),i=createText(p),s=createText("\n            "),c=createElement("div"),l=createElement("input"),u=createText("\n                #\n                "),d=createElement("input"),this.h()},h:function(){o.className="control-label",addListener(l,"input",N),l.autocomplete="screw-you-google-chrome",setStyle(l,"width","6ex"),setStyle(l,"text-align","right"),l.dataset.lpignore="true",l.name="prepend",setAttribute(l,"type","text"),addListener(d,"input",x),d.autocomplete="screw-you-google-chrome",setStyle(d,"width","6ex"),d.dataset.lpignore="true",d.name="append",setAttribute(d,"type","text"),c.className="controls form-inline",a.className="control-group vis-option-type-select"},m:function(e,h){g._mount(e,h),insertNode(n,e,h),y._mount(e,h),insertNode(r,e,h),insertNode(a,e,h),appendNode(o,a),appendNode(i,o),appendNode(s,a),appendNode(c,a),appendNode(l,c),l.value=t.columnFormat["number-prepend"],appendNode(u,c),appendNode(d,c),d.value=t.columnFormat["number-append"]},p:function(e,t){var n={};n.label=__("Round numbers to"),n.options=[{value:"-",label:__("describe / column-format / individual")},{value:"auto",label:__("describe / column-format / auto-detect")}],e.numberFormats&&(n.optgroups=t.numberFormats),!h.value&&e.columnFormat&&(n.value=t.columnFormat["number-format"],h.value=!0),g._set(n),h={};var r={};r.label=__("Divide numbers by"),e.divisors_opts&&(r.options=t.divisors_opts),e.divisors&&(r.optgroups=t.divisors),!f.value&&e.columnFormat&&(r.value=t.columnFormat["number-divisor"],f.value=!0),y._set(r),f={},m||(l.value=t.columnFormat["number-prepend"]),_||(d.value=t.columnFormat["number-append"])},u:function(){g._unmount(),detachNode(n),y._unmount(),detachNode(r),detachNode(a)},d:function(){g.destroy(!1),y.destroy(!1),removeListener(l,"input",N),removeListener(d,"input",x)}}}function CustomColumnFormat(e){init(this,e),this._state=assign(data$12(),e.data),this._recompute({column:1},this._state);var t=this;e.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=create_main_fragment$13(this,this._state),this.root._oncreate.push(function(){oncreate$4.call(t),t.fire("update",{changed:{column:1,title:1,colTypes:1,columnFormat:1,numberFormats:1,divisors_opts:1,divisors:1},current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),this._lock=!0,callAll(this._beforecreate),callAll(this._oncreate),callAll(this._aftercreate),this._lock=!1)}function _range(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var r=Math.max(Math.ceil((t-e)/n),0),a=Array(r),o=0;o<r;o++,e+=n)a[o]=e;return a}assign(CustomColumnFormat.prototype,proto),assign(CustomColumnFormat.prototype,methods$7),CustomColumnFormat.prototype._recompute=function(e,t){e.column&&this._differs(t.title,t.title=title$1(t))&&(e.title=!0)};var _countBy=group(function(e,t,n){_has(e,n)?e[n]++:e[n]=1});function ascending(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function bisector(e){return 1===e.length&&(e=ascendingComparator(e)),{left:function(t,n,r,a){for(null==r&&(r=0),null==a&&(a=t.length);r<a;){var o=r+a>>>1;e(t[o],n)<0?r=o+1:a=o}return r},right:function(t,n,r,a){for(null==r&&(r=0),null==a&&(a=t.length);r<a;){var o=r+a>>>1;e(t[o],n)>0?a=o:r=o+1}return r}}}function ascendingComparator(e){return function(t,n){return ascending(e(t),n)}}var ascendingBisect=bisector(ascending),bisectRight=ascendingBisect.right;function number(e){return null===e?NaN:+e}function extent(e,t){var n,r,a,o=e.length,i=-1;if(null==t){for(;++i<o;)if(null!=(n=e[i])&&n>=n)for(r=a=n;++i<o;)null!=(n=e[i])&&(r>n&&(r=n),a<n&&(a=n))}else for(;++i<o;)if(null!=(n=t(e[i],i,e))&&n>=n)for(r=a=n;++i<o;)null!=(n=t(e[i],i,e))&&(r>n&&(r=n),a<n&&(a=n));return[r,a]}var array=Array.prototype,slice$1=array.slice;function constant(e){return function(){return e}}function identity(e){return e}function range(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(a);++r<a;)o[r]=e+r*n;return o}var e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function ticks(e,t,n){var r,a,o,i,s=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(a=e,e=t,t=a),0===(i=tickIncrement(e,t,n))||!isFinite(i))return[];if(i>0)for(e=Math.ceil(e/i),t=Math.floor(t/i),o=new Array(a=Math.ceil(t-e+1));++s<a;)o[s]=(e+s)*i;else for(e=Math.floor(e*i),t=Math.ceil(t*i),o=new Array(a=Math.ceil(e-t+1));++s<a;)o[s]=(e-s)/i;return r&&o.reverse(),o}function tickIncrement(e,t,n){var r=(t-e)/Math.max(0,n),a=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,a);return a>=0?(o>=e10?10:o>=e5?5:o>=e2?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(o>=e10?10:o>=e5?5:o>=e2?2:1)}function tickStep(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),a=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/a;return o>=e10?a*=10:o>=e5?a*=5:o>=e2&&(a*=2),t<e?-a:a}function sturges(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1}function histogram(){var e=identity,t=extent,n=sturges;function r(r){var a,o,i=r.length,s=new Array(i);for(a=0;a<i;++a)s[a]=e(r[a],a,r);var c=t(s),l=c[0],u=c[1],d=n(s,l,u);Array.isArray(d)||(d=tickStep(l,u,d),d=range(Math.ceil(l/d)*d,Math.floor(u/d)*d,d));for(var h=d.length;d[0]<=l;)d.shift(),--h;for(;d[h-1]>u;)d.pop(),--h;var f,p=new Array(h+1);for(a=0;a<=h;++a)(f=p[a]=[]).x0=a>0?d[a-1]:l,f.x1=a<h?d[a]:u;for(a=0;a<i;++a)l<=(o=s[a])&&o<=u&&p[bisectRight(d,o,0,h)].push(r[a]);return p}return r.value=function(t){return arguments.length?(e="function"==typeof t?t:constant(t),r):e},r.domain=function(e){return arguments.length?(t="function"==typeof e?e:constant([e[0],e[1]]),r):t},r.thresholds=function(e){return arguments.length?(n="function"==typeof e?e:Array.isArray(e)?constant(slice$1.call(e)):constant(e),r):n},r}function threshold(e,t,n){if(null==n&&(n=number),r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,a=(r-1)*t,o=Math.floor(a),i=+n(e[o],o,e);return i+(+n(e[o+1],o+1,e)-i)*(a-o)}}function max(e,t){var n,r,a=e.length,o=-1;if(null==t){for(;++o<a;)if(null!=(n=e[o])&&n>=n)for(r=n;++o<a;)null!=(n=e[o])&&n>r&&(r=n)}else for(;++o<a;)if(null!=(n=t(e[o],o,e))&&n>=n)for(r=n;++o<a;)null!=(n=t(e[o],o,e))&&n>r&&(r=n);return r}function mean(e,t){var n,r=e.length,a=r,o=-1,i=0;if(null==t)for(;++o<r;)isNaN(n=number(e[o]))?--a:i+=n;else for(;++o<r;)isNaN(n=number(t(e[o],o,e)))?--a:i+=n;if(a)return i/a}function median(e,t){var n,r=e.length,a=-1,o=[];if(null==t)for(;++a<r;)isNaN(n=number(e[a]))||o.push(n);else for(;++a<r;)isNaN(n=number(t(e[a],a,e)))||o.push(n);return threshold(o.sort(ascending),.5)}function min(e,t){var n,r,a=e.length,o=-1;if(null==t){for(;++o<a;)if(null!=(n=e[o])&&n>=n)for(r=n;++o<a;)null!=(n=e[o])&&r>n&&(r=n)}else for(;++o<a;)if(null!=(n=t(e[o],o,e))&&n>=n)for(r=n;++o<a;)null!=(n=t(e[o],o,e))&&r>n&&(r=n);return r}var prefix="$";function Map(){}function map$1(e,t){var n=new Map;if(e instanceof Map)e.each(function(e,t){n.set(t,e)});else if(Array.isArray(e)){var r,a=-1,o=e.length;if(null==t)for(;++a<o;)n.set(a,e[a]);else for(;++a<o;)n.set(t(r=e[a],a,e),r)}else if(e)for(var i in e)n.set(i,e[i]);return n}function Set(){}Map.prototype=map$1.prototype={constructor:Map,has:function(e){return prefix+e in this},get:function(e){return this[prefix+e]},set:function(e,t){return this[prefix+e]=t,this},remove:function(e){var t=prefix+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===prefix&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===prefix&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===prefix&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===prefix&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===prefix&&++e;return e},empty:function(){for(var e in this)if(e[0]===prefix)return!1;return!0},each:function(e){for(var t in this)t[0]===prefix&&e(this[t],t.slice(1),this)}};var proto$1=map$1.prototype;function set$1(e,t){var n=new Set;if(e instanceof Set)e.each(function(e){n.add(e)});else if(e){var r=-1,a=e.length;if(null==t)for(;++r<a;)n.add(e[r]);else for(;++r<a;)n.add(t(e[r],r,e))}return n}Set.prototype=set$1.prototype={constructor:Set,has:proto$1.has,add:function(e){return this[prefix+(e+="")]=e,this},remove:proto$1.remove,clear:proto$1.clear,values:proto$1.keys,size:proto$1.size,empty:proto$1.empty,each:proto$1.each};var array$1=Array.prototype,map$3=array$1.map,slice$2=array$1.slice,implicit={name:"implicit"};function ordinal(e){var t=map$1(),n=[],r=implicit;function a(a){var o=a+"",i=t.get(o);if(!i){if(r!==implicit)return r;t.set(o,i=n.push(a))}return e[(i-1)%e.length]}return e=null==e?[]:slice$2.call(e),a.domain=function(e){if(!arguments.length)return n.slice();n=[],t=map$1();for(var r,o,i=-1,s=e.length;++i<s;)t.has(o=(r=e[i])+"")||t.set(o,n.push(r));return a},a.range=function(t){return arguments.length?(e=slice$2.call(t),a):e.slice()},a.unknown=function(e){return arguments.length?(r=e,a):r},a.copy=function(){return ordinal().domain(n).range(e).unknown(r)},a}function band(){var e,t,n=ordinal().unknown(void 0),r=n.domain,a=n.range,o=[0,1],i=!1,s=0,c=0,l=.5;function u(){var n=r().length,u=o[1]<o[0],d=o[u-0],h=o[1-u];e=(h-d)/Math.max(1,n-s+2*c),i&&(e=Math.floor(e)),d+=(h-d-e*(n-s))*l,t=e*(1-s),i&&(d=Math.round(d),t=Math.round(t));var f=range(n).map(function(t){return d+e*t});return a(u?f.reverse():f)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),u()):r()},n.range=function(e){return arguments.length?(o=[+e[0],+e[1]],u()):o.slice()},n.rangeRound=function(e){return o=[+e[0],+e[1]],i=!0,u()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(i=!!e,u()):i},n.padding=function(e){return arguments.length?(s=c=Math.max(0,Math.min(1,e)),u()):s},n.paddingInner=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),u()):s},n.paddingOuter=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),u()):c},n.align=function(e){return arguments.length?(l=Math.max(0,Math.min(1,e)),u()):l},n.copy=function(){return band().domain(r()).range(o).round(i).paddingInner(s).paddingOuter(c).align(l)},u()}function define(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function extend(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex3=/^#([0-9a-f]{3})$/,reHex6=/^#([0-9a-f]{6})$/,reRgbInteger=new RegExp("^rgb\\("+[reI,reI,reI]+"\\)$"),reRgbPercent=new RegExp("^rgb\\("+[reP,reP,reP]+"\\)$"),reRgbaInteger=new RegExp("^rgba\\("+[reI,reI,reI,reN]+"\\)$"),reRgbaPercent=new RegExp("^rgba\\("+[reP,reP,reP,reN]+"\\)$"),reHslPercent=new RegExp("^hsl\\("+[reN,reP,reP]+"\\)$"),reHslaPercent=new RegExp("^hsla\\("+[reN,reP,reP,reN]+"\\)$"),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function color(e){var t;return e=(e+"").trim().toLowerCase(),(t=reHex3.exec(e))?new Rgb((t=parseInt(t[1],16))>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):(t=reHex6.exec(e))?rgbn(parseInt(t[1],16)):(t=reRgbInteger.exec(e))?new Rgb(t[1],t[2],t[3],1):(t=reRgbPercent.exec(e))?new Rgb(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=reRgbaInteger.exec(e))?rgba(t[1],t[2],t[3],t[4]):(t=reRgbaPercent.exec(e))?rgba(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=reHslPercent.exec(e))?hsla(t[1],t[2]/100,t[3]/100,1):(t=reHslaPercent.exec(e))?hsla(t[1],t[2]/100,t[3]/100,t[4]):named.hasOwnProperty(e)?rgbn(named[e]):"transparent"===e?new Rgb(NaN,NaN,NaN,0):null}function rgbn(e){return new Rgb(e>>16&255,e>>8&255,255&e,1)}function rgba(e,t,n,r){return r<=0&&(e=t=n=NaN),new Rgb(e,t,n,r)}function rgbConvert(e){return e instanceof Color||(e=color(e)),e?new Rgb((e=e.rgb()).r,e.g,e.b,e.opacity):new Rgb}function rgb(e,t,n,r){return 1===arguments.length?rgbConvert(e):new Rgb(e,t,n,null==r?1:r)}function Rgb(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function hsla(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Hsl(e,t,n,r)}function hslConvert(e){if(e instanceof Hsl)return new Hsl(e.h,e.s,e.l,e.opacity);if(e instanceof Color||(e=color(e)),!e)return new Hsl;if(e instanceof Hsl)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),o=Math.max(t,n,r),i=NaN,s=o-a,c=(o+a)/2;return s?(i=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=c<.5?o+a:2-o-a,i*=60):s=c>0&&c<1?0:i,new Hsl(i,s,c,e.opacity)}function hsl(e,t,n,r){return 1===arguments.length?hslConvert(e):new Hsl(e,t,n,null==r?1:r)}function Hsl(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function hsl2rgb(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}define(Color,color,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),define(Rgb,rgb,extend(Color,{brighter:function(e){return e=null==e?brighter:Math.pow(brighter,e),new Rgb(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?darker:Math.pow(darker,e),new Rgb(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}})),define(Hsl,hsl,extend(Color,{brighter:function(e){return e=null==e?brighter:Math.pow(brighter,e),new Hsl(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?darker:Math.pow(darker,e),new Hsl(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new Rgb(hsl2rgb(e>=240?e-240:e+120,a,r),hsl2rgb(e,a,r),hsl2rgb(e<120?e+240:e-120,a,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var deg2rad=Math.PI/180,rad2deg=180/Math.PI,K=18,Xn=.96422,Yn=1,Zn=.82521,t0=4/29,t1=6/29,t2=3*t1*t1,t3=t1*t1*t1;function labConvert(e){if(e instanceof Lab)return new Lab(e.l,e.a,e.b,e.opacity);if(e instanceof Hcl){if(isNaN(e.h))return new Lab(e.l,0,0,e.opacity);var t=e.h*deg2rad;return new Lab(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}e instanceof Rgb||(e=rgbConvert(e));var n,r,a=rgb2lrgb(e.r),o=rgb2lrgb(e.g),i=rgb2lrgb(e.b),s=xyz2lab((.2225045*a+.7168786*o+.0606169*i)/Yn);return a===o&&o===i?n=r=s:(n=xyz2lab((.4360747*a+.3850649*o+.1430804*i)/Xn),r=xyz2lab((.0139322*a+.0971045*o+.7141733*i)/Zn)),new Lab(116*s-16,500*(n-s),200*(s-r),e.opacity)}function lab(e,t,n,r){return 1===arguments.length?labConvert(e):new Lab(e,t,n,null==r?1:r)}function Lab(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function xyz2lab(e){return e>t3?Math.pow(e,1/3):e/t2+t0}function lab2xyz(e){return e>t1?e*e*e:t2*(e-t0)}function lrgb2rgb(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function rgb2lrgb(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function hclConvert(e){if(e instanceof Hcl)return new Hcl(e.h,e.c,e.l,e.opacity);if(e instanceof Lab||(e=labConvert(e)),0===e.a&&0===e.b)return new Hcl(NaN,0,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*rad2deg;return new Hcl(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function hcl(e,t,n,r){return 1===arguments.length?hclConvert(e):new Hcl(e,t,n,null==r?1:r)}function Hcl(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}define(Lab,lab,extend(Color,{brighter:function(e){return new Lab(this.l+K*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new Lab(this.l-K*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new Rgb(lrgb2rgb(3.1338561*(t=Xn*lab2xyz(t))-1.6168667*(e=Yn*lab2xyz(e))-.4906146*(n=Zn*lab2xyz(n))),lrgb2rgb(-.9787684*t+1.9161415*e+.033454*n),lrgb2rgb(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),define(Hcl,hcl,extend(Color,{brighter:function(e){return new Hcl(this.h,this.c,this.l+K*(null==e?1:e),this.opacity)},darker:function(e){return new Hcl(this.h,this.c,this.l-K*(null==e?1:e),this.opacity)},rgb:function(){return labConvert(this).rgb()}}));var A=-.14861,B=1.78277,C=-.29227,D=-.90649,E=1.97294,ED=E*D,EB=E*B,BC_DA=B*C-D*A;function cubehelixConvert(e){if(e instanceof Cubehelix)return new Cubehelix(e.h,e.s,e.l,e.opacity);e instanceof Rgb||(e=rgbConvert(e));var t=e.r/255,n=e.g/255,r=e.b/255,a=(BC_DA*r+ED*t-EB*n)/(BC_DA+ED-EB),o=r-a,i=(E*(n-a)-C*o)/D,s=Math.sqrt(i*i+o*o)/(E*a*(1-a)),c=s?Math.atan2(i,o)*rad2deg-120:NaN;return new Cubehelix(c<0?c+360:c,s,a,e.opacity)}function cubehelix(e,t,n,r){return 1===arguments.length?cubehelixConvert(e):new Cubehelix(e,t,n,null==r?1:r)}function Cubehelix(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function constant$1(e){return function(){return e}}function linear$1(e,t){return function(n){return e+n*t}}function exponential(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function gamma(e){return 1==(e=+e)?nogamma:function(t,n){return n-t?exponential(t,n,e):constant$1(isNaN(t)?n:t)}}function nogamma(e,t){var n=t-e;return n?linear$1(e,n):constant$1(isNaN(e)?t:e)}define(Cubehelix,cubehelix,extend(Color,{brighter:function(e){return e=null==e?brighter:Math.pow(brighter,e),new Cubehelix(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?darker:Math.pow(darker,e),new Cubehelix(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*deg2rad,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),a=Math.sin(e);return new Rgb(255*(t+n*(A*r+B*a)),255*(t+n*(C*r+D*a)),255*(t+n*(E*r)),this.opacity)}}));var rgb$1=function e(t){var n=gamma(t);function r(e,t){var r=n((e=rgb(e)).r,(t=rgb(t)).r),a=n(e.g,t.g),o=n(e.b,t.b),i=nogamma(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=a(t),e.b=o(t),e.opacity=i(t),e+""}}return r.gamma=e,r}(1);function array$2(e,t){var n,r=t?t.length:0,a=e?Math.min(r,e.length):0,o=new Array(a),i=new Array(r);for(n=0;n<a;++n)o[n]=interpolateValue(e[n],t[n]);for(;n<r;++n)i[n]=t[n];return function(e){for(n=0;n<a;++n)i[n]=o[n](e);return i}}function date(e,t){var n=new Date;return t-=e=+e,function(r){return n.setTime(e+t*r),n}}function reinterpolate(e,t){return t-=e=+e,function(n){return e+t*n}}function object(e,t){var n,r={},a={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=interpolateValue(e[n],t[n]):a[n]=t[n];return function(e){for(n in r)a[n]=r[n](e);return a}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(e){return function(){return e}}function one(e){return function(t){return e(t)+""}}function string(e,t){var n,r,a,o=reA.lastIndex=reB.lastIndex=0,i=-1,s=[],c=[];for(e+="",t+="";(n=reA.exec(e))&&(r=reB.exec(t));)(a=r.index)>o&&(a=t.slice(o,a),s[i]?s[i]+=a:s[++i]=a),(n=n[0])===(r=r[0])?s[i]?s[i]+=r:s[++i]=r:(s[++i]=null,c.push({i:i,x:reinterpolate(n,r)})),o=reB.lastIndex;return o<t.length&&(a=t.slice(o),s[i]?s[i]+=a:s[++i]=a),s.length<2?c[0]?one(c[0].x):zero(t):(t=c.length,function(e){for(var n,r=0;r<t;++r)s[(n=c[r]).i]=n.x(e);return s.join("")})}function interpolateValue(e,t){var n,r=typeof t;return null==t||"boolean"===r?constant$1(t):("number"===r?reinterpolate:"string"===r?(n=color(t))?(t=n,rgb$1):string:t instanceof color?rgb$1:t instanceof Date?date:Array.isArray(t)?array$2:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?object:reinterpolate)(e,t)}function interpolateRound(e,t){return t-=e=+e,function(n){return Math.round(e+t*n)}}var degrees=180/Math.PI,rho=Math.SQRT2;function constant$2(e){return function(){return e}}function number$1(e){return+e}var unit=[0,1],prefixExponent;function deinterpolateLinear(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:constant$2(t)}function deinterpolateClamp(e){return function(t,n){var r=e(t=+t,n=+n);return function(e){return e<=t?0:e>=n?1:r(e)}}}function reinterpolateClamp(e){return function(t,n){var r=e(t=+t,n=+n);return function(e){return e<=0?t:e>=1?n:r(e)}}}function bimap(e,t,n,r){var a=e[0],o=e[1],i=t[0],s=t[1];return o<a?(a=n(o,a),i=r(s,i)):(a=n(a,o),i=r(i,s)),function(e){return i(a(e))}}function polymap(e,t,n,r){var a=Math.min(e.length,t.length)-1,o=new Array(a),i=new Array(a),s=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<a;)o[s]=n(e[s],e[s+1]),i[s]=r(t[s],t[s+1]);return function(t){var n=bisectRight(e,t,1,a)-1;return i[n](o[n](t))}}function copy(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp())}function continuous(e,t){var n,r,a,o=unit,i=unit,s=interpolateValue,c=!1;function l(){return n=Math.min(o.length,i.length)>2?polymap:bimap,r=a=null,u}function u(t){return(r||(r=n(o,i,c?deinterpolateClamp(e):e,s)))(+t)}return u.invert=function(e){return(a||(a=n(i,o,deinterpolateLinear,c?reinterpolateClamp(t):t)))(+e)},u.domain=function(e){return arguments.length?(o=map$3.call(e,number$1),l()):o.slice()},u.range=function(e){return arguments.length?(i=slice$2.call(e),l()):i.slice()},u.rangeRound=function(e){return i=slice$2.call(e),s=interpolateRound,l()},u.clamp=function(e){return arguments.length?(c=!!e,l()):c},u.interpolate=function(e){return arguments.length?(s=e,l()):s},l()}function formatDecimal(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function exponent(e){return(e=formatDecimal(Math.abs(e)))?e[1]:NaN}function formatGroup(e,t){return function(n,r){for(var a=n.length,o=[],i=0,s=e[0],c=0;a>0&&s>0&&(c+s+1>r&&(s=Math.max(1,r-c)),o.push(n.substring(a-=s,a+s)),!((c+=s+1)>r));)s=e[i=(i+1)%e.length];return o.reverse().join(t)}}function formatNumerals(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}function formatDefault(e,t){e=e.toPrecision(t);e:for(var n,r=e.length,a=1,o=-1;a<r;++a)switch(e[a]){case".":o=n=a;break;case"0":0===o&&(o=a),n=a;break;case"e":break e;default:o>0&&(o=0)}return o>0?e.slice(0,o)+e.slice(n+1):e}function formatPrefixAuto(e,t){var n=formatDecimal(e,t);if(!n)return e+"";var r=n[0],a=n[1],o=a-(prefixExponent=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,i=r.length;return o===i?r:o>i?r+new Array(o-i+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+formatDecimal(e,Math.max(0,t+o-1))[0]}function formatRounded(e,t){var n=formatDecimal(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}var formatTypes={"":formatDefault,"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return formatRounded(100*e,t)},r:formatRounded,s:formatPrefixAuto,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},re=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function formatSpecifier(e){return new FormatSpecifier(e)}function FormatSpecifier(e){if(!(t=re.exec(e)))throw new Error("invalid format: "+e);var t,n=t[1]||" ",r=t[2]||">",a=t[3]||"-",o=t[4]||"",i=!!t[5],s=t[6]&&+t[6],c=!!t[7],l=t[8]&&+t[8].slice(1),u=t[9]||"";"n"===u?(c=!0,u="g"):formatTypes[u]||(u=""),(i||"0"===n&&"="===r)&&(i=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=a,this.symbol=o,this.zero=i,this.width=s,this.comma=c,this.precision=l,this.type=u}function identity$2(e){return e}formatSpecifier.prototype=FormatSpecifier.prototype,FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var prefixes=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],locale,format,formatPrefix;function formatLocale(e){var t=e.grouping&&e.thousands?formatGroup(e.grouping,e.thousands):identity$2,n=e.currency,r=e.decimal,a=e.numerals?formatNumerals(e.numerals):identity$2,o=e.percent||"%";function i(e){var i=(e=formatSpecifier(e)).fill,s=e.align,c=e.sign,l=e.symbol,u=e.zero,d=e.width,h=e.comma,f=e.precision,p=e.type,m="$"===l?n[0]:"#"===l&&/[boxX]/.test(p)?"0"+p.toLowerCase():"",_="$"===l?n[1]:/[%p]/.test(p)?o:"",v=formatTypes[p],g=!p||/[defgprs%]/.test(p);function b(e){var n,o,l,b=m,y=_;if("c"===p)y=v(e)+y,e="";else{var N=(e=+e)<0;if(e=v(Math.abs(e),f),N&&0==+e&&(N=!1),b=(N?"("===c?c:"-":"-"===c||"("===c?"":c)+b,y=("s"===p?prefixes[8+prefixExponent/3]:"")+y+(N&&"("===c?")":""),g)for(n=-1,o=e.length;++n<o;)if(48>(l=e.charCodeAt(n))||l>57){y=(46===l?r+e.slice(n+1):e.slice(n))+y,e=e.slice(0,n);break}}h&&!u&&(e=t(e,1/0));var x=b.length+e.length+y.length,w=x<d?new Array(d-x+1).join(i):"";switch(h&&u&&(e=t(w+e,w.length?d-y.length:1/0),w=""),s){case"<":e=b+e+y+w;break;case"=":e=b+w+e+y;break;case"^":e=w.slice(0,x=w.length>>1)+b+e+y+w.slice(x);break;default:e=w+b+e+y}return a(e)}return f=null==f?p?6:12:/[gprs]/.test(p)?Math.max(1,Math.min(21,f)):Math.max(0,Math.min(20,f)),b.toString=function(){return e+""},b}return{format:i,formatPrefix:function(e,t){var n=i(((e=formatSpecifier(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(exponent(t)/3))),a=Math.pow(10,-r),o=prefixes[8+r/3];return function(e){return n(a*e)+o}}}}function defaultLocale(e){return locale=formatLocale(e),format=locale.format,formatPrefix=locale.formatPrefix,locale}function precisionFixed(e){return Math.max(0,-exponent(Math.abs(e)))}function precisionPrefix(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(exponent(t)/3)))-exponent(Math.abs(e)))}function precisionRound(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,exponent(t)-exponent(e))+1}function tickFormat(e,t,n){var r,a=e[0],o=e[e.length-1],i=tickStep(a,o,null==t?10:t);switch((n=formatSpecifier(null==n?",f":n)).type){case"s":var s=Math.max(Math.abs(a),Math.abs(o));return null!=n.precision||isNaN(r=precisionPrefix(i,s))||(n.precision=r),formatPrefix(n,s);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=precisionRound(i,Math.max(Math.abs(a),Math.abs(o))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=precisionFixed(i))||(n.precision=r-2*("%"===n.type))}return format(n)}function linearish(e){var t=e.domain;return e.ticks=function(e){var n=t();return ticks(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){return tickFormat(t(),e,n)},e.nice=function(n){null==n&&(n=10);var r,a=t(),o=0,i=a.length-1,s=a[o],c=a[i];return c<s&&(r=s,s=c,c=r,r=o,o=i,i=r),(r=tickIncrement(s,c,n))>0?r=tickIncrement(s=Math.floor(s/r)*r,c=Math.ceil(c/r)*r,n):r<0&&(r=tickIncrement(s=Math.ceil(s*r)/r,c=Math.floor(c*r)/r,n)),r>0?(a[o]=Math.floor(s/r)*r,a[i]=Math.ceil(c/r)*r,t(a)):r<0&&(a[o]=Math.ceil(s*r)/r,a[i]=Math.floor(c*r)/r,t(a)),e},e}function linear$2(){var e=continuous(deinterpolateLinear,reinterpolate);return e.copy=function(){return copy(e,linear$2())},linearish(e)}defaultLocale({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var t0$1=new Date,t1$1=new Date;function newInterval(e,t,n,r){function a(t){return e(t=new Date(+t)),t}return a.floor=a,a.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},a.round=function(e){var t=a(e),n=a.ceil(e);return e-t<n-e?t:n},a.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},a.range=function(n,r,o){var i,s=[];if(n=a.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return s;do{s.push(i=new Date(+n)),t(n,o),e(n)}while(i<n&&n<r);return s},a.filter=function(n){return newInterval(function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););})},n&&(a.count=function(t,r){return t0$1.setTime(+t),t1$1.setTime(+r),e(t0$1),e(t1$1),Math.floor(n(t0$1,t1$1))},a.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?a.filter(r?function(t){return r(t)%e==0}:function(t){return a.count(0,t)%e==0}):a:null}),a}var millisecond=newInterval(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});millisecond.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?newInterval(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):millisecond:null};var durationSecond=1e3,durationMinute=6e4,durationHour=36e5,durationDay=864e5,durationWeek=6048e5,second=newInterval(function(e){e.setTime(Math.floor(e/durationSecond)*durationSecond)},function(e,t){e.setTime(+e+t*durationSecond)},function(e,t){return(t-e)/durationSecond},function(e){return e.getUTCSeconds()}),minute=newInterval(function(e){e.setTime(Math.floor(e/durationMinute)*durationMinute)},function(e,t){e.setTime(+e+t*durationMinute)},function(e,t){return(t-e)/durationMinute},function(e){return e.getMinutes()}),hour=newInterval(function(e){var t=e.getTimezoneOffset()*durationMinute%durationHour;t<0&&(t+=durationHour),e.setTime(Math.floor((+e-t)/durationHour)*durationHour+t)},function(e,t){e.setTime(+e+t*durationHour)},function(e,t){return(t-e)/durationHour},function(e){return e.getHours()}),day=newInterval(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*durationMinute)/durationDay},function(e){return e.getDate()-1});function weekday(e){return newInterval(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*durationMinute)/durationWeek})}var sunday=weekday(0),monday=weekday(1),tuesday=weekday(2),wednesday=weekday(3),thursday=weekday(4),friday=weekday(5),saturday=weekday(6),month=newInterval(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()}),year=newInterval(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});year.every=function(e){return isFinite(e=Math.floor(e))&&e>0?newInterval(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)}):null};var utcMinute=newInterval(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*durationMinute)},function(e,t){return(t-e)/durationMinute},function(e){return e.getUTCMinutes()}),utcHour=newInterval(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+t*durationHour)},function(e,t){return(t-e)/durationHour},function(e){return e.getUTCHours()}),utcDay=newInterval(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/durationDay},function(e){return e.getUTCDate()-1});function utcWeekday(e){return newInterval(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/durationWeek})}var utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6),utcMonth=newInterval(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()}),utcYear=newInterval(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});function localDate(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function utcDate(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function newYear(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}function formatLocale$1(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,o=e.days,i=e.shortDays,s=e.months,c=e.shortMonths,l=formatRe(a),u=formatLookup(a),d=formatRe(o),h=formatLookup(o),f=formatRe(i),p=formatLookup(i),m=formatRe(s),_=formatLookup(s),v=formatRe(c),g=formatLookup(c),b={a:function(e){return i[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return c[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:function(e){return a[+(e.getHours()>=12)]},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},y={a:function(e){return i[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return c[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:function(e){return a[+(e.getUTCHours()>=12)]},Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},N={a:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.w=p[r[0].toLowerCase()],n+r[0].length):-1},A:function(e,t,n){var r=d.exec(t.slice(n));return r?(e.w=h[r[0].toLowerCase()],n+r[0].length):-1},b:function(e,t,n){var r=v.exec(t.slice(n));return r?(e.m=g[r[0].toLowerCase()],n+r[0].length):-1},B:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=_[r[0].toLowerCase()],n+r[0].length):-1},c:function(e,n,r){return k(e,t,n,r)},d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:function(e,t,n){var r=l.exec(t.slice(n));return r?(e.p=u[r[0].toLowerCase()],n+r[0].length):-1},Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:function(e,t,r){return k(e,n,t,r)},X:function(e,t,n){return k(e,r,t,n)},y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};function x(e,t){return function(n){var r,a,o,i=[],s=-1,c=0,l=e.length;for(n instanceof Date||(n=new Date(+n));++s<l;)37===e.charCodeAt(s)&&(i.push(e.slice(c,s)),null!=(a=pads[r=e.charAt(++s)])?r=e.charAt(++s):a="e"===r?" ":"0",(o=t[r])&&(r=o(n,a)),i.push(r),c=s+1);return i.push(e.slice(c,s)),i.join("")}}function w(e,t){return function(n){var r,a,o=newYear(1900);if(k(o,e,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("p"in o&&(o.H=o.H%12+12*o.p),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(r=(a=(r=utcDate(newYear(o.y))).getUTCDay())>4||0===a?utcMonday.ceil(r):utcMonday(r),r=utcDay.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(r=(a=(r=t(newYear(o.y))).getDay())>4||0===a?monday.ceil(r):monday(r),r=day.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),a="Z"in o?utcDate(newYear(o.y)).getUTCDay():t(newYear(o.y)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(a+5)%7:o.w+7*o.U-(a+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,utcDate(o)):t(o)}}function k(e,t,n,r){for(var a,o,i=0,s=t.length,c=n.length;i<s;){if(r>=c)return-1;if(37===(a=t.charCodeAt(i++))){if(a=t.charAt(i++),!(o=N[a in pads?t.charAt(i++):a])||(r=o(e,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}return b.x=x(n,b),b.X=x(r,b),b.c=x(t,b),y.x=x(n,y),y.X=x(r,y),y.c=x(t,y),{format:function(e){var t=x(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=w(e+="",localDate);return t.toString=function(){return e},t},utcFormat:function(e){var t=x(e+="",y);return t.toString=function(){return e},t},utcParse:function(e){var t=w(e,utcDate);return t.toString=function(){return e},t}}}utcYear.every=function(e){return isFinite(e=Math.floor(e))&&e>0?newInterval(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null};var pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g,locale$1,timeFormat,timeParse,utcFormat,utcParse;function pad(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",o=a.length;return r+(o<n?new Array(n-o+1).join(t)+a:a)}function requote(e){return e.replace(requoteRe,"\\$&")}function formatRe(e){return new RegExp("^(?:"+e.map(requote).join("|")+")","i")}function formatLookup(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function parseWeekdayNumberSunday(e,t,n){var r=numberRe.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function parseWeekdayNumberMonday(e,t,n){var r=numberRe.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function parseWeekNumberSunday(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function parseWeekNumberISO(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function parseWeekNumberMonday(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function parseFullYear(e,t,n){var r=numberRe.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function parseYear(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function parseZone(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function parseMonthNumber(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function parseDayOfMonth(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function parseDayOfYear(e,t,n){var r=numberRe.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function parseHour24(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function parseMinutes(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function parseSeconds(e,t,n){var r=numberRe.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function parseMilliseconds(e,t,n){var r=numberRe.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function parseMicroseconds(e,t,n){var r=numberRe.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function parseLiteralPercent(e,t,n){var r=percentRe.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function parseUnixTimestamp(e,t,n){var r=numberRe.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function parseUnixTimestampSeconds(e,t,n){var r=numberRe.exec(t.slice(n));return r?(e.Q=1e3*+r[0],n+r[0].length):-1}function formatDayOfMonth(e,t){return pad(e.getDate(),t,2)}function formatHour24(e,t){return pad(e.getHours(),t,2)}function formatHour12(e,t){return pad(e.getHours()%12||12,t,2)}function formatDayOfYear(e,t){return pad(1+day.count(year(e),e),t,3)}function formatMilliseconds(e,t){return pad(e.getMilliseconds(),t,3)}function formatMicroseconds(e,t){return formatMilliseconds(e,t)+"000"}function formatMonthNumber(e,t){return pad(e.getMonth()+1,t,2)}function formatMinutes(e,t){return pad(e.getMinutes(),t,2)}function formatSeconds(e,t){return pad(e.getSeconds(),t,2)}function formatWeekdayNumberMonday(e){var t=e.getDay();return 0===t?7:t}function formatWeekNumberSunday(e,t){return pad(sunday.count(year(e),e),t,2)}function formatWeekNumberISO(e,t){var n=e.getDay();return e=n>=4||0===n?thursday(e):thursday.ceil(e),pad(thursday.count(year(e),e)+(4===year(e).getDay()),t,2)}function formatWeekdayNumberSunday(e){return e.getDay()}function formatWeekNumberMonday(e,t){return pad(monday.count(year(e),e),t,2)}function formatYear(e,t){return pad(e.getFullYear()%100,t,2)}function formatFullYear(e,t){return pad(e.getFullYear()%1e4,t,4)}function formatZone(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+pad(t/60|0,"0",2)+pad(t%60,"0",2)}function formatUTCDayOfMonth(e,t){return pad(e.getUTCDate(),t,2)}function formatUTCHour24(e,t){return pad(e.getUTCHours(),t,2)}function formatUTCHour12(e,t){return pad(e.getUTCHours()%12||12,t,2)}function formatUTCDayOfYear(e,t){return pad(1+utcDay.count(utcYear(e),e),t,3)}function formatUTCMilliseconds(e,t){return pad(e.getUTCMilliseconds(),t,3)}function formatUTCMicroseconds(e,t){return formatUTCMilliseconds(e,t)+"000"}function formatUTCMonthNumber(e,t){return pad(e.getUTCMonth()+1,t,2)}function formatUTCMinutes(e,t){return pad(e.getUTCMinutes(),t,2)}function formatUTCSeconds(e,t){return pad(e.getUTCSeconds(),t,2)}function formatUTCWeekdayNumberMonday(e){var t=e.getUTCDay();return 0===t?7:t}function formatUTCWeekNumberSunday(e,t){return pad(utcSunday.count(utcYear(e),e),t,2)}function formatUTCWeekNumberISO(e,t){var n=e.getUTCDay();return e=n>=4||0===n?utcThursday(e):utcThursday.ceil(e),pad(utcThursday.count(utcYear(e),e)+(4===utcYear(e).getUTCDay()),t,2)}function formatUTCWeekdayNumberSunday(e){return e.getUTCDay()}function formatUTCWeekNumberMonday(e,t){return pad(utcMonday.count(utcYear(e),e),t,2)}function formatUTCYear(e,t){return pad(e.getUTCFullYear()%100,t,2)}function formatUTCFullYear(e,t){return pad(e.getUTCFullYear()%1e4,t,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(e){return+e}function formatUnixTimestampSeconds(e){return Math.floor(+e/1e3)}function defaultLocale$1(e){return locale$1=formatLocale$1(e),timeFormat=locale$1.format,timeParse=locale$1.parse,utcFormat=locale$1.utcFormat,utcParse=locale$1.utcParse,locale$1}defaultLocale$1({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var isoSpecifier="%Y-%m-%dT%H:%M:%S.%LZ";function formatIsoNative(e){return e.toISOString()}var formatIso=Date.prototype.toISOString?formatIsoNative:utcFormat(isoSpecifier);function parseIsoNative(e){var t=new Date(e);return isNaN(t)?null:t}var parseIso=+new Date("2000-01-01T00:00:00.000Z")?parseIsoNative:utcParse(isoSpecifier),xScale_=linear$2(),xScaleBand_=band(),yScale_=linear$2(),pct=function(e){return e?e<.01?"<1%":(100*e).toFixed(0)+"%":"0%"};function NAs(e){return e.values.filter(function(e){return"string"==typeof e||Number.isNaN(e)}).length}function validValues(e){return e.values.filter(function(e){return"number"==typeof e&&!Number.isNaN(e)})}function stats(e){var t=e.validValues,n=e.format,r=min(t),a=max(t),o=mean(t),i=median(t);return[{x:r,label:n(r),name:"Min"},{x:a,label:n(a),name:"Max"},{x:o,label:n(o),name:__("describe / histogram / mean")},{x:i,label:n(i),name:__("describe / histogram / median")}]}function niceDomain(e){var t=e.validValues;return linear$2().domain(extent(t)).nice().domain()}function bins(e){var t=e.niceDomain,n=e.validValues,r=t,a=histogram().domain(r).thresholds(sturges)(n),o=_countBy(a.map(function(e){return e.x1-e.x0}));if(a.length>2&&_keys(o).length>1){var i=a[1].x1-a[1].x0,s=r[0]+Math.ceil((r[1]-r[0])/i)*i;return histogram().domain([r[0],s]).thresholds(_range(r[0],s+.4*i,i))(n)}return a}function innerWidth(e){var t=e.width,n=e.padding;return t-n.left-n.right}function xScaleBand(e){var t=e.bins,n=e.innerWidth;return xScaleBand_.domain(t.map(function(e){return e.x0})).paddingInner(.1).rangeRound([0,n]).align(0)}function xScale(e){var t=e.niceDomain,n=e.bins,r=e.xScaleBand;return xScale_.domain(t).rangeRound([0,r.step()*n.length])}function ticks$1(e){var t=e.xScale,n=e.format;return t.ticks(4).map(function(e){return{x:e,label:n(e)}})}function innerHeight(e){var t=e.height,n=e.padding;return t-n.bottom-n.top}function yScale(e){var t=e.innerHeight,n=e.bins;return yScale_.domain([0,max(n,function(e){return e.length})]).range([t,0])}function barWidth(e){var t=e.bins,n=e.xScale;return n(t[0].x1)-n(t[0].x0)-1}function data$13(){return{format:function(e){return e},t:0,padding:{top:10,right:65,bottom:20,left:5},height:200,width:500,values:[],highlight:!1}}function tooltip(e,t,n,r){return(0===t?__("describe / histogram / tooltip / first"):t===n.length-1?__("describe / histogram / tooltip / last"):__("describe / histogram / tooltip")).replace("$1",e.length).replace("$2",pct(e.length/r)).replace("$3",toFixed(e.x0)).replace("$4",toFixed(e.x1))}var methods$8={show:function(e){this.set({highlight:e})},resize:function(){var e=this.refs.svg.getBoundingClientRect();this.set({width:e.right-e.left,height:e.bottom-e.top})}};function oncreate$5(){this.resize()}function create_main_fragment$14(e,t){for(var n,r,a,o,i,s,c,l,u,d,h,f,p,m,_,v=__("describe / histogram"),g=__("describe / histogram / learn-more"),b=t.ticks,y=[],N=0;N<b.length;N+=1)y[N]=create_each_block$7(e,assign(assign({},t),{each_value:b,tick:b[N],tick_index:N}));var x=t.highlight&&create_if_block$8(e,t),w=t.bins,k=[];for(N=0;N<w.length;N+=1)k[N]=create_each_block_1$3(e,assign(assign({},t),{each_value_1:w,bin:w[N],i:N}));var M=t.stats,T=[];for(N=0;N<M.length;N+=1)T[N]=create_each_block_2$1(e,assign(assign({},t),{each_value_2:M,s:M[N],s_index:N}));var E=t.NAs>0&&create_if_block_1$5(e,t);return{c:function(){n=createElement("h3"),r=createText(v),a=createText("\n"),o=createSvgElement("svg"),i=createSvgElement("g"),s=createSvgElement("g");for(var e=0;e<y.length;e+=1)y[e].c();c=createComment(),x&&x.c(),u=createSvgElement("g");for(e=0;e<k.length;e+=1)k[e].c();h=createText("\n"),f=createElement("ul");for(e=0;e<T.length;e+=1)T[e].c();p=createComment(),E&&E.c(),m=createText("\n"),_=createElement("p"),this.h()},h:function(){n.className="svelte-1nda9r9",setAttribute(s,"class","axis x-axis svelte-1nda9r9"),setAttribute(s,"transform",l="translate(0, "+t.innerHeight+")"),setAttribute(u,"class","bars svelte-1nda9r9"),setAttribute(i,"transform",d="translate("+[t.padding.left,t.padding.top]+")"),setAttribute(o,"class","svelte-1nda9r9"),f.className="svelte-1nda9r9",_.className="learn-more"},m:function(t,l){insertNode(n,t,l),appendNode(r,n),insertNode(a,t,l),insertNode(o,t,l),appendNode(i,o),appendNode(s,i);for(var d=0;d<y.length;d+=1)y[d].m(s,null);appendNode(c,s),x&&x.m(s,null),appendNode(u,i);for(d=0;d<k.length;d+=1)k[d].m(u,null);e.refs.svg=o,insertNode(h,t,l),insertNode(f,t,l);for(d=0;d<T.length;d+=1)T[d].m(f,null);appendNode(p,f),E&&E.m(f,null),insertNode(m,t,l),insertNode(_,t,l),_.innerHTML=g},p:function(t,n){var r=n.ticks;if(t.xScale||t.ticks){for(var a=0;a<r.length;a+=1){var o=assign(assign({},n),{each_value:r,tick:r[a],tick_index:a});y[a]?y[a].p(t,o):(y[a]=create_each_block$7(e,o),y[a].c(),y[a].m(s,c))}for(;a<y.length;a+=1)y[a].u(),y[a].d();y.length=r.length}n.highlight?x?x.p(t,n):((x=create_if_block$8(e,n)).c(),x.m(s,null)):x&&(x.u(),x.d(),x=null),t.innerHeight&&l!==(l="translate(0, "+n.innerHeight+")")&&setAttribute(s,"transform",l);var h=n.bins;if(t.xScaleBand||t.bins||t.yScale||t.validValues||t.innerHeight){for(a=0;a<h.length;a+=1){var m=assign(assign({},n),{each_value_1:h,bin:h[a],i:a});k[a]?k[a].p(t,m):(k[a]=create_each_block_1$3(e,m),k[a].c(),k[a].m(u,null))}for(;a<k.length;a+=1)k[a].u(),k[a].d();k.length=h.length}t.padding&&d!==(d="translate("+[n.padding.left,n.padding.top]+")")&&setAttribute(i,"transform",d);var _=n.stats;if(t.stats){for(a=0;a<_.length;a+=1){var v=assign(assign({},n),{each_value_2:_,s:_[a],s_index:a});T[a]?T[a].p(t,v):(T[a]=create_each_block_2$1(e,v),T[a].c(),T[a].m(f,p))}for(;a<T.length;a+=1)T[a].u(),T[a].d();T.length=_.length}n.NAs>0?E?E.p(t,n):((E=create_if_block_1$5(e,n)).c(),E.m(f,null)):E&&(E.u(),E.d(),E=null)},u:function(){_.innerHTML="",detachNode(n),detachNode(a),detachNode(o);for(var e=0;e<y.length;e+=1)y[e].u();x&&x.u();for(e=0;e<k.length;e+=1)k[e].u();detachNode(h),detachNode(f);for(e=0;e<T.length;e+=1)T[e].u();E&&E.u(),detachNode(m),detachNode(_)},d:function(){destroyEach(y),x&&x.d(),destroyEach(k),e.refs.svg===o&&(e.refs.svg=null),destroyEach(T),E&&E.d()}}}function create_each_block$7(e,t){var n,r,a,o,i,s=t.tick,c=(t.each_value,t.tick_index,s.label);return{c:function(){n=createSvgElement("g"),r=createSvgElement("line"),a=createSvgElement("text"),o=createText(c),this.h()},h:function(){setAttribute(r,"y2","3"),setAttribute(r,"class","svelte-1nda9r9"),setAttribute(a,"y","5"),setAttribute(a,"class","svelte-1nda9r9"),setAttribute(n,"class","tick svelte-1nda9r9"),setAttribute(n,"transform",i="translate("+t.xScale(s.x)+",0)")},m:function(e,t){insertNode(n,e,t),appendNode(r,n),appendNode(a,n),appendNode(o,a)},p:function(e,t){s=t.tick,t.each_value,t.tick_index,e.ticks&&c!==(c=s.label)&&(o.data=c),(e.xScale||e.ticks)&&i!==(i="translate("+t.xScale(s.x)+",0)")&&setAttribute(n,"transform",i)},u:function(){detachNode(n)},d:noop}}function create_if_block$8(e,t){var n,r;return{c:function(){n=createSvgElement("polygon"),this.h()},h:function(){setAttribute(n,"transform",r="translate("+t.xScale(t.highlight.x)+",0)"),setAttribute(n,"points","0,0,4,6,-4,6")},m:function(e,t){insertNode(n,e,t)},p:function(e,t){(e.xScale||e.highlight)&&r!==(r="translate("+t.xScale(t.highlight.x)+",0)")&&setAttribute(n,"transform",r)},u:function(){detachNode(n)},d:noop}}function create_each_block_1$3(e,t){var n,r,a,o,i,s,c,l=t.bin,u=(t.each_value_1,t.i),d=tooltip(l,u,t.bins,t.validValues.length);return{c:function(){n=createSvgElement("g"),r=createSvgElement("title"),a=createText(d),o=createSvgElement("rect"),this.h()},h:function(){setAttribute(o,"width",i=l.x1!=l.x0?t.xScaleBand.bandwidth():20),setAttribute(o,"height",s=t.innerHeight-t.yScale(l.length)),setAttribute(o,"class","svelte-1nda9r9"),setAttribute(n,"class","bar"),setAttribute(n,"transform",c="translate("+t.xScaleBand(l.x0)+","+t.yScale(l.length)+")")},m:function(e,t){insertNode(n,e,t),appendNode(r,n),appendNode(a,r),appendNode(o,n)},p:function(e,t){l=t.bin,t.each_value_1,u=t.i,(e.bins||e.validValues)&&d!==(d=tooltip(l,u,t.bins,t.validValues.length))&&(a.data=d),(e.bins||e.xScaleBand)&&i!==(i=l.x1!=l.x0?t.xScaleBand.bandwidth():20)&&setAttribute(o,"width",i),(e.innerHeight||e.yScale||e.bins)&&s!==(s=t.innerHeight-t.yScale(l.length))&&setAttribute(o,"height",s),(e.xScaleBand||e.bins||e.yScale)&&c!==(c="translate("+t.xScaleBand(l.x0)+","+t.yScale(l.length)+")")&&setAttribute(n,"transform",c)},u:function(){detachNode(n)},d:noop}}function create_each_block_2$1(e,t){var n,r,a,o,i,s=t.s,c=(t.each_value_2,t.s_index,s.name),l=s.label;return{c:function(){n=createElement("li"),r=createText(c),a=createText(": "),o=createElement("tt"),i=createText(l),this.h()},h:function(){addListener(o,"mouseleave",mouseleave_handler),addListener(o,"mouseenter",mouseenter_handler),o.className="svelte-1nda9r9",o._svelte={component:e,each_value_2:t.each_value_2,s_index:t.s_index},n.className="svelte-1nda9r9"},m:function(e,t){insertNode(n,e,t),appendNode(r,n),appendNode(a,n),appendNode(o,n),appendNode(i,o)},p:function(e,t){s=t.s,t.each_value_2,t.s_index,e.stats&&c!==(c=s.name)&&(r.data=c),e.stats&&l!==(l=s.label)&&(i.data=l),o._svelte.each_value_2=t.each_value_2,o._svelte.s_index=t.s_index},u:function(){detachNode(n)},d:function(){removeListener(o,"mouseleave",mouseleave_handler),removeListener(o,"mouseenter",mouseenter_handler)}}}function create_if_block_1$5(e,t){var n,r,a,o,i,s,c,l,u=__("describe / histogram / invalid"),d=pct(t.NAs/t.values.length);return{c:function(){n=createElement("li"),r=createText(u),a=createText(": "),o=createElement("tt"),i=createText(t.NAs),s=createText(" ("),c=createText(d),l=createText(")"),this.h()},h:function(){setStyle(o,"color","#c71e1d"),o.className="svelte-1nda9r9",n.className="svelte-1nda9r9"},m:function(e,t){insertNode(n,e,t),appendNode(r,n),appendNode(a,n),appendNode(o,n),appendNode(i,o),appendNode(s,n),appendNode(c,n),appendNode(l,n)},p:function(e,t){e.NAs&&(i.data=t.NAs),(e.NAs||e.values)&&d!==(d=pct(t.NAs/t.values.length))&&(c.data=d)},u:function(){detachNode(n)},d:noop}}function mouseleave_handler(e){this._svelte.component.show(!1)}function mouseenter_handler(e){var t=this._svelte.component,n=this._svelte.each_value_2[this._svelte.s_index];t.show(n)}function Histogram(e){init(this,e),this.refs={},this._state=assign(data$13(),e.data),this._recompute({values:1,validValues:1,format:1,niceDomain:1,width:1,padding:1,bins:1,innerWidth:1,xScaleBand:1,xScale:1,height:1,innerHeight:1},this._state);var t=this;e.root||(this._oncreate=[]),this._fragment=create_main_fragment$14(this,this._state),this.root._oncreate.push(function(){oncreate$5.call(t),t.fire("update",{changed:{values:1,validValues:1,format:1,xScale:1,niceDomain:1,bins:1,innerWidth:1,xScaleBand:1,innerHeight:1,width:1,padding:1,height:1,ticks:1,highlight:1,yScale:1,stats:1,NAs:1},current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),callAll(this._oncreate))}assign(Histogram.prototype,proto),assign(Histogram.prototype,methods$8),Histogram.prototype._recompute=function(e,t){e.values&&(this._differs(t.NAs,t.NAs=NAs(t))&&(e.NAs=!0),this._differs(t.validValues,t.validValues=validValues(t))&&(e.validValues=!0)),(e.validValues||e.format)&&this._differs(t.stats,t.stats=stats(t))&&(e.stats=!0),e.validValues&&this._differs(t.niceDomain,t.niceDomain=niceDomain(t))&&(e.niceDomain=!0),(e.niceDomain||e.validValues)&&this._differs(t.bins,t.bins=bins(t))&&(e.bins=!0),(e.width||e.padding)&&this._differs(t.innerWidth,t.innerWidth=innerWidth(t))&&(e.innerWidth=!0),(e.bins||e.innerWidth)&&this._differs(t.xScaleBand,t.xScaleBand=xScaleBand(t))&&(e.xScaleBand=!0),(e.niceDomain||e.bins||e.xScaleBand)&&this._differs(t.xScale,t.xScale=xScale(t))&&(e.xScale=!0),(e.xScale||e.format)&&this._differs(t.ticks,t.ticks=ticks$1(t))&&(e.ticks=!0),(e.height||e.padding)&&this._differs(t.innerHeight,t.innerHeight=innerHeight(t))&&(e.innerHeight=!0),(e.innerHeight||e.bins)&&this._differs(t.yScale,t.yScale=yScale(t))&&(e.yScale=!0),(e.bins||e.xScale)&&this._differs(t.barWidth,t.barWidth=barWidth(t))&&(e.barWidth=!0)};var TAGS=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,COMMENTS_AND_PHP_TAGS=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,default_allowed="<a><b><br><br/><i><strong><sup><sub><strike><u><em><tt>";function purifyHtml(e,t){if(null===e)return null;if(void 0!==e){if((e=String(e)).indexOf("<")<0||e.indexOf(">")<0)return e;if(e=stripTags(e,t),"undefined"==typeof document)return e;var n=document.createElement("div");n.innerHTML=e;for(var r=n.querySelectorAll("*"),a=0;a<r.length;a++)for(var o=0;o<r[a].attributes.length;o++){var i=r[a].attributes[o];i.specified&&"on"==i.name.substr(0,2)&&r[a].removeAttribute(i.name)}return n.innerHTML}}function stripTags(e,t){t=(((void 0!==t?t||"":default_allowed)+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");for(var n=e,r=e;;)if((n=r)===(r=n.replace(COMMENTS_AND_PHP_TAGS,"").replace(TAGS,function(e,n){return t.indexOf("<"+n.toLowerCase()+">")>-1?e:""})))return r}function _isString(e){return"[object String]"===toString.call(e)}function dataset(e){var t={},n=e.slice(0);function r(e){for(var n=e.name(),r=n,a=1;t.hasOwnProperty(r);)r=n+"."+a++;r!=n&&e.name(r)}e.forEach(function(e){r(e),t[e.name()]=e});var a={columns:function(){return e},column:function(n){if(_isString(n)){if(void 0!==t[n])return t[n];throw'No column found with that name: "'+n+'"'}if(!(n<0)){if(void 0!==e[n])return e[n];throw"No column found with that index: "+n}},numColumns:function(){return e.length},numRows:function(){return e[0].length},eachColumn:function(t){e.forEach(t)},hasColumn:function(n){return void 0!==(_isString(n)?t[n]:e[n])},indexOf:function(n){return a.hasColumn(n)?e.indexOf(t[n]):-1},list:function(){return _range(e[0].length).map(function(t){var n={};return e.forEach(function(e){n[e.name()]=e.val(t)}),n})},csv:function(){var t="";return e.forEach(function(e,n){var r=e.title();r.indexOf('"')>-1&&r.replace('"','\\"'),r.indexOf(",")>-1&&(r='"'+r+'"'),t+=(n>0?",":"")+r}),_range(a.numRows()).forEach(function(n){t+="\n",e.forEach(function(e,r){var a=""+("date"==e.type()?e.raw(n):e.val(n));a.indexOf('"')>-1&&a.replace('"','\\"'),a.indexOf(",")>-1&&(a='"'+a+'"'),t+=(r>0?",":"")+a})}),t},toCSV:function(){return this.csv()},filterColumns:function(n){return e=e.filter(function(e){return!n[e.name()]}),n.forEach(function(e,n){e&&t[n]&&delete t[n]}),a},eachRow:function(e){var t;for(t=0;t<a.numRows();t++)e(t);return a},add:function(o){return r(o),e.push(o),t[o.name()]=o,n.push(o),a},reset:function(){return e=n.slice(0),t={},e.forEach(function(e){t[e.name()]=e}),a},limitRows:function(t){return e.forEach(function(e){e.limitRows(t)}),a},limitColumns:function(t){return e.length>t&&(e.length=t,n.length=t),a},columnOrder:function(t){return arguments.length?(e.length=0,t.forEach(function(t){e.push(n[t])}),a):e.map(function(e){return n.indexOf(e)})}};return a}function _every(e,t,n){t=cb(t,n);for(var r=!isArrayLike(e)&&_keys(e),a=(r||e).length,o=0;o<a;o++){var i=r?r[o]:o;if(!t(e[i],i,e))return!1}return!0}function _isUndefined(e){return void 0===e}function _isDate(e){return"[object Date]"===toString.call(e)}function _random(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}function _allKeys(e){if(!_isObject(e))return[];var t=[];for(var n in e)t.push(n);return hasEnumBug&&collectNonEnumProps(e,t),t}var _extend=createAssigner(_allKeys);function _clone(e){return _isObject(e)?_isArray(e)?e.slice():_extend({},e):e}function _sample(e,t,n){if(null==t||n)return isArrayLike(e)||(e=_values(e)),e[_random(e.length-1)];var r=isArrayLike(e)?_clone(e):_values(e),a=getLength(r);t=Math.max(Math.min(t,a),0);for(var o=a-1,i=0;i<t;i++){var s=_random(i,o),c=r[i];r[i]=r[s],r[s]=c}return r.slice(0,t)}function _shuffle(e){return _sample(e,1/0)}function _map(e,t,n){t=cb(t,n);for(var r=!isArrayLike(e)&&_keys(e),a=(r||e).length,o=Array(a),i=0;i<a;i++){var s=r?r[i]:i;o[i]=t(e[s],s,e)}return o}function _isNull(e){return null===e}function _flatten(e,t){return flatten(e,t,!1)}function _isRegExp(e){return"[object RegExp]"===toString.call(e)}function equalish(e,t){return e-t<1e-6}var columnTypes={},_identity$1=function(e){return e};function column(e,t,n){function r(e){return null!==e&&void 0!==e&&""!==e}var a=_shuffle(_range(t.length)).filter(function(e){return r(t[e])}).slice(0,200).map(function(e){return t[e]});n=n?columnTypes[n](a):function(e){if(_every(t,_isNumber))return columnTypes.number();if(_every(t,_isDate))return columnTypes.date();var n,a=[columnTypes.date(e),columnTypes.number(e),columnTypes.text()],o=t.filter(r).length;return _each(t,function(e){_each(a,function(t){t.parse(e)})}),_every(a,function(e){return e.errors()/o<.1&&(n=e),!n}),_isUndefined(n)&&(n=a[2]),n}(a);var o,i,s,c=t.slice(0),l={name:function(){return arguments.length?(e=arguments[0],l):purifyHtml(e)},title:function(){return arguments.length?(s=arguments[0],l):purifyHtml(s||e)},length:t.length,val:function(e,r){if(arguments.length){var a=r?c:t;return e<0&&(e+=a.length),n.parse(purifyHtml(a[e]))}},values:function(e){var r=e?c:t;return _map(r=_map(r,function(e){return purifyHtml(e)}),n.parse)},each:function(e){for(var n=0;n<t.length;n++)e(l.val(n),n)},raw:function(e,n){return arguments.length?2==arguments.length?(t[e]=n,l):purifyHtml(t[e]):t},type:function(e){if(!0===e)return n;if(_isString(e)){if(columnTypes[e])return n=columnTypes[e](a),l;throw"unknown column type: "+e}return n.name()},range:function(){return!!n.toNum&&(o||(o=[Number.MAX_VALUE,-Number.MAX_VALUE],l.each(function(e){_isNumber(e=n.toNum(e))&&!_isNaN(e)&&(e<o[0]&&(o[0]=e),e>o[1]&&(o[1]=e))}),o[0]=n.fromNum(o[0]),o[1]=n.fromNum(o[1])),o)},total:function(){return!!n.toNum&&(i||(i=0,l.each(function(e){i+=n.toNum(e)}),i=n.fromNum(i)),i)},filterRows:function(e){return t=[],arguments.length?_each(e,function(e){t.push(c[e])}):t=c.slice(0),l.length=t.length,o=i=!1,l},toString:function(){return e+" ("+n.name()+")"},indexOf:function(e){return _find(_range(t.length),function(t){return l.val(t)==e})},limitRows:function(e){c.length>e&&(c.length=e,t.length=e,l.length=e)}};return l}function delimited(e){return{dataset:function(){if(e.url);else if(e.csv)return new Promise(function(t){t(e.csv)}).then(function(t){return new DelimitedParser(e).parse(t)});throw"you need to provide either an URL or CSV data."},parse:function(){return new DelimitedParser(e).parse(e.csv)}}}columnTypes.text=function(){return{parse:_identity$1,errors:function(){return 0},name:function(){return"text"},formatter:function(){return _identity$1},isValid:function(){return!0},format:function(){}}},columnTypes.number=function(e){var t,n=0,r={"-.":/^ *[-–—−]?[0-9]*(\.[0-9]+)?(e[+-][0-9]+)?%? *$/,"-,":/^ *[-–—−]?[0-9]*(,[0-9]+)?%? *$/,",.":/^ *[-–—−]?[0-9]{1,3}(,[0-9]{3})*(\.[0-9]+)?%? *$/,".,":/^ *[-–—−]?[0-9]{1,3}(\.[0-9]{3})*(,[0-9]+)?%? *$/," .":/^ *[-–—−]?[0-9]{1,3}( [0-9]{3})*(\.[0-9]+)?%? *$/," ,":/^ *[-–—−]?[0-9]{1,3}( [0-9]{3})*(,[0-9]+)?%? *$/," .":/^ *[-–—−]?[0-9]{1,3}( [0-9]{3})*(\.[0-9]+)?%? *$/," ,":/^ *[-–—−]?[0-9]{1,3}( [0-9]{3})*(,[0-9]+)?%? *$/," .":/^ *[-–—−]?[0-9]{1,3}( [0-9]{3})*(\.[0-9]+)?%? *$/," ,":/^ *[-–—−]?[0-9]{1,3}( [0-9]{3})*(,[0-9]+)?%? *$/,"'.":/^ *[-–—−]?[0-9]{1,3}('[0-9]{3})*(\.[0-9]+)?%? *$/},a={"-.":"1234.56","-,":"1234,56",",.":"1,234.56",".,":"1.234,56"," .":"1 234.56"," ,":"1 234,56"," .":"1 234.56"," ,":"1 234,56"," .":"1 234.56"," ,":"1 234,56"},o={na:1,"n/a":1,"-":1,":":1},i={},s=["-.",0];_each(e=e||[],function(e){_each(r,function(t,n){void 0===i[n]&&(i[n]=0),t.test(e)&&(i[n]+=1,i[n]>s[1]&&(s[0]=n,s[1]=i[n]))})}),t=s[0];var c={parse:function(e){if(_isNumber(e)||_isUndefined(e)||_isNull(e))return e;var r=e.replace("%","").replace("−","-").replace("–","-").replace("—","-");return"-"!==t[0]&&(r=r.replace(new RegExp("."===t[0]?"\\.":t[0],"g"),"")),"."!==t[1]&&(r=r.replace(t[1],".")),isNaN(r)||""===r?(o[r.toLowerCase()]||""===r||n++,e):Number(r)},toNum:function(e){return e},fromNum:function(e){return e},errors:function(){return n},name:function(){return"number"},formatter:function(e){var t=e["number-format"]||"-",n=Number(e["number-divisor"]||0),r=(e["number-append"]||"").replace(/ /g," "),a=(e["number-prepend"]||"").replace(/ /g," ");return function(e,o,i){if(isNaN(e))return e;var s=t;if(0!==n&&"-"===s&&(s="n1"),0!==n&&(e=Number(e)/Math.pow(10,n)),"s"===s.substr(0,1)){var c=+s.substr(1);s="n"+Math.max(0,function(e,t){return 0===e?0:Math.round(t-Math.ceil(Math.log(Math.abs(e))/Math.LN10))}(e,c))}return i&&(s="n0"),"-"===s&&(s=equalish(e,Math.round(e))?"n0":equalish(e,.1*Math.round(10*e))?"n1":equalish(e,.01*Math.round(100*e))?"n2":equalish(e,.001*Math.round(1e3*e))?"n3":equalish(e,1e-4*Math.round(1e4*e))?"n4":equalish(e,1e-5*Math.round(1e5*e))?"n5":"n6"),e=Globalize.format(e,"-"!==s?s:null),o?a+e+r:e}},isValid:function(e){return""===e||o[String(e).toLowerCase()]||_isNumber(c.parse(e))},ambiguousFormats:function(){var e=[];return _each(i,function(t,n){t===s[1]&&e.push([n,a[n]])}),e},format:function(e){return arguments.length?(t=e,c):t}};return c},columnTypes.date=function(){var e=/^ */.source,t=/[*']* *$/.source,n=/[ \-/.]?/.source,r=/[ \-/.]/.source,a=/[ \-/.,]/.source,o=/[ \-|T]/.source,i={YY:{parse:/['’‘]?(\d{2})/},YYYY:{test:/([12]\d{3})/,parse:/(\d{4})/},YYYY2:{test:/(?:1[7-9]|20)\d{2}/,parse:/(\d{4})/},H:{parse:/h([12])/},Q:{parse:/q([1234])/},W:{parse:/w([0-5]?[0-9])/},Mm:{test:/m?(0?[1-9]|1[0-2])/,parse:/m?(0?[1-9]|1[0-2])/},MM:{test:/(0?[1-9]|1[0-2])/,parse:/(0?[1-9]|1[0-2])/},DD:{parse:/(0?[1-9]|[1-2][0-9]|3[01])/},DOW:{parse:/([0-7])/},HHMM:{parse:/(0?\d|1\d|2[0-3]):([0-5]\d)(?::([0-5]\d))? *(am|pm)?/}},s={0:["jan","january","januar","jänner","jän","janv","janvier","ene","enero","gen","gennaio","janeiro"],1:["feb","february","febr","februar","fév","févr","février","febrero","febbraio","fev","fevereiro"],2:["mar","mär","march","mrz","märz","mars","mars","marzo","marzo","março"],3:["apr","april","apr","april","avr","avril","abr","abril","aprile"],4:["may","mai","mayo","mag","maggio","maio","maj"],5:["jun","june","juni","juin","junio","giu","giugno","junho"],6:["jul","july","juli","juil","juillet","julio","lug","luglio","julho"],7:["aug","august","août","ago","agosto"],8:["sep","september","sept","septembre","septiembre","set","settembre","setembro"],9:["oct","october","okt","oktober","octobre","octubre","ott","ottobre","out","outubro"],10:["nov","november","november","novembre","noviembre","novembre","novembro"],11:["dec","december","dez","des","dezember","déc","décembre","dic","diciembre","dicembre","desember","dezembro"]},c={};_each(s,function(e,t){_each(e,function(e){c[e]=t})}),i.MMM={parse:new RegExp("("+_flatten(_values(s)).join("|")+")")},_each(i,function(e){e.parse=e.parse.source,_isRegExp(e.test)?e.test=e.test.source:e.test=e.parse});var l={YYYY:{test:u(i.YYYY2.test),parse:u(i.YYYY2.parse),precision:"year"},"YYYY-H":{test:u(i.YYYY.test,n,i.H.test),parse:u(i.YYYY.parse,n,i.H.parse),precision:"half"},"H-YYYY":{test:u(i.H.test,r,i.YYYY.test),parse:u(i.H.parse,r,i.YYYY.parse),precision:"half"},"YYYY-Q":{test:u(i.YYYY.test,n,i.Q.test),parse:u(i.YYYY.parse,n,i.Q.parse),precision:"quarter"},"Q-YYYY":{test:u(i.Q.test,r,i.YYYY.test),parse:u(i.Q.parse,r,i.YYYY.parse),precision:"quarter"},"YYYY-M":{test:u(i.YYYY.test,n,i.Mm.test),parse:u(i.YYYY.parse,n,i.Mm.parse),precision:"month"},"M-YYYY":{test:u(i.MM.test,r,i.YYYY.test),parse:u(i.MM.parse,r,i.YYYY.parse),precision:"month"},"YYYY-MMM":{test:u(i.YYYY.test,r,i.MMM.parse),parse:u(i.YYYY.parse,r,i.MMM.parse),precision:"month"},"MMM-YYYY":{test:u(i.MMM.parse,r,i.YYYY.test),parse:u(i.MMM.parse,r,i.YYYY.parse),precision:"month"},"MMM-YY":{test:u(i.MMM.parse,r,i.YY.test),parse:u(i.MMM.parse,r,i.YY.parse),precision:"month"},MMM:{test:u(i.MMM.parse),parse:u(i.MMM.parse),precision:"month"},"YYYY-WW":{test:u(i.YYYY.test,n,i.W.test),parse:u(i.YYYY.parse,n,i.W.parse),precision:"week"},"WW-YYYY":{test:u(i.W.test,r,i.YYYY.test),parse:u(i.W.parse,r,i.YYYY.parse),precision:"week"},"MM/DD/YYYY":{test:u(i.MM.test,"([\\-\\/])",i.DD.test,"\\2",i.YYYY.test),parse:u(i.MM.parse,"([\\-\\/])",i.DD.parse,"\\2",i.YYYY.parse),precision:"day"},"DD/MM/YYYY":{test:u(i.DD.test,"([\\-\\.\\/ ?])",i.MM.test,"\\2",i.YYYY.test),parse:u(i.DD.parse,"([\\-\\.\\/ ?])",i.MM.parse,"\\2",i.YYYY.parse),precision:"day"},"DD/MMM/YYYY":{test:u(i.DD.test,"([\\-\\.\\/ ?])",i.MMM.test,"\\2",i.YYYY.test),parse:u(i.DD.parse,"([\\-\\.\\/ ?])",i.MMM.parse,"\\2",i.YYYY.parse),precision:"day"},"DD/MMM/YY":{test:u(i.DD.test,"([\\-\\.\\/ ?])",i.MMM.test,"\\2",i.YY.test),parse:u(i.DD.parse,"([\\-\\.\\/ ?])",i.MMM.parse,"\\2",i.YY.parse),precision:"day"},"YYYY-MM-DD":{test:u(i.YYYY.test,"([\\-\\.\\/ ?])",i.MM.test,"\\2",i.DD.test),parse:u(i.YYYY.parse,"([\\-\\.\\/ ?])",i.MM.parse,"\\2",i.DD.parse),precision:"day"},"MMM-DD-YYYY":{test:u(i.MMM.test,r,i.DD.test,a,i.YYYY.test),parse:u(i.MMM.parse,r,i.DD.parse,a,i.YYYY.parse),precision:"day"},"YYYY-WW-d":{test:u(i.YYYY.test,n,i.W.test,r,i.DOW.test),parse:u(i.YYYY.parse,n,i.W.parse,r,i.DOW.parse),precision:"day"},"MM/DD/YYYY HH:MM":{test:u(i.MM.test,"([\\-\\/])",i.DD.test,"\\2",i.YYYY.test,o,i.HHMM.test),parse:u(i.MM.parse,"([\\-\\/])",i.DD.parse,"\\2",i.YYYY.parse,o,i.HHMM.parse),precision:"day-minutes"},"DD.MM.YYYY HH:MM":{test:u(i.DD.test,"([\\-\\.\\/ ?])",i.MM.test,"\\2",i.YYYY.test,o,i.HHMM.test),parse:u(i.DD.parse,"([\\-\\.\\/ ?])",i.MM.parse,"\\2",i.YYYY.parse,o,i.HHMM.parse),precision:"day-minutes"},"YYYY-MM-DD HH:MM":{test:u(i.YYYY.test,"([\\-\\.\\/ ?])",i.MM.test,"\\2",i.DD.test,o,i.HHMM.test),parse:u(i.YYYY.parse,"([\\-\\.\\/ ?])",i.MM.parse,"\\2",i.DD.parse,o,i.HHMM.parse),precision:"day-minutes"},ISO8601:{test:/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,parse:function(e){return e},precision:"day-seconds"}};function u(){return new RegExp(e+Array.prototype.slice.call(arguments).join(" *")+t,"i")}function d(e,t){var n=l[t];return _isRegExp(n.test)?n.test.test(e):n.test(e,t)}function h(e,t,n){var r=new Date(Date.UTC(e,0,3));return r.setUTCDate(3-r.getUTCDay()+7*(t-1)+parseInt(n,10)),r}function f(e,t){return 12!==e?e+("pm"===t?12:0):"am"===t?0:12}return function(e){var t,n=0,r={},a=["",0];e=e||[],_each(l,function(t,n){_each(e,function(e){void 0===r[n]&&(r[n]=0),d(e,n)&&(r[n]+=1,r[n]>a[1]&&(a[0]=n,a[1]=r[n]))})}),t=a[0];var o={parse:function(e){if(_isDate(e)||_isUndefined(e))return e;if(!t||!_isString(e))return n++,e;var r,a,o,i=(r=e.toLowerCase(),_isRegExp((o=l[a=t]).parse)?r.match(o.parse):o.parse(r,a));if(!i)return n++,e;function s(e){return(e=+e)<20?2e3+e:1900+e}d(e,t)||n++;var u=(new Date).getFullYear();switch(t){case"YYYY":return new Date(i[1],0,1);case"YYYY-H":return new Date(i[1],6*(i[2]-1),1);case"H-YYYY":return new Date(i[2],6*(i[1]-1),1);case"YYYY-Q":return new Date(i[1],3*(i[2]-1),1);case"Q-YYYY":return new Date(i[2],3*(i[1]-1),1);case"YYYY-M":return new Date(i[1],i[2]-1,1);case"M-YYYY":return new Date(i[2],i[1]-1,1);case"YYYY-MMM":return new Date(+i[1],c[i[2]],1);case"MMM-YYYY":return new Date(+i[2],c[i[1]],1);case"MMM-YY":return new Date(s(+i[2]),c[i[1]],1);case"MMM":return new Date(u,c[i[1]],1);case"YYYY-WW":return h(i[1],i[2],1);case"WW-YYYY":return h(i[2],i[1],1);case"YYYY-WW-d":return h(i[1],i[2],i[3]);case"YYYY-MM-DD":return new Date(i[1],i[3]-1,i[4]);case"DD/MM/YYYY":return new Date(i[4],i[3]-1,i[1]);case"DD/MMM/YYYY":return new Date(i[4],c[i[3]],i[1]);case"DD/MMM/YY":return new Date(s(i[4]),c[i[3]],i[1]);case"MM/DD/YYYY":return new Date(i[4],i[1]-1,i[3]);case"MMM-DD-YYYY":return new Date(i[3],c[i[1]],i[2]);case"YYYY-MM-DD HH:MM":return new Date(+i[1],i[3]-1,+i[4],f(+i[5],i[8]),+i[6]||0,+i[7]||0);case"DD.MM.YYYY HH:MM":return new Date(+i[4],i[3]-1,+i[1],f(+i[5],i[8]),+i[6]||0,+i[7]||0);case"MM/DD/YYYY HH:MM":return new Date(+i[4],i[1]-1,+i[3],f(+i[5],i[8]),+i[6]||0,+i[7]||0);case"ISO8601":return new Date(i.toUpperCase());default:console.warn("unknown format",t)}return n++,e},toNum:function(e){return e.getTime()},fromNum:function(e){return new Date(e)},errors:function(){return n},name:function(){return"date"},format:function(e){return arguments.length?(t=e,o):t},precision:function(){return l[t].precision},formatter:function(){if(!t)return _identity$1;var e=Globalize.culture().calendar.patterns.M.replace("MMMM","MMM");switch(l[t].precision){case"year":return function(e){return _isDate(e)?e.getFullYear():e};case"half":return function(e){return _isDate(e)?e.getFullYear()+" H"+(e.getMonth()/6+1):e};case"quarter":return function(e){return _isDate(e)?e.getFullYear()+" Q"+(e.getMonth()/3+1):e};case"month":return function(e){return _isDate(e)?Globalize.format(e,"MMM yy"):e};case"week":return function(e){return _isDate(e)?function(e){var t=e.getUTCDay(),n=new Date(e.valueOf());n.setDate(n.getDate()-(t+6)%7+3);var r=n.getUTCFullYear(),a=Math.floor((n.getTime()-new Date(r,0,1,-6))/864e5);return[r,1+Math.floor(a/7),t>0?t:7]}(e).slice(0,2).join(" W"):e};case"day":return function(e,t){return _isDate(e)?Globalize.format(e,t?"D":"d"):e};case"day-minutes":return function(t){return _isDate(t)?Globalize.format(t,e).replace(" ","&nbsp;")+" - "+Globalize.format(t,"t").replace(" ","&nbsp;"):t};case"day-seconds":return function(e){return _isDate(e)?Globalize.format(e,"T").replace(" ","&nbsp;"):e}}},isValid:function(e){return _isDate(o.parse(e))},ambiguousFormats:function(){var e=[];return _each(r,function(t,n){t===a[1]&&e.push([n,n])}),e}};return o}}();var DelimitedParser=function(e){e=Object.assign({delimiter:"auto",quoteChar:'"',skipRows:0,emptyValue:null,transpose:!1,firstRowIsHeader:!0},e),this.__delimiterPatterns=getDelimiterPatterns(e.delimiter,e.quoteChar),this.opts=e};function getDelimiterPatterns(e,t){return new RegExp("(\\"+e+"|\\r?\\n|\\r|^)(?:"+t+"([^"+t+"]*(?:"+t+'"[^'+t+"]*)*)"+t+"|([^"+t+"\\"+e+"\\r\\n]*))","gi")}DelimitedParser.prototype.parse=function(e){this.__rawData=e;var t=this.opts;"auto"==t.delimiter&&(t.delimiter=this.guessDelimiter(e,t.skipRows),this.__delimiterPatterns=getDelimiterPatterns(t.delimiter,t.quoteChar));var n,r="|"!=t.delimiter?"|":"#";return e=r+"\n"+e.replace(/\s+$/g,"")+r,n=function(e,t,n){n=n||",";for(var a,o=[[]],i=null;i=e.exec(t);){var s=i[1];s.length&&s!=n&&o.push([]),a=i[2]?i[2].replace(new RegExp('""',"g"),'"'):i[3],o[o.length-1].push(a)}o[0][0].substr(0,1)==r&&(o[0][0]=o[0][0].substr(1));var c=o.length-1,l=o[c].length-1,u=o[c][l].length-1;return o[c][l].substr(u)==r&&(o[c][l]=o[c][l].substr(0,u)),o.slice(1)}(this.__delimiterPatterns,e,t.delimiter),t.transpose&&(n=function(e){var t=e,n=t.length?t.length:0,r=t[0]instanceof Array?t[0].length:0;if(0===r||0===n)return[];var a,o,i=[];for(a=0;a<r;a++)for(i[a]=[],o=0;o<n;o++)i[a][o]=t[o][a];return i}(n)),function(e){var n=[],r={},a=e.length,o=e[0].length,i=t.skipRows,s=[];t.firstRowIsHeader&&(s=e[i],i++);for(var c=0;c<o;c++){var l=_isString(s[c])?s[c].replace(/^\s+|\s+$/g,""):"",u=""!==l?"":1;for(l=""!==l?l:"X.";void 0!==r[l+u];)u=""===u?1:u+1;n.push({name:l+u,data:[]}),r[l+u]=!0}return _range(i,a).forEach(function(r){n.forEach(function(n,a){n.data.push(""!==e[r][a]?e[r][a]:t.emptyValue)})}),dataset(n=n.map(function(e){return column(e.name,e.data)}))}(n)},DelimitedParser.prototype.guessDelimiter=function(e){var t=0,n=-1,r=this,a=["\t",";","|",","];return a.forEach(function(a,o){var i=getDelimiterPatterns(a,r.quoteChar),s=e.match(i).length;"\t"==a&&(s*=1.15),s>t&&(t=s,n=o)}),a[n]};var app$1=null;function currentResult(e){var t=e.searchResults,n=e.searchIndex;if(!t||!t.length)return null;var r=t.length;if(n<0||n>=r){for(;n<0;)n+=r;n>r&&(n%=r)}return t[n]}function data$14(){return{data:"",readonly:!1,skipRows:0,firstRowIsHeader:!0,fixedColumnsLeft:0,searchIndex:0,sortBy:"-",transpose:!1,activeColumn:null,search:"",searchResults:[]}}var methods$9={render:function(){this.get().hot.render()},update:function(){var e=this,t=this.get(),n=t.data,r=t.transpose,a=t.firstRowIsHeader,o=t.skipRows,i=t.hot;if(n){var s=this.store,c=s.dataset(delimited({csv:n,transpose:r,firstRowIsHeader:a,skipRows:o}).parse()).dataset();this.set({columnOrder:c.columnOrder()});var l=[[]];c.eachColumn(function(e){return l[0].push(e.title())}),c.eachRow(function(e){var t=[];c.eachColumn(function(n){return t.push(n.raw(e))}),l.push(t)}),i.loadData(l);var u=getCellRenderer(this,c,HOT,{});i.updateSettings({cells:function(t,n){return{readOnly:e.get().readonly||c.hasColumn(n)&&c.column(n).isComputed&&0===t,renderer:u}},manualColumnMove:[]}),this.set({ds:c}),this.set({has_changes:clone(s.get("metadata.data.changes",[])).length>0}),HOT.hooks.once("afterRender",function(){return e.initCustomEvents()}),i.render()}},dataChanged:function(e){var t=this,n=this.get().hot;e.forEach(function(e){var r=e[0],a=e[1],o=e[2],i=e[3];if(o!==i){var s=t.store,c=t.get().transpose,l=clone(s.getMetadata("data.changes",[]));if(r=n.toPhysicalRow(r),a=s.dataset().columnOrder()[a],c){var u=r;r=a,a=u}l.push({column:a,row:r,value:i,time:(new Date).getTime()}),s.setMetadata("data.changes",l)}})},columnMoved:function(e,t){var n=this,r=this.get().hot;if(e.length){var a=this.get().columnOrder,o=a.slice(0),i=a[t],s=o.splice(e[0],e.length),c=void 0===i?o.length:i?o.indexOf(i):0;o.splice.apply(o,[c,0].concat(s)),this.store.setMetadata("data.column-order",o.slice(0)),this.set({columnOrder:o}),HOT.hooks.once("afterRender",function(){setTimeout(function(){n.fire("resetSort"),r.selectCell(0,c,r.countRows()-1,c+s.length-1)},10)}),this.update()}},updateHeight:function(){var e=document.querySelector(".ht_master.handsontable .wtHolder .wtHider").getBoundingClientRect().height;this.refs.hot&&(this.refs.hot.style.height=Math.min(500,e+10)+"px")},checkRange:function(e,t,n,r){var a=this.get().hot,o=this.get().ds;if(t!==r||0!==e||n!==a.countRows()-1)if(t===r||0!==e||n!==a.countRows()-1)this.set({activeColumn:null,multiSelection:!1});else{for(var i=[],s=Math.min(t,r);s<=Math.max(t,r);s++)i.push(+document.querySelector("#data-preview .htCore tbody tr:first-child td:nth-child("+(s+2)+")").dataset.column);this.set({multiSelection:i.map(function(e){return o.column(e)}),activeColumn:null})}},initCustomEvents:function(){var e=this;setTimeout(function(){e.refs.hot&&(e.refs.hot.querySelectorAll(".htCore thead th:first-child").forEach(function(e){e.removeEventListener("click",topLeftCornerClick),e.addEventListener("click",topLeftCornerClick)}),e.refs.hot.querySelectorAll(".htCore thead th+th").forEach(function(e){e.removeEventListener("click",cellHeaderClick),e.addEventListener("click",cellHeaderClick)}))},500)},getColumnFormat:function(e){return this.store.getMetadata("data.column-format",{})[e]||{type:"auto",ignore:!1}}},_chart;function oncreate$6(){var e=this;app$1=this,HOT.hooks.once("afterRender",function(){return e.initCustomEvents()}),window.addEventListener("keyup",function(t){var n=e.get(),r=n.activeColumn,a=n.ds;if(r&&"input"!==t.target.tagName.toLowerCase()&&"textarea"!==t.target.tagName.toLowerCase()&&("ArrowRight"===t.key||"ArrowLeft"===t.key)){t.preventDefault(),t.stopPropagation();var o=a.indexOf(r.name());"ArrowRight"===t.key?e.set({activeColumn:a.column((o+1)%a.numColumns())}):e.set({activeColumn:a.column((o-1+a.numColumns())%a.numColumns())})}});var t=this.store,n=new HOT(this.refs.hot,{data:[],rowHeaders:function(e){return n.getPlugin("ColumnSorting").translateRow(e)+1},colHeaders:!0,fixedRowsTop:1,fixedColumnsLeft:this.get("fixedColumnsLeft"),filters:!0,dropdownMenu:!0,startRows:13,startCols:8,fillHandle:!1,stretchH:"all",height:500,manualColumnMove:!0,selectionMode:"range",autoColumnSize:{useHeaders:!0,syncLimit:5},columnSorting:!0,sortIndicator:!0,sortFunction:function(e,r){if(r.col>-1){var a=t.dataset().column(r.col),o=a.type(),i=n.getPlugin("columnSorting");return function(t,n){var s;if(0===t[0])return-1;switch(t[1]=a.val(t[0]-1),n[1]=a.val(n[0]-1),"number"===o&&(isNaN(t[1])&&(t[1]=e?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY),isNaN(n[1])&&(n[1]=e?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY)),"date"===o&&("string"==typeof t[1]&&(t[1]=new Date(110,0,1)),"string"==typeof n[1]&&(n[1]=new Date(110,0,1))),o){case"date":s=i.dateSort;break;case"number":s=i.numericSort;break;default:s=i.defaultSort}return s(e,r)(t,n)}}return function(e,t){return e[0]-t[0]}},afterGetColHeader:function(t,n){var r=e.get(),a=r.activeColumn,o=r.ds;o&&o.hasColumn(t)&&((0===t||t)&&a&&o.column(t).name()===a.name()&&n.classList.add("selected"),(0===t||t)&&(e.getColumnFormat(o.column(t).name()).ignore?n.classList.add("ignored"):n.classList.remove("ignored")))},search:"search"});window.HT=n,this.set({hot:n}),HOT.hooks.add("afterSetDataAtCell",function(t){return e.dataChanged(t)}),HOT.hooks.add("afterColumnMove",function(t,n){return e.columnMoved(t,n)}),HOT.hooks.add("afterRender",function(){return e.updateHeight()}),HOT.hooks.add("afterSelection",function(t,n,r,a){return e.checkRange(t,n,r,a)}),this.observe("data",function(){return e.update()}),this.observe("firstRowIsHeader",function(t,n){t!==n&&void 0!==n&&e.update()}),this.observe("search",function(t,r){t!==r&&e.set({searchIndex:0});var a=n.search.query(t);e.set({searchResults:a}),n.render()}),this.observe("currentResult",function(e){e&&n&&(n.render(),n.scrollViewportTo(e.row,e.col),setTimeout(function(){n.scrollViewportTo(e.row,e.col)},100))}),this.observe("activeColumn",function(){setTimeout(function(){return n.render()},10)}),this.observe("fixedColumnsLeft",function(e){n.updateSettings({fixedColumnsLeft:e})}),this.observe("sorting",function(e){n.sort(t.dataset().indexOf(e.sortBy),e.sortDir)})}function getCellRenderer(e,t,n){var r={date:"fa fa-clock-o"};return function(a,o,i,s,c,l,u){if(!(t.numColumns()<=s)&&t.hasColumn(s)){var d=t.column(s),h=e.get(),f=h.searchResults,p=h.currentResult,m=h.activeColumn,_=e.getColumnFormat(d.name());if((i=a.toPhysicalRow(i))>0)l=e.store.columnFormatter(d)(d.val(i-1),!0);parseInt(l)<0&&o.classList.add("negative"),o.classList.add(d.type()+"Type"),o.dataset.column=s,"text"===d.type()&&l&&l.length>70&&(l=l.substr(0,60)+"…"),0===i?(o.classList.add("firstRow"),r[d.type()]&&(l='<i class="'+r[d.type()]+'"></i> '+l)):o.classList.add(i%2?"oddRow":"evenRow"),_.ignore&&o.classList.add("ignored"),m&&m.name()===d.name()&&o.classList.add("active");var v=a.getPlugin("columnSorting").untranslateRow(i);f.forEach(function(e){e.row===v&&e.col===s&&o.classList.add("htSearchResult")}),p&&p.row===v&&p.col===s&&o.classList.add("htCurrentSearchResult"),i>0&&!d.type(!0).isValid(d.val(i-1))&&o.classList.add("parsingError"),u.readOnly&&o.classList.add("readOnly"),e.store.dataCellChanged(s,i)&&o.classList.add("changed"),function(e,t,r,a,o,i){var s=purifyHtml(n.helper.stringify(i));t.innerHTML=s}(0,o,0,0,0,l)}}}function topLeftCornerClick(e){e.preventDefault();var t=app$1.get().transpose;app$1.set({transpose:!t}),app$1.update()}function cellHeaderClick(e){for(var t=this.parentNode.children.length,n=-1,r=0;r<t;r++)if(this.parentNode.children.item(r)===this){n=r;break}var a=+app$1.refs.hot.querySelector(".htCore tbody tr:first-child td:nth-child("+(n+1)+")").dataset.column,o=app$1.store,i=app$1.get(),s=i.activeColumn,c=i.hot;if(o.dataset().hasColumn(a)){var l=o.dataset().column(+a);s&&s.name()===l.name()?(e.target.parentNode.classList.remove("selected"),app$1.set({activeColumn:!1}),c.deselectCell()):(e.target.parentNode.classList.add("selected"),app$1.set({activeColumn:l}))}}function create_main_fragment$15(e,t){var n;return{c:function(){n=createElement("div"),this.h()},h:function(){n.id="data-preview"},m:function(t,r){insertNode(n,t,r),e.refs.hot=n},p:noop,u:function(){detachNode(n)},d:function(){e.refs.hot===n&&(e.refs.hot=null)}}}function Handsontable_1(e){init(this,e),this.refs={},this._state=assign(data$14(),e.data),this._recompute({searchResults:1,searchIndex:1},this._state);var t=this;e.root||(this._oncreate=[]),this._fragment=create_main_fragment$15(this,this._state),this.root._oncreate.push(function(){oncreate$6.call(t),t.fire("update",{changed:{searchResults:1,searchIndex:1},current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),callAll(this._oncreate))}function searchIndexSafe(e){var t=e.searchIndex,n=e.searchResults;return t<0&&(t+=n.length),t%=n.length}function customColumn(e){var t=e.activeColumn,n=e.forceColumnFormat;return!(!t||n||!t.isComputed)&&t}function columnFormat(e){var t=e.activeColumn,n=e.forceColumnFormat;return!(!t||t.isComputed&&!n)&&t}function activeValues(e){var t=e.activeColumn;return t?t.values():[]}function activeFormat(e){var t=e.activeColumn;return t?_chart.columnFormatter(t):function(e){return e}}function columns(e){var t=e.activeColumn,n=e.$dataset;if(!t)return n&&n.columns?n.columns():[];try{return n.columns().filter(function(e){return!e.isComputed})}catch(e){return[]}}function sorting(e){return{sortBy:e.sortBy,sortDir:e.sortDir}}function data$15(){return{search:"",chartData:"",readonly:!1,searchIndex:0,activeColumn:!1,customColumn:!1,columnFormat:!1,multiSelection:!1,forceColumnFormat:!1,fixedColumnsLeft:0,has_changes:!1,searchResults:[],sortBy:"-",sortDir:!0}}assign(Handsontable_1.prototype,proto),assign(Handsontable_1.prototype,methods$9),Handsontable_1.prototype._recompute=function(e,t){(e.searchResults||e.searchIndex)&&this._differs(t.currentResult,t.currentResult=currentResult(t))&&(e.currentResult=!0)};var methods$10={nextResult:function(e){var t=this.get(),n=t.searchIndex,r=t.searchResults;(n+=e)<0&&(n+=r.length),n%=r.length,this.set({searchIndex:n})},keyPress:function(e){"F3"!==e.key&&"Enter"!==e.key||this.nextResult(e.shiftKey?-1:1)},toggleTranspose:function(){var e=this;this.set({activeColumn:!1}),this.set({transpose:!this.get().transpose}),setTimeout(function(){return e.refs.hot.update()},500)},revertChanges:function(){this.store.setMetadata("data.changes",[]),this.refs.hot.update()},cmFocus:function(){var e=this;setTimeout(function(){e.refs.hot.get().hot.render()},100)},addComputedColumn:function(){for(var e=this.store,t=e.dataset(),n=arrayToObject(e.getMetadata("describe.computed-columns",{})),r=1;t.hasColumn("Column "+r);)r++;var a="Column "+r;n[a]="",e.setMetadata("describe.computed-columns",n);var o=e.dataset(!0);this.refs.hot.update(),this.set({activeColumn:o.column(a)})},sort:function(e,t,n){e.preventDefault(),e.stopPropagation(),this.set({sortBy:t,sortDir:n}),this.refs.sortDropdownGroup.classList.remove("open")},force:function(e,t){void 0===t&&(t=!0),e.preventDefault(),this.set({forceColumnFormat:t})},hideMultiple:function(e,t){var n=this,r=this.store,a=clone(r.getMetadata("data.column-format",{}));e.forEach(function(e){a[e.name()]?a[e.name()].ignore=t:a[e.name()]={type:"auto",ignore:t}}),r.setMetadata("data.column-format",a),setTimeout(function(){n.refs.hot.get().hot.render()},10),this.set({multiSelection:!1})}};function oncreate$7(){var e=this;_chart=this.store,window.addEventListener("keypress",function(t){t.ctrlKey&&"f"===t.key&&(t.preventDefault(),e.refs.search!==window.document.activeElement?e.refs.search.focus():e.nextResult(1))})}function onstate(e){var t=e.changed,n=e.current;t.activeColumn&&n.activeColumn&&this.set({forceColumnFormat:!1})}function create_main_fragment$16(e,t){var n,r,a,o,i,s,c,l,u,d,h,f,p,m,_,v,g,b,y,N,x,w,k,M,T,E,C,S,$,D,L,A,Y,H,F,R,B,I,U,O,P,j,z,W,V,q,G,J,X,K,Z,Q,ee,te,ne,re,ae,oe,ie,se,ce,le,ue,de,he,fe,pe=__("Back"),me=__("Proceed"),_e=__("describe / info-table-header"),ve=__("describe / sort-by"),ge=__("describe / no-sorting"),be=!1,ye={},Ne=__("describe / transpose-long"),xe=__("computed columns / add-btn"),we=__("Revert changes");function ke(e){return e.activeColumn?create_if_block$9:e.multiSelection?create_if_block_5:create_if_block_6}var Me=ke(t),Te=Me(e,t);function Ee(t){e.sort(t,"-")}for(var Ce=t.columns,Se=[],$e=0;$e<Ce.length;$e+=1)Se[$e]=create_each_block_1$4(e,assign(assign({},t),{each_value_1:Ce,col:Ce[$e],col_index:$e}));function De(){be=!0,e.set({search:j.value}),be=!1}function Le(t){e.keyPress(t)}var Ae=t.searchResults.length>0&&create_if_block_7(e,t),Ye=t.search&&create_if_block_8(e,t),He={};"chartData"in t&&(He.data=t.chartData,ye.data=!0),"transpose"in t.$metadata.data&&(He.transpose=t.$metadata.data.transpose,ye.transpose=!0),"horizontal-header"in t.$metadata.data&&(He.firstRowIsHeader=t.$metadata.data["horizontal-header"],ye.firstRowIsHeader=!0),"fixedColumnsLeft"in t&&(He.fixedColumnsLeft=t.fixedColumnsLeft,ye.fixedColumnsLeft=!0),"activeColumn"in t&&(He.activeColumn=t.activeColumn,ye.activeColumn=!0),"readonly"in t&&(He.readonly=t.readonly,ye.readonly=!0),"sorting"in t&&(He.sorting=t.sorting,ye.sorting=!0),"search"in t&&(He.search=t.search,ye.search=!0),"searchResults"in t&&(He.searchResults=t.searchResults,ye.searchResults=!0),"searchIndex"in t&&(He.searchIndex=t.searchIndex,ye.searchIndex=!0),"multiSelection"in t&&(He.multiSelection=t.multiSelection,ye.multiSelection=!0);var Fe=new Handsontable_1({root:e.root,data:He,_bind:function(t,n){var r=e.get(),a={},o={};!ye.data&&t.data&&(a.chartData=n.data),!ye.transpose&&t.transpose&&(r.$metadata.data.transpose=n.transpose,o.metadata=r.$metadata),!ye.firstRowIsHeader&&t.firstRowIsHeader&&(r.$metadata.data["horizontal-header"]=n.firstRowIsHeader,o.metadata=r.$metadata),!ye.fixedColumnsLeft&&t.fixedColumnsLeft&&(a.fixedColumnsLeft=n.fixedColumnsLeft),!ye.activeColumn&&t.activeColumn&&(a.activeColumn=n.activeColumn),!ye.readonly&&t.readonly&&(a.readonly=n.readonly),!ye.sorting&&t.sorting&&(a.sorting=n.sorting),!ye.search&&t.search&&(a.search=n.search),!ye.searchResults&&t.searchResults&&(a.searchResults=n.searchResults),!ye.searchIndex&&t.searchIndex&&(a.searchIndex=n.searchIndex),!ye.multiSelection&&t.multiSelection&&(a.multiSelection=n.multiSelection),e.store.set(o),e._set(a),ye={}}});function Re(t){e.toggleTranspose()}function Be(t){e.addComputedColumn()}function Ie(t){e.revertChanges()}return e.root._beforecreate.push(function(){Fe._bind({data:1,transpose:1,firstRowIsHeader:1,fixedColumnsLeft:1,activeColumn:1,readonly:1,sorting:1,search:1,searchResults:1,searchIndex:1,multiSelection:1},Fe.get())}),Fe.on("resetSort",function(t){e.set({sortBy:"-"})}),e.refs.hot=Fe,{c:function(){n=createElement("div"),r=createElement("div"),a=createElement("div"),o=createElement("div"),Te.c(),i=createText("\n\n                "),s=createElement("hr"),c=createText("\n\n                "),l=createElement("div"),u=createElement("a"),d=createElement("i"),h=createText(" "),f=createText(pe),p=createText("\n                    "),m=createElement("a"),_=createText(me),v=createText(" "),g=createElement("i"),b=createText("\n        "),y=createElement("div"),N=createElement("div"),x=createElement("noscript"),w=createText(" "),k=createElement("img"),M=createText("\n            "),T=createElement("div"),E=createElement("div"),C=createElement("div"),S=createElement("button"),$=createElement("noscript"),D=createText("… "),L=createElement("span"),A=createText("\n                        "),Y=createElement("ul"),H=createElement("li"),F=createElement("a");for(var e=0;e<Se.length;e+=1)Se[e].c();B=createText("\n\n                "),I=createElement("div"),U=createElement("i"),O=createText("\n                    "),P=createElement("div"),j=createElement("input"),W=createText("\n                        "),Ae&&Ae.c(),q=createText("\n\n                    "),Ye&&Ye.c(),G=createText("\n\n            "),Fe._fragment.c(),J=createText("\n\n            "),X=createElement("div"),K=createElement("button"),Z=createElement("img"),Q=createText(" "),ee=createText(Ne),te=createText("\n\n                "),ne=createElement("button"),re=createElement("i"),ae=createText(" "),oe=createText(xe),ie=createText("…"),se=createText("\n\n                "),ce=createElement("button"),le=createElement("i"),ue=createText(" "),de=createText(we),he=createText("..."),this.h()},h:function(){d.className="icon-chevron-left",u.className="btn submit",u.href="upload",g.className="icon-chevron-right icon-white",m.href="visualize",m.className="submit btn btn-primary",m.id="describe-proceed",l.className="btn-group",o.className="sidebar",a.className="span4",k.src="/static/img/arrow.svg",N.className="help svelte-1e3afn5",L.className="caret",S.className="btn dropdown-toggle",S.dataset.toggle="dropdown",addListener(F,"click",Ee),F.href="#s",F.className="svelte-1e3afn5",H.className=R="-"==t.sortBy?"active":"",Y.className="dropdown-menu sort-menu",C.className="btn-group",E.className="sort-box svelte-1e3afn5",U.className="im im-magnifier svelte-1e3afn5",addListener(j,"input",De),addListener(j,"keypress",Le),j.autocomplete="screw-you-google-chrome",setAttribute(j,"type","search"),j.placeholder=__("Search data table"),j.className=z=(t.searchResults.length>0?"with-results":"")+" search-query svelte-1e3afn5",P.className=V=t.searchResults.length>0?"input-append":"",I.className="search-box form-search svelte-1e3afn5",T.className="pull-right",setStyle(T,"margin-bottom","10px"),Z.src="/static/css/chart-editor/transpose.png",Z.className="svelte-1e3afn5",addListener(K,"click",Re),K.className="btn transpose svelte-1e3afn5",re.className="fa fa-calculator",addListener(ne,"click",Be),ne.className="btn computed-columns",le.className="fa fa-undo",addListener(ce,"click",Ie),ce.className=fe="btn "+(t.has_changes?"":"disabled")+" svelte-1e3afn5",ce.id="reset-data-changes",X.className="buttons below-table pull-right svelte-1e3afn5",y.className="span8 svelte-1e3afn5",r.className="row",n.className="chart-editor"},m:function(R,z){insertNode(n,R,z),appendNode(r,n),appendNode(a,r),appendNode(o,a),Te.m(o,null),appendNode(i,o),appendNode(s,o),appendNode(c,o),appendNode(l,o),appendNode(u,l),appendNode(d,u),appendNode(h,u),appendNode(f,u),appendNode(p,l),appendNode(m,l),appendNode(_,m),appendNode(v,m),appendNode(g,m),appendNode(b,r),appendNode(y,r),appendNode(N,y),appendNode(x,N),x.insertAdjacentHTML("beforebegin",_e),appendNode(w,N),appendNode(k,N),appendNode(M,y),appendNode(T,y),appendNode(E,T),appendNode(C,E),appendNode(S,C),appendNode($,S),$.insertAdjacentHTML("beforebegin",ve),appendNode(D,S),appendNode(L,S),appendNode(A,C),appendNode(Y,C),appendNode(H,Y),appendNode(F,H),F.innerHTML=ge;for(var V=0;V<Se.length;V+=1)Se[V].m(Y,null);e.refs.sortDropdownGroup=C,appendNode(B,T),appendNode(I,T),appendNode(U,I),appendNode(O,I),appendNode(P,I),appendNode(j,P),e.refs.search=j,j.value=t.search,appendNode(W,P),Ae&&Ae.m(P,null),appendNode(q,I),Ye&&Ye.m(I,null),appendNode(G,y),Fe._mount(y,null),appendNode(J,y),appendNode(X,y),appendNode(K,X),appendNode(Z,K),appendNode(Q,K),appendNode(ee,K),appendNode(te,X),appendNode(ne,X),appendNode(re,ne),appendNode(ae,ne),appendNode(oe,ne),appendNode(ie,ne),appendNode(se,X),appendNode(ce,X),appendNode(le,ce),appendNode(ue,ce),appendNode(de,ce),appendNode(he,ce)},p:function(t,n){Me===(Me=ke(n))&&Te?Te.p(t,n):(Te.u(),Te.d(),(Te=Me(e,n)).c(),Te.m(o,i)),t.sortBy&&R!==(R="-"==n.sortBy?"active":"")&&(H.className=R);var r=n.columns;if(t.columns||t.sortBy){for(var a=0;a<r.length;a+=1){var s=assign(assign({},n),{each_value_1:r,col:r[a],col_index:a});Se[a]?Se[a].p(t,s):(Se[a]=create_each_block_1$4(e,s),Se[a].c(),Se[a].m(Y,null))}for(;a<Se.length;a+=1)Se[a].u(),Se[a].d();Se.length=r.length}be||(j.value=n.search),t.searchResults&&z!==(z=(n.searchResults.length>0?"with-results":"")+" search-query svelte-1e3afn5")&&(j.className=z),n.searchResults.length>0?Ae||((Ae=create_if_block_7(e,n)).c(),Ae.m(P,null)):Ae&&(Ae.u(),Ae.d(),Ae=null),t.searchResults&&V!==(V=n.searchResults.length>0?"input-append":"")&&(P.className=V),n.search?Ye?Ye.p(t,n):((Ye=create_if_block_8(e,n)).c(),Ye.m(I,null)):Ye&&(Ye.u(),Ye.d(),Ye=null);var c={};!ye.data&&t.chartData&&(c.data=n.chartData,ye.data=!0),!ye.transpose&&t.$metadata&&(c.transpose=n.$metadata.data.transpose,ye.transpose=!0),!ye.firstRowIsHeader&&t.$metadata&&(c.firstRowIsHeader=n.$metadata.data["horizontal-header"],ye.firstRowIsHeader=!0),!ye.fixedColumnsLeft&&t.fixedColumnsLeft&&(c.fixedColumnsLeft=n.fixedColumnsLeft,ye.fixedColumnsLeft=!0),!ye.activeColumn&&t.activeColumn&&(c.activeColumn=n.activeColumn,ye.activeColumn=!0),!ye.readonly&&t.readonly&&(c.readonly=n.readonly,ye.readonly=!0),!ye.sorting&&t.sorting&&(c.sorting=n.sorting,ye.sorting=!0),!ye.search&&t.search&&(c.search=n.search,ye.search=!0),!ye.searchResults&&t.searchResults&&(c.searchResults=n.searchResults,ye.searchResults=!0),!ye.searchIndex&&t.searchIndex&&(c.searchIndex=n.searchIndex,ye.searchIndex=!0),!ye.multiSelection&&t.multiSelection&&(c.multiSelection=n.multiSelection,ye.multiSelection=!0),Fe._set(c),ye={},t.has_changes&&fe!==(fe="btn "+(n.has_changes?"":"disabled")+" svelte-1e3afn5")&&(ce.className=fe)},u:function(){detachBefore(x),detachBefore($),F.innerHTML="",detachNode(n),Te.u();for(var e=0;e<Se.length;e+=1)Se[e].u();Ae&&Ae.u(),Ye&&Ye.u()},d:function(){Te.d(),removeListener(F,"click",Ee),destroyEach(Se),e.refs.sortDropdownGroup===C&&(e.refs.sortDropdownGroup=null),removeListener(j,"input",De),removeListener(j,"keypress",Le),e.refs.search===j&&(e.refs.search=null),Ae&&Ae.d(),Ye&&Ye.d(),Fe.destroy(!1),e.refs.hot===Fe&&(e.refs.hot=null),removeListener(K,"click",Re),removeListener(ne,"click",Be),removeListener(ce,"click",Ie)}}}function create_if_block_3$1(e,t){var n,r,a,o,i=__("describe / edit-formula");function s(t){e.force(t,!1)}return{c:function(){n=createElement("button"),r=createElement("i"),a=createText(" "),o=createText(i),this.h()},h:function(){r.className="fa  fa-chevron-left",addListener(n,"click",s),n.className="btn"},m:function(e,t){insertNode(n,e,t),appendNode(r,n),appendNode(a,n),appendNode(o,n)},u:function(){detachNode(n)},d:function(){removeListener(n,"click",s)}}}function create_if_block_1$6(e,t){var n,r,a,o={},i=__("describe / edit-format"),s={};"customColumn"in t&&(s.column=t.customColumn,o.column=!0),"columns"in t&&(s.columns=t.columns,o.columns=!0);var c=new ComputedColumnEditor({root:e.root,data:s,_bind:function(t,n){e.get();var r={};!o.column&&t.column&&(r.customColumn=n.column),!o.columns&&t.columns&&(r.columns=n.columns),e._set(r),o={}}});function l(t){e.force(t,!0)}return e.root._beforecreate.push(function(){c._bind({column:1,columns:1},c.get())}),c.on("updateTable",function(t){e.refs.hot.update()}),c.on("renderTable",function(t){e.refs.hot.render()}),c.on("unselect",function(t){e.set({activeColumn:!1})}),{c:function(){c._fragment.c(),n=createText("\n\n                "),r=createElement("button"),a=createText(i),this.h()},h:function(){addListener(r,"click",l),r.className="btn"},m:function(e,t){c._mount(e,t),insertNode(n,e,t),insertNode(r,e,t),appendNode(a,r)},p:function(e,t){var n={};!o.column&&e.customColumn&&(n.column=t.customColumn,o.column=!0),!o.columns&&e.columns&&(n.columns=t.columns,o.columns=!0),c._set(n),o={}},u:function(){c._unmount(),detachNode(n),detachNode(r)},d:function(){c.destroy(!1),removeListener(r,"click",l)}}}function create_if_block_2$3(e,t){var n,r,a={},o={};"columnFormat"in t&&(o.column=t.columnFormat,a.column=!0),"columns"in t&&(o.columns=t.columns,a.columns=!0);var i=new CustomColumnFormat({root:e.root,data:o,_bind:function(t,n){e.get();var r={};!a.column&&t.column&&(r.columnFormat=n.column),!a.columns&&t.columns&&(r.columns=n.columns),e._set(r),a={}}});e.root._beforecreate.push(function(){i._bind({column:1,columns:1},i.get())}),i.on("updateTable",function(t){e.refs.hot.update()}),i.on("renderTable",function(t){e.refs.hot.render()});var s=t.columnFormat.isComputed&&create_if_block_3$1(e,t);return{c:function(){i._fragment.c(),n=createText("\n\n                    "),s&&s.c(),r=createComment()},m:function(e,t){i._mount(e,t),insertNode(n,e,t),s&&s.m(e,t),insertNode(r,e,t)},p:function(t,n){var o={};!a.column&&t.columnFormat&&(o.column=n.columnFormat,a.column=!0),!a.columns&&t.columns&&(o.columns=n.columns,a.columns=!0),i._set(o),a={},n.columnFormat.isComputed?s||((s=create_if_block_3$1(e,n)).c(),s.m(r.parentNode,r)):s&&(s.u(),s.d(),s=null)},u:function(){i._unmount(),detachNode(n),s&&s.u(),detachNode(r)},d:function(){i.destroy(!1),s&&s.d()}}}function create_if_block_4(e,t){var n={},r={};"activeValues"in t&&(r.values=t.activeValues,n.values=!0),"activeFormat"in t&&(r.format=t.activeFormat,n.format=!0);var a=new Histogram({root:e.root,data:r,_bind:function(t,r){e.get();var a={};!n.values&&t.values&&(a.activeValues=r.values),!n.format&&t.format&&(a.activeFormat=r.format),e._set(a),n={}}});return e.root._beforecreate.push(function(){a._bind({values:1,format:1},a.get())}),{c:function(){a._fragment.c()},m:function(e,t){a._mount(e,t)},p:function(e,t){var r={};!n.values&&e.activeValues&&(r.values=t.activeValues,n.values=!0),!n.format&&e.activeFormat&&(r.format=t.activeFormat,n.format=!0),a._set(r),n={}},u:function(){a._unmount()},d:function(){a.destroy(!1)}}}function create_each_block$8(e,t){var n,r,a,o,i,s,c=t.locale,l=(t.each_value,t.locale_index,c.label),u=c.value;return{c:function(){n=createElement("option"),r=createText(l),a=createText(" ("),o=createText(u),i=createText(")"),this.h()},h:function(){n.__value=s=c.value,n.value=n.__value},m:function(e,t){insertNode(n,e,t),appendNode(r,n),appendNode(a,n),appendNode(o,n),appendNode(i,n)},p:function(e,t){c=t.locale,t.each_value,t.locale_index,e.$locales&&l!==(l=c.label)&&(r.data=l),e.$locales&&u!==(u=c.value)&&(o.data=u),e.$locales&&s!==(s=c.value)&&(n.__value=s),n.value=n.__value},u:function(){detachNode(n)},d:noop}}function create_if_block$9(e,t){var n,r;function a(e){return e.customColumn?create_if_block_1$6:e.columnFormat?create_if_block_2$3:null}var o=a(t),i=o&&o(e,t),s="number"==t.activeColumn.type()&&create_if_block_4(e,t);return{c:function(){i&&i.c(),n=createText("\n\n                "),s&&s.c(),r=createComment()},m:function(e,t){i&&i.m(e,t),insertNode(n,e,t),s&&s.m(e,t),insertNode(r,e,t)},p:function(t,c){o===(o=a(c))&&i?i.p(t,c):(i&&(i.u(),i.d()),(i=o&&o(e,c))&&i.c(),i&&i.m(n.parentNode,n)),"number"==c.activeColumn.type()?s?s.p(t,c):((s=create_if_block_4(e,c)).c(),s.m(r.parentNode,r)):s&&(s.u(),s.d(),s=null)},u:function(){i&&i.u(),detachNode(n),s&&s.u(),detachNode(r)},d:function(){i&&i.d(),s&&s.d()}}}function create_if_block_5(e,t){var n,r,a,o,i,s,c,l,u,d,h,f,p,m,_=__("describe / show-hide-multi"),v=__("describe / show-selected"),g=__("describe / hide-selected");function b(t){var n=e.get();e.hideMultiple(n.multiSelection,!1)}function y(t){var n=e.get();e.hideMultiple(n.multiSelection,!0)}return{c:function(){n=createElement("h3"),r=createText(_),a=createText("\n\n                "),o=createElement("ul"),i=createElement("li"),s=createElement("button"),c=createElement("i"),l=createText(" "),u=createText(v),d=createElement("li"),h=createElement("button"),f=createElement("i"),p=createText(" "),m=createText(g),this.h()},h:function(){n.className="first",c.className="fa fa-eye",addListener(s,"click",b),s.className="btn",setStyle(i,"margin-bottom","5px"),f.className="fa fa-eye-slash",addListener(h,"click",y),h.className="btn",o.className="unstyled"},m:function(e,t){insertNode(n,e,t),appendNode(r,n),insertNode(a,e,t),insertNode(o,e,t),appendNode(i,o),appendNode(s,i),appendNode(c,s),appendNode(l,s),appendNode(u,s),appendNode(d,o),appendNode(h,d),appendNode(f,h),appendNode(p,h),appendNode(m,h)},p:noop,u:function(){detachNode(n),detachNode(a),detachNode(o)},d:function(){removeListener(s,"click",b),removeListener(h,"click",y)}}}function create_if_block_6(e,t){var n,r,a,o,i,s,c,l,u,d,h,f,p=__("Make sure the data looks right"),m=__("describe / data-looks-right"),_={},v=__("describe / locale-select / hed"),g=__("describe / locale-select / body"),b=!1,y={label:__("First row as label")};"horizontal-header"in t.$metadata.data&&(y.value=t.$metadata.data["horizontal-header"],_.value=!0);var N=new Checkbox({root:e.root,data:y,_bind:function(t,n){var r=e.get(),a={};!_.value&&t.value&&(r.$metadata.data["horizontal-header"]=n.value,a.metadata=r.$metadata),e.store.set(a),_={}}});e.root._beforecreate.push(function(){N._bind({value:1},N.get())});for(var x=t.$locales,w=[],k=0;k<x.length;k+=1)w[k]=create_each_block$8(e,assign(assign({},t),{each_value:x,locale:x[k],locale_index:k}));function M(){b=!0,e.store.set({language:selectValue(f)}),b=!1}return{c:function(){n=createElement("h3"),r=createText(p),a=createText("\n\n                "),o=createElement("p"),i=createText("\n\n                "),N._fragment.c(),s=createText("\n\n                "),c=createElement("h4"),l=createText(v),u=createText("\n\n                "),d=createElement("p"),h=createText("\n\n                "),f=createElement("select");for(var e=0;e<w.length;e+=1)w[e].c();this.h()},h:function(){n.className="first",addListener(f,"change",M),"$language"in t||e.root._beforecreate.push(M)},m:function(e,p){insertNode(n,e,p),appendNode(r,n),insertNode(a,e,p),insertNode(o,e,p),o.innerHTML=m,insertNode(i,e,p),N._mount(e,p),insertNode(s,e,p),insertNode(c,e,p),appendNode(l,c),insertNode(u,e,p),insertNode(d,e,p),d.innerHTML=g,insertNode(h,e,p),insertNode(f,e,p);for(var _=0;_<w.length;_+=1)w[_].m(f,null);selectOption(f,t.$language)},p:function(t,n){var r={};r.label=__("First row as label"),!_.value&&t.$metadata&&(r.value=n.$metadata.data["horizontal-header"],_.value=!0),N._set(r),_={};var a=n.$locales;if(t.$locales){for(var o=0;o<a.length;o+=1){var i=assign(assign({},n),{each_value:a,locale:a[o],locale_index:o});w[o]?w[o].p(t,i):(w[o]=create_each_block$8(e,i),w[o].c(),w[o].m(f,null))}for(;o<w.length;o+=1)w[o].u(),w[o].d();w.length=a.length}b||selectOption(f,n.$language)},u:function(){o.innerHTML="",d.innerHTML="",detachNode(n),detachNode(a),detachNode(o),detachNode(i),N._unmount(),detachNode(s),detachNode(c),detachNode(u),detachNode(d),detachNode(h),detachNode(f);for(var e=0;e<w.length;e+=1)w[e].u()},d:function(){N.destroy(!1),destroyEach(w),removeListener(f,"change",M)}}}function create_each_block_1$4(e,t){var n,r,a,o,i,s,c,l,u,d,h,f=t.col,p=(t.each_value_1,t.col_index,f.title());return{c:function(){n=createElement("li"),r=createElement("a"),a=createElement("i"),i=createText("\n                                "),s=createElement("i"),l=createText("   "),u=createText(p),this.h()},h:function(){addListener(a,"click",click_handler$3),a.className=o="fa fa-sort-"+("text"==f.type()?"alpha":"amount")+"-asc fa-fw svelte-1e3afn5",a._svelte={component:e,each_value_1:t.each_value_1,col_index:t.col_index},addListener(s,"click",click_handler_1),s.className=c="fa fa-sort-"+("text"==f.type()?"alpha":"amount")+"-desc fa-fw svelte-1e3afn5",s._svelte={component:e,each_value_1:t.each_value_1,col_index:t.col_index},addListener(r,"click",click_handler_2),r.href=d="#/"+f.name(),r.className="svelte-1e3afn5",r._svelte={component:e,each_value_1:t.each_value_1,col_index:t.col_index},n.className=h=f.name()==t.sortBy?"active":""},m:function(e,t){insertNode(n,e,t),appendNode(r,n),appendNode(a,r),appendNode(i,r),appendNode(s,r),appendNode(l,r),appendNode(u,r)},p:function(e,t){f=t.col,t.each_value_1,t.col_index,e.columns&&o!==(o="fa fa-sort-"+("text"==f.type()?"alpha":"amount")+"-asc fa-fw svelte-1e3afn5")&&(a.className=o),a._svelte.each_value_1=t.each_value_1,a._svelte.col_index=t.col_index,e.columns&&c!==(c="fa fa-sort-"+("text"==f.type()?"alpha":"amount")+"-desc fa-fw svelte-1e3afn5")&&(s.className=c),s._svelte.each_value_1=t.each_value_1,s._svelte.col_index=t.col_index,e.columns&&p!==(p=f.title())&&(u.data=p),e.columns&&d!==(d="#/"+f.name())&&(r.href=d),r._svelte.each_value_1=t.each_value_1,r._svelte.col_index=t.col_index,(e.columns||e.sortBy)&&h!==(h=f.name()==t.sortBy?"active":"")&&(n.className=h)},u:function(){detachNode(n)},d:function(){removeListener(a,"click",click_handler$3),removeListener(s,"click",click_handler_1),removeListener(r,"click",click_handler_2)}}}function create_if_block_7(e,t){var n,r,a,o;function i(t){e.nextResult(-1)}function s(t){e.nextResult(1)}return{c:function(){n=createElement("div"),(r=createElement("button")).innerHTML='<i class="fa fa-chevron-up"></i>',a=createText("\n                          "),(o=createElement("button")).innerHTML='<i class="fa fa-chevron-down"></i>',this.h()},h:function(){addListener(r,"click",i),r.className="btn svelte-1e3afn5",addListener(o,"click",s),o.className="btn svelte-1e3afn5",n.className="btn-group"},m:function(e,t){insertNode(n,e,t),appendNode(r,n),appendNode(a,n),appendNode(o,n)},u:function(){detachNode(n)},d:function(){removeListener(r,"click",i),removeListener(o,"click",s)}}}function create_if_block_9(e,t){var n,r,a,o,i,s,c,l=t.searchIndexSafe+1,u=__("describe / search / of"),d=t.searchResults.length,h=__("describe / search / results");return{c:function(){n=createText(l),r=createText("\n                            "),a=createText(u),o=createText("\n                            "),i=createText(d),s=createText("\n                            "),c=createText(h)},m:function(e,t){insertNode(n,e,t),insertNode(r,e,t),insertNode(a,e,t),insertNode(o,e,t),insertNode(i,e,t),insertNode(s,e,t),insertNode(c,e,t)},p:function(e,t){e.searchIndexSafe&&l!==(l=t.searchIndexSafe+1)&&(n.data=l),e.searchResults&&d!==(d=t.searchResults.length)&&(i.data=d)},u:function(){detachNode(n),detachNode(r),detachNode(a),detachNode(o),detachNode(i),detachNode(s),detachNode(c)},d:noop}}function create_if_block_10(e,t){var n,r=__("describe / search / no-matches");return{c:function(){n=createText(r)},m:function(e,t){insertNode(n,e,t)},p:noop,u:function(){detachNode(n)},d:noop}}function create_if_block_8(e,t){var n;function r(e){return e.searchResults.length>0?create_if_block_9:e.search?create_if_block_10:null}var a=r(t),o=a&&a(e,t);return{c:function(){n=createElement("div"),o&&o.c(),this.h()},h:function(){n.className="results svelte-1e3afn5"},m:function(e,t){insertNode(n,e,t),o&&o.m(n,null)},p:function(t,i){a===(a=r(i))&&o?o.p(t,i):(o&&(o.u(),o.d()),(o=a&&a(e,i))&&o.c(),o&&o.m(n,null))},u:function(){detachNode(n),o&&o.u()},d:function(){o&&o.d()}}}function click_handler$3(e){var t=this._svelte.component,n=this._svelte.each_value_1[this._svelte.col_index];t.sort(e,n.name(),!0)}function click_handler_1(e){var t=this._svelte.component,n=this._svelte.each_value_1[this._svelte.col_index];t.sort(e,n.name(),!1)}function click_handler_2(e){var t=this._svelte.component,n=this._svelte.each_value_1[this._svelte.col_index];t.sort(e,n.name(),!0)}function DescribeStep(e){init(this,e),this.refs={},this._state=assign(assign(this.store._init(["dataset","metadata","language","locales"]),data$15()),e.data),this.store._add(this,["dataset","metadata","language","locales"]),this._recompute({searchIndex:1,searchResults:1,activeColumn:1,forceColumnFormat:1,$dataset:1,sortBy:1,sortDir:1},this._state),this._handlers.state=[onstate],this._handlers.destroy=[removeFromStore];var t=this;e.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=create_main_fragment$16(this,this._state),this.root._oncreate.push(function(){var e={searchIndex:1,searchResults:1,activeColumn:1,forceColumnFormat:1,$dataset:1,sortBy:1,sortDir:1,customColumn:1,columns:1,columnFormat:1,activeValues:1,activeFormat:1,multiSelection:1,$metadata:1,$language:1,$locales:1,search:1,searchIndexSafe:1,chartData:1,fixedColumnsLeft:1,readonly:1,sorting:1,has_changes:1};onstate.call(t,{changed:e,current:t._state}),oncreate$7.call(t),t.fire("update",{changed:e,current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),this._lock=!0,callAll(this._beforecreate),callAll(this._oncreate),callAll(this._aftercreate),this._lock=!1)}function data$16(){return{visible:!1}}assign(DescribeStep.prototype,proto),assign(DescribeStep.prototype,methods$10),DescribeStep.prototype._recompute=function(e,t){(e.searchIndex||e.searchResults)&&this._differs(t.searchIndexSafe,t.searchIndexSafe=searchIndexSafe(t))&&(e.searchIndexSafe=!0),(e.activeColumn||e.forceColumnFormat)&&(this._differs(t.customColumn,t.customColumn=customColumn(t))&&(e.customColumn=!0),this._differs(t.columnFormat,t.columnFormat=columnFormat(t))&&(e.columnFormat=!0)),e.activeColumn&&(this._differs(t.activeValues,t.activeValues=activeValues(t))&&(e.activeValues=!0),this._differs(t.activeFormat,t.activeFormat=activeFormat(t))&&(e.activeFormat=!0)),(e.activeColumn||e.$dataset)&&this._differs(t.columns,t.columns=columns(t))&&(e.columns=!0),(e.sortBy||e.sortDir)&&this._differs(t.sorting,t.sorting=sorting(t))&&(e.sorting=!0)};var methods$11={show:function(){var e=this,t=setTimeout(function(){e.set({visible:!0})},400);this.set({t:t})},hide:function(){var e=this.get().t;clearTimeout(e),this.set({visible:!1})}};function create_main_fragment$17(e,t){var n,r,a;function o(e){return e.visible?create_if_block$10:create_if_block_1$7}var i=o(t),s=i(e,t),c=t.visible&&create_if_block_2$4(e,t);function l(t){e.show()}function u(t){e.hide()}return{c:function(){n=createElement("div"),r=createElement("span"),s.c(),a=createText("\n    "),c&&c.c(),this.h()},h:function(){r.className="svelte-1mkn8ur",addListener(n,"mouseenter",l),addListener(n,"mouseleave",u),n.className="help svelte-1mkn8ur"},m:function(e,t){insertNode(n,e,t),appendNode(r,n),s.m(r,null),appendNode(a,n),c&&c.m(n,null)},p:function(t,a){i!==(i=o(a))&&(s.u(),s.d(),(s=i(e,a)).c(),s.m(r,null)),a.visible?c||((c=create_if_block_2$4(e,a)).c(),c.m(n,null)):c&&(c.u(),c.d(),c=null)},u:function(){detachNode(n),s.u(),c&&c.u()},d:function(){s.d(),c&&c.d(),removeListener(n,"mouseenter",l),removeListener(n,"mouseleave",u)}}}function create_if_block$10(e,t){var n;return{c:function(){n=createElement("i"),this.h()},h:function(){n.className="im im-graduation-hat svelte-1mkn8ur"},m:function(e,t){insertNode(n,e,t)},u:function(){detachNode(n)},d:noop}}function create_if_block_1$7(e,t){var n;return{c:function(){n=createText("?")},m:function(e,t){insertNode(n,e,t)},u:function(){detachNode(n)},d:noop}}function create_if_block_2$4(e,t){var n,r=e._slotted.default;return{c:function(){n=createElement("div"),this.h()},h:function(){n.className="content svelte-1mkn8ur"},m:function(e,t){insertNode(n,e,t),r&&appendNode(r,n)},u:function(){detachNode(n),r&&reinsertChildren(n,r)},d:noop}}function Help(e){init(this,e),this._state=assign(data$16(),e.data),this._slotted=e.slots||{},this.slots={},this._fragment=create_main_fragment$17(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}function data$17(){return{loading:!1}}function create_main_fragment$18(e,t){var n,r=t.loading&&create_if_block$11(e,t);return{c:function(){r&&r.c(),n=createComment()},m:function(e,t){r&&r.m(e,t),insertNode(n,e,t)},p:function(t,a){a.loading?r||((r=create_if_block$11(e,a)).c(),r.m(n.parentNode,n)):r&&(r.u(),r.d(),r=null)},u:function(){r&&r.u(),detachNode(n)},d:function(){r&&r.d()}}}function create_if_block$11(e,t){var n;return{c:function(){(n=createElement("p")).innerHTML='<i class="fa fa-spinner fa-pulse fa-fw"></i> loading...',this.h()},h:function(){n.className="mini-help"},m:function(e,t){insertNode(n,e,t)},u:function(){detachNode(n)},d:noop}}function Action(e){init(this,e),this._state=assign(data$17(),e.data),this._fragment=create_main_fragment$18(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}assign(Help.prototype,proto),assign(Help.prototype,methods$11),assign(Action.prototype,proto);var widths=[100,200,300,400,500,700,800,900,1e3];function computeEmbedHeights(){var e={},t=window.$,n=t(t("#iframe-vis")[0].contentDocument),r=t("h1",n).height()+t(".chart-intro",n).height()+t(".dw-chart-notes",n).height(),a=t("#iframe-vis").height();return widths.forEach(function(o){n.find("h1,.chart-intro,.dw-chart-notes").css("width",o+"px");var i=t("h1",n).height()+t(".chart-intro",n).height()+t(".dw-chart-notes",n).height();e[o]=a+(i-r)}),n.find("h1,.chart-intro,.dw-chart-notes").css("width","auto"),e}var fakeProgress=0,initial_auto_publish=!0;function shareUrl(e){var t=e.shareurl_type,n=e.$id,r=e.$publicUrl,a=e.plugin_shareurls;if(!e.published)return"https://www.datawrapper.de/...";if("default"==t)return r;var o="";return a.forEach(function(e){e.id==t&&(o=e.url.replace(/%chart_id%/g,n))}),o}function embedCode(e){var t=e.embed_type,n=e.$metadata,r=e.$publicUrl;return n?n.publish&&!n.publish["embed-codes"]?'<iframe src="'+r+'" width="100%" height="'+n.publish["embed-height"]+'" scrolling="no" frameborder="0" allowtransparency="true"></iframe>':n.publish["embed-codes"]["embed-method-"+t]:""}function sortedChartActions(e){var t=e.chartActions,n=e.$actions;return t.concat(n).filter(function(e){return"publish-s3"!=e.id}).sort(function(e,t){return e.order-t.order})}function data_1(){return{active_action:"",embed_templates:[],plugin_shareurls:[],published:!1,publishing:!1,needs_republish:!1,publish_error:!1,auto_publish:!1,progress:0,shareurl_type:"default",embed_type:"responsive",copy_success:!1,Action:Action,chartActions:[{id:"duplicate",icon:"code-fork",title:__("Duplicate"),order:500,action:"duplicate"}],publishHed:"",publishIntro:"",beforeExport:null,exportHed:__("publish / export-duplicate"),exportIntro:__("publish / export-duplicate / intro")}}var methods$12={publish:function(){var e=this;this.set({publishing:!0,progress:0,publish_error:!1});var t=this.store;t.setMetadata("publish.embed-heights",computeEmbedHeights(t,this.get().embed_templates)),trackEvent("Chart Editor","publish"),t.store(function(){postJSON("/api/charts/"+t.get().id+"/publish",null,function(t){"ok"==t.status?(e.publishFinished(t.data),trackEvent("Chart Editor","publish-success")):(trackEvent("Chart Editor","publish-error",t.message),e.set({publish_error:t.message}))}),fakeProgress=0,e.updateStatus()})},updateProgressBar:function(e){this.refs.bar&&(this.refs.bar.style.width=(100*e).toFixed()+"%")},updateStatus:function(){var e=this,t=this.store;fakeProgress+=.05,getJSON("/api/charts/"+t.get().id+"/publish/status",function(t){t&&(t=+t/100+fakeProgress,e.set({progress:Math.min(1,t)})),e.get().publishing&&setTimeout(function(){e.updateStatus()},400)})},publishFinished:function(e){var t=this;this.set({progress:1,published:!0,needs_republish:!1}),this.store.set({lastEditStep:5}),setTimeout(function(){return t.set({publishing:!1})},500),this.store.set(e)},copy:function(){var e=this;e.refs.embedInput.select();try{document.execCommand("copy")&&(trackEvent("Chart Editor","embedcode-copy"),e.set({copy_success:!0}),setTimeout(function(){return e.set({copy_success:!1})},300))}catch(e){}},select:function(e,t){var n=this;t.preventDefault();var r=this.get().active_action;if(e.id==r)return this.set({active_action:"",Action:Action});this.set({active_action:e.id}),e.mod?e.mod.App?this.set({Action:e.mod.App}):(this.set({Action:Action}),this.refs.action.set({loading:!0}),e.mod.css&&loadStylesheet(e.mod.css),loadScript(e.mod.src,function(){setTimeout(function(){require([e.mod.id],function(t){Object.assign(e.mod,t),n.set({Action:e.mod.App}),t.init&&t.init(n.refs.action),e.mod.data&&n.refs.action.set(e.mod.data)})},200)})):e.action&&this[e.action]&&(this.set({Action:Action}),this[e.action]())},duplicate:function(){var e=this.store.get().id;trackEvent("Chart Editor","duplicate"),postJSON("/api/charts/"+e+"/copy",null,function(e){"ok"==e.status?window.location.href="/edit/"+e.data.id+"/visualize":console.warn(data)})}};function oncreate$8(){var e=this.store.get().lastEditStep;this.set({published:e>4})}function onstate$1(e){var t=e.changed,n=e.current,r=window.dw&&window.dw.backend&&window.dw.backend.setUserData;if(t.publishing&&n.publishing&&this.updateProgressBar(n.progress),t.progress&&this.updateProgressBar(n.progress),t.embed_type&&r){var a=window.dw.backend.__userData;if(!n.embed_type||!a)return;a.embed_type=n.embed_type,window.dw.backend.setUserData(a)}if(t.shareurl_type&&r){var o=window.dw.backend.__userData;if(!n.shareurl_type||!o)return;o.shareurl_type=n.shareurl_type,window.dw.backend.setUserData(o)}t.published&&window.document.querySelector(".dw-create-publish .publish-step").classList[n.published?"add":"remove"]("is-published"),t.auto_publish&&n.auto_publish&&initial_auto_publish&&(this.publish(),initial_auto_publish=!1,window.history.replaceState("","",location.pathname))}function create_main_fragment$19(e,t){var n,r,a,o,i,s,c,l,u,d,h,f,p,m,_,v,g,b,y,N,x,w,k,M,T,E,C,S,$,D,L,A,Y,H,F,R,B,I,U,O,P,j,z,W,V,q,G,J,X,K,Z,Q,ee,te,ne,re,ae,oe,ie,se,ce,le,ue,de,he,fe,pe,me,_e,ve,ge,be,ye,Ne=__("publish / share-embed"),xe=__("publish / share-url"),we=__("publish / share-url / fullscreen"),ke=__("publish / help / share-url"),Me=__("publish / embed"),Te=__("publish / copy"),Ee=__("publish / copy-success"),Ce=__("publish / embed / help"),Se=e._slotted.export_actions_header,$e=t.publishHed&&create_if_block$12(e,t);function De(e){return e.publishIntro?create_if_block_1$8:e.published?create_if_block_2$5:create_if_block_3$2}var Le=De(t),Ae=Le(e,t);function Ye(e){return e.published?create_if_block_4$1:create_if_block_5$1}var He=Ye(t),Fe=He(e,t);function Re(t){e.publish()}var Be=!t.published&&create_if_block_6$1(e,t),Ie=t.needs_republish&&!t.publishing&&create_if_block_7$1(e,t),Ue=t.published&&!t.needs_republish&&1==t.progress&&!t.publishing&&create_if_block_8$1(e,t),Oe=t.publish_error&&create_if_block_9$1(e,t),Pe=t.publishing&&create_if_block_10$1(e,t);function je(){e.set({shareurl_type:M.__value})}for(var ze=t.plugin_shareurls,We=[],Ve=0;Ve<ze.length;Ve+=1)We[Ve]=create_each_block$9(e,assign(assign({},t),{each_value:ze,tpl:ze[Ve],tpl_index:Ve}));var qe=new Help({root:e.root,slots:{default:createFragment()}}),Ge=t.embed_templates,Je=[];for(Ve=0;Ve<Ge.length;Ve+=1)Je[Ve]=create_each_block_1$5(e,assign(assign({},t),{each_value_1:Ge,tpl:Ge[Ve],tpl_index_1:Ve}));function Xe(t){var n=e.get();e.copy(n.embedCode)}var Ke=t.embed_templates.slice(2),Ze=[];for(Ve=0;Ve<Ke.length;Ve+=1)Ze[Ve]=create_each_block_2$2(e,assign(assign({},t),{each_value_2:Ke,tpl:Ke[Ve],tpl_index_2:Ve}));var Qe=new Help({root:e.root,slots:{default:createFragment()}}),et=t.beforeExport;function tt(t){return{root:e.root}}if(et)var nt=new et(tt());var rt=t.exportIntro&&create_if_block_11(e,t),at=t.sortedChartActions,ot=[];for(Ve=0;Ve<at.length;Ve+=1)ot[Ve]=create_each_block_3(e,assign(assign({},t),{each_value_3:at,action:at[Ve],action_index:Ve}));var it=t.Action;function st(t){return{root:e.root,data:{visible:!0,show:!0}}}if(it)var ct=new it(st());return{c:function(){n=createElement("div"),$e&&$e.c(),r=createText("\n    "),Ae.c(),a=createText("\n\n    "),o=createElement("button"),Fe.c(),s=createText("\n\n\n    "),Be&&Be.c(),c=createText("\n\n\n    "),Ie&&Ie.c(),l=createText("\n    "),Ue&&Ue.c(),u=createText("\n\n    "),Oe&&Oe.c(),d=createText("\n\n    "),Pe&&Pe.c(),h=createText("\n\n    "),f=createElement("div"),p=createElement("h2"),m=createText("\n        "),_=createElement("div"),v=createElement("i"),g=createText("\n            "),b=createElement("div"),y=createElement("div"),N=createElement("b"),x=createText("\n                    "),w=createElement("div"),k=createElement("label"),M=createElement("input"),T=createText(" "),E=createElement("noscript"),C=createText("\n                        ");for(var e=0;e<We.length;e+=1)We[e].c();S=createText("\n                "),$=createElement("div"),D=createElement("a"),L=createText(t.shareUrl),A=createText("\n            "),Y=createText("\n                "),H=createElement("div"),F=createText("\n            "),qe._fragment.c(),R=createText("\n\n        "),B=createElement("div"),I=createElement("i"),U=createText("\n            "),O=createElement("div"),P=createElement("div"),j=createElement("b"),z=createText("\n                    "),W=createElement("div");for(e=0;e<Je.length;e+=1)Je[e].c();V=createText("\n                "),q=createElement("div"),G=createElement("input"),J=createText(" "),X=createElement("button"),K=createElement("i"),Z=createText(" "),Q=createText(Te),ee=createText("\n                    "),te=createElement("div"),ne=createText(Ee),ae=createText("\n            "),oe=createText("\n                "),ie=createElement("div"),se=createElement("noscript"),ce=createText("\n                    ");for(e=0;e<Ze.length;e+=1)Ze[e].c();le=createText("\n            "),Qe._fragment.c(),de=createText("\n\n    \n    "),nt&&nt._fragment.c(),he=createText("\n\n    \n    "),fe=createElement("div"),Se||(me=createElement("h2"),_e=createText("\n            "),rt&&rt.c(),ve=createComment()),ge=createText("\n\n        "),be=createElement("ul");for(e=0;e<ot.length;e+=1)ot[e].c();ye=createText("\n\n        "),ct&&ct._fragment.c(),this.h()},h:function(){addListener(o,"click",Re),o.disabled=t.publishing,o.className=i="btn-publish btn btn-primary btn-large "+(t.published?"":"btn-first-publish")+" svelte-pryd0d",v.className="icon fa fa-link fa-fw",e._bindingGroups[0].push(M),addListener(M,"change",je),M.__value="default",M.value=M.__value,setAttribute(M,"type","radio"),M.name="url-type",M.className="svelte-pryd0d",k.className="radio",w.className="embed-options svelte-pryd0d",y.className="h",D.target="_blank",D.className="share-url svelte-pryd0d",D.href=t.shareUrl,$.className="inpt",b.className="ctrls",_.className="block",I.className="icon fa fa-code fa-fw",W.className="embed-options svelte-pryd0d",P.className="h",setAttribute(G,"type","text"),G.className="input embed-code",G.readOnly=!0,G.value=t.embedCode,K.className="fa fa-copy",addListener(X,"click",Xe),X.className="btn btn-copy",X.title="copy",te.className=re="copy-success "+(t.copy_success?"show":"")+" svelte-pryd0d",q.className="inpt",O.className="ctrls",B.className="block",setStyle(f,"margin-top","30px"),f.className=ue=t.published?"":"inactive",Se||(me.className="pad-top"),be.className="chart-actions",fe.className="export-and-duplicate"},m:function(i,re){insertNode(n,i,re),$e&&$e.m(n,null),appendNode(r,n),Ae.m(n,null),appendNode(a,n),appendNode(o,n),Fe.m(o,null),appendNode(s,n),Be&&Be.m(n,null),appendNode(c,n),Ie&&Ie.m(n,null),appendNode(l,n),Ue&&Ue.m(n,null),appendNode(u,n),Oe&&Oe.m(n,null),appendNode(d,n),Pe&&Pe.m(n,null),appendNode(h,n),appendNode(f,n),appendNode(p,f),p.innerHTML=Ne,appendNode(m,f),appendNode(_,f),appendNode(v,_),appendNode(g,_),appendNode(b,_),appendNode(y,b),appendNode(N,y),N.innerHTML=xe,appendNode(x,y),appendNode(w,y),appendNode(k,w),appendNode(M,k),M.checked=M.__value===t.shareurl_type,appendNode(T,k),appendNode(E,k),E.insertAdjacentHTML("afterend",we),appendNode(C,w);for(var ue=0;ue<We.length;ue+=1)We[ue].m(w,null);appendNode(S,b),appendNode($,b),appendNode(D,$),appendNode(L,D),appendNode(A,_),appendNode(Y,qe._slotted.default),appendNode(H,qe._slotted.default),H.innerHTML=ke,appendNode(F,qe._slotted.default),qe._mount(_,null),appendNode(R,f),appendNode(B,f),appendNode(I,B),appendNode(U,B),appendNode(O,B),appendNode(P,O),appendNode(j,P),j.innerHTML=Me,appendNode(z,P),appendNode(W,P);for(ue=0;ue<Je.length;ue+=1)Je[ue].m(W,null);appendNode(V,O),appendNode(q,O),appendNode(G,q),e.refs.embedInput=G,appendNode(J,q),appendNode(X,q),appendNode(K,X),appendNode(Z,X),appendNode(Q,X),appendNode(ee,q),appendNode(te,q),appendNode(ne,te),appendNode(ae,B),appendNode(oe,Qe._slotted.default),appendNode(ie,Qe._slotted.default),appendNode(se,ie),se.insertAdjacentHTML("beforebegin",Ce),appendNode(ce,ie);for(ue=0;ue<Ze.length;ue+=1)Ze[ue].m(ie,null);appendNode(le,Qe._slotted.default),Qe._mount(B,null),appendNode(de,n),nt&&nt._mount(n,null),appendNode(he,n),appendNode(fe,n),Se?(appendNode(Se,fe),appendNode(pe||(pe=createComment()),fe)):(appendNode(me,fe),me.innerHTML=t.exportHed,appendNode(_e,fe),rt&&rt.m(fe,null),appendNode(ve,fe)),appendNode(ge,fe),appendNode(be,fe);for(ue=0;ue<ot.length;ue+=1)ot[ue].m(be,null);appendNode(ye,fe),ct&&(ct._mount(fe,null),e.refs.action=ct)},p:function(t,s){s.publishHed?$e?$e.p(t,s):(($e=create_if_block$12(e,s)).c(),$e.m(n,r)):$e&&($e.u(),$e.d(),$e=null),Le===(Le=De(s))&&Ae?Ae.p(t,s):(Ae.u(),Ae.d(),(Ae=Le(e,s)).c(),Ae.m(n,a)),He===(He=Ye(s))&&Fe?Fe.p(t,s):(Fe.u(),Fe.d(),(Fe=He(e,s)).c(),Fe.m(o,null)),t.publishing&&(o.disabled=s.publishing),t.published&&i!==(i="btn-publish btn btn-primary btn-large "+(s.published?"":"btn-first-publish")+" svelte-pryd0d")&&(o.className=i),s.published?Be&&(Be.u(),Be.d(),Be=null):Be||((Be=create_if_block_6$1(e,s)).c(),Be.m(n,c)),s.needs_republish&&!s.publishing?Ie||((Ie=create_if_block_7$1(e,s)).c(),Ie.m(n,l)):Ie&&(Ie.u(),Ie.d(),Ie=null),!s.published||s.needs_republish||1!=s.progress||s.publishing?Ue&&(Ue.u(),Ue.d(),Ue=null):Ue||((Ue=create_if_block_8$1(e,s)).c(),Ue.m(n,u)),s.publish_error?Oe?Oe.p(t,s):((Oe=create_if_block_9$1(e,s)).c(),Oe.m(n,d)):Oe&&(Oe.u(),Oe.d(),Oe=null),s.publishing?Pe?Pe.p(t,s):((Pe=create_if_block_10$1(e,s)).c(),Pe.m(n,h)):Pe&&(Pe.u(),Pe.d(),Pe=null),M.checked=M.__value===s.shareurl_type;var p=s.plugin_shareurls;if(t.shareurl_type||t.plugin_shareurls){for(var m=0;m<p.length;m+=1){var _=assign(assign({},s),{each_value:p,tpl:p[m],tpl_index:m});We[m]?We[m].p(t,_):(We[m]=create_each_block$9(e,_),We[m].c(),We[m].m(w,null))}for(;m<We.length;m+=1)We[m].u(),We[m].d();We.length=p.length}t.shareUrl&&(L.data=s.shareUrl,D.href=s.shareUrl);var v=s.embed_templates;if(t.embed_type||t.embed_templates){for(m=0;m<v.length;m+=1){var g=assign(assign({},s),{each_value_1:v,tpl:v[m],tpl_index_1:m});Je[m]?Je[m].p(t,g):(Je[m]=create_each_block_1$5(e,g),Je[m].c(),Je[m].m(W,null))}for(;m<Je.length;m+=1)Je[m].u(),Je[m].d();Je.length=v.length}t.embedCode&&(G.value=s.embedCode),t.copy_success&&re!==(re="copy-success "+(s.copy_success?"show":"")+" svelte-pryd0d")&&(te.className=re);var b=s.embed_templates.slice(2);if(t.embed_templates){for(m=0;m<b.length;m+=1){var y=assign(assign({},s),{each_value_2:b,tpl:b[m],tpl_index_2:m});Ze[m]?Ze[m].p(t,y):(Ze[m]=create_each_block_2$2(e,y),Ze[m].c(),Ze[m].m(ie,null))}for(;m<Ze.length;m+=1)Ze[m].u(),Ze[m].d();Ze.length=b.length}t.published&&ue!==(ue=s.published?"":"inactive")&&(f.className=ue),et!==(et=s.beforeExport)&&(nt&&nt.destroy(),et&&((nt=new et(tt()))._fragment.c(),nt._mount(n,he))),Se||(t.exportHed&&(me.innerHTML=s.exportHed),s.exportIntro?rt?rt.p(t,s):((rt=create_if_block_11(e,s)).c(),rt.m(ve.parentNode,ve)):rt&&(rt.u(),rt.d(),rt=null));var N=s.sortedChartActions;if(t.sortedChartActions||t.active_action){for(m=0;m<N.length;m+=1){var x=assign(assign({},s),{each_value_3:N,action:N[m],action_index:m});ot[m]?ot[m].p(t,x):(ot[m]=create_each_block_3(e,x),ot[m].c(),ot[m].m(be,null))}for(;m<ot.length;m+=1)ot[m].u(),ot[m].d();ot.length=N.length}if(it!==(it=s.Action))ct&&ct.destroy(),it?((ct=new it(st()))._fragment.c(),ct._mount(fe,null),e.refs.action=ct):e.refs.action===ct&&(e.refs.action=null);else{var k={visible:!0,show:!0};ct._set(k)}},u:function(){p.innerHTML="",N.innerHTML="",detachAfter(E),H.innerHTML="",j.innerHTML="",detachBefore(se),me.innerHTML="",detachNode(n),$e&&$e.u(),Ae.u(),Fe.u(),Be&&Be.u(),Ie&&Ie.u(),Ue&&Ue.u(),Oe&&Oe.u(),Pe&&Pe.u();for(var e=0;e<We.length;e+=1)We[e].u();for(e=0;e<Je.length;e+=1)Je[e].u();for(e=0;e<Ze.length;e+=1)Ze[e].u();Se?reinsertBefore(pe,Se):rt&&rt.u();for(e=0;e<ot.length;e+=1)ot[e].u()},d:function(){$e&&$e.d(),Ae.d(),Fe.d(),removeListener(o,"click",Re),Be&&Be.d(),Ie&&Ie.d(),Ue&&Ue.d(),Oe&&Oe.d(),Pe&&Pe.d(),e._bindingGroups[0].splice(e._bindingGroups[0].indexOf(M),1),removeListener(M,"change",je),destroyEach(We),qe.destroy(!1),destroyEach(Je),e.refs.embedInput===G&&(e.refs.embedInput=null),removeListener(X,"click",Xe),destroyEach(Ze),Qe.destroy(!1),nt&&nt.destroy(!1),Se||rt&&rt.d(),destroyEach(ot),ct&&ct.destroy(!1)}}}function create_if_block$12(e,t){var n;return{c:function(){n=createElement("h2"),this.h()},h:function(){n.className="pad-top"},m:function(e,r){insertNode(n,e,r),n.innerHTML=t.publishHed},p:function(e,t){e.publishHed&&(n.innerHTML=t.publishHed)},u:function(){n.innerHTML="",detachNode(n)},d:noop}}function create_if_block_1$8(e,t){var n;return{c:function(){n=createElement("p")},m:function(e,r){insertNode(n,e,r),n.innerHTML=t.publishIntro},p:function(e,t){e.publishIntro&&(n.innerHTML=t.publishIntro)},u:function(){n.innerHTML="",detachNode(n)},d:noop}}function create_if_block_2$5(e,t){var n,r=__("publish / republish-intro");return{c:function(){n=createElement("p")},m:function(e,t){insertNode(n,e,t),n.innerHTML=r},p:noop,u:function(){n.innerHTML="",detachNode(n)},d:noop}}function create_if_block_3$2(e,t){var n,r=__("publish / publish-intro");return{c:function(){n=createElement("p"),this.h()},h:function(){setStyle(n,"margin-bottom","20px")},m:function(e,t){insertNode(n,e,t),n.innerHTML=r},p:noop,u:function(){n.innerHTML="",detachNode(n)},d:noop}}function create_if_block_4$1(e,t){var n,r,a,o,i,s,c=__("publish / republish-btn");return{c:function(){n=createElement("span"),r=createElement("i"),o=createText(" "),i=createElement("span"),s=createText(c),this.h()},h:function(){r.className=a="fa fa-fw fa-refresh "+(t.publishing?"fa-spin":"")+" svelte-pryd0d",i.className="title svelte-pryd0d",n.className="re-publish"},m:function(e,t){insertNode(n,e,t),appendNode(r,n),appendNode(o,n),appendNode(i,n),appendNode(s,i)},p:function(e,t){e.publishing&&a!==(a="fa fa-fw fa-refresh "+(t.publishing?"fa-spin":"")+" svelte-pryd0d")&&(r.className=a)},u:function(){detachNode(n)},d:noop}}function create_if_block_5$1(e,t){var n,r,a,o,i,s,c=__("publish / publish-btn");return{c:function(){n=createElement("span"),r=createElement("i"),o=createText(" "),i=createElement("span"),s=createText(c),this.h()},h:function(){r.className=a="fa fa-fw "+(t.publishing?"fa-refresh fa-spin":"fa-cloud-upload")+" svelte-pryd0d",i.className="title svelte-pryd0d",n.className="publish"},m:function(e,t){insertNode(n,e,t),appendNode(r,n),appendNode(o,n),appendNode(i,n),appendNode(s,i)},p:function(e,t){e.publishing&&a!==(a="fa fa-fw "+(t.publishing?"fa-refresh fa-spin":"fa-cloud-upload")+" svelte-pryd0d")&&(r.className=a)},u:function(){detachNode(n)},d:noop}}function create_if_block_6$1(e,t){var n,r,a,o,i=__("publish / publish-btn-intro");return{c:function(){n=createElement("div"),(r=createElement("div")).innerHTML='<i class="fa fa-chevron-left"></i>',a=createText("\n        "),o=createElement("div"),this.h()},h:function(){r.className="arrow svelte-pryd0d",o.className="text svelte-pryd0d",n.className="publish-intro svelte-pryd0d"},m:function(e,t){insertNode(n,e,t),appendNode(r,n),appendNode(a,n),appendNode(o,n),o.innerHTML=i},u:function(){o.innerHTML="",detachNode(n)},d:noop}}function create_if_block_7$1(e,t){var n,r=__("publish / republish-alert");return{c:function(){n=createElement("div"),this.h()},h:function(){n.className="btn-aside alert svelte-pryd0d"},m:function(e,t){insertNode(n,e,t),n.innerHTML=r},u:function(){n.innerHTML="",detachNode(n)},d:noop}}function create_if_block_8$1(e,t){var n,r=__("publish / publish-success");return{c:function(){n=createElement("div"),this.h()},h:function(){n.className="alert alert-success svelte-pryd0d"},m:function(e,t){insertNode(n,e,t),n.innerHTML=r},u:function(){n.innerHTML="",detachNode(n)},d:noop}}function create_if_block_9$1(e,t){var n;return{c:function(){n=createElement("div"),this.h()},h:function(){n.className="alert alert-error svelte-pryd0d"},m:function(e,r){insertNode(n,e,r),n.innerHTML=t.publish_error},p:function(e,t){e.publish_error&&(n.innerHTML=t.publish_error)},u:function(){n.innerHTML="",detachNode(n)},d:noop}}function create_if_block_10$1(e,t){var n,r,a,o,i,s,c,l=__("publish / progress / please-wait");return{c:function(){n=createElement("div"),r=createText(l),a=createText("\n        "),o=createElement("div"),i=createElement("div"),this.h()},h:function(){i.className=s="bar "+(t.progress<1?"":"bar-success")+" svelte-pryd0d",o.className="progress progress-striped active svelte-pryd0d",n.className=c="alert "+(t.progress<1?"alert-info":"alert-success")+" publishing svelte-pryd0d"},m:function(t,s){insertNode(n,t,s),appendNode(r,n),appendNode(a,n),appendNode(o,n),appendNode(i,o),e.refs.bar=i},p:function(e,t){e.progress&&s!==(s="bar "+(t.progress<1?"":"bar-success")+" svelte-pryd0d")&&(i.className=s),e.progress&&c!==(c="alert "+(t.progress<1?"alert-info":"alert-success")+" publishing svelte-pryd0d")&&(n.className=c)},u:function(){detachNode(n)},d:function(){e.refs.bar===i&&(e.refs.bar=null)}}}function create_each_block$9(e,t){var n,r,a,o,i,s=t.tpl,c=(t.each_value,t.tpl_index,s.name);function l(){e.set({shareurl_type:r.__value})}return{c:function(){n=createElement("label"),r=createElement("input"),o=createText(" "),i=createElement("noscript"),this.h()},h:function(){e._bindingGroups[0].push(r),addListener(r,"change",l),r.__value=a=s.id,r.value=r.__value,setAttribute(r,"type","radio"),r.name="url-type",r.className="svelte-pryd0d",n.className="radio"},m:function(e,a){insertNode(n,e,a),appendNode(r,n),r.checked=r.__value===t.shareurl_type,appendNode(o,n),appendNode(i,n),i.insertAdjacentHTML("afterend",c)},p:function(e,t){s=t.tpl,t.each_value,t.tpl_index,r.checked=r.__value===t.shareurl_type,e.plugin_shareurls&&a!==(a=s.id)&&(r.__value=a),r.value=r.__value,e.plugin_shareurls&&c!==(c=s.name)&&(detachAfter(i),i.insertAdjacentHTML("afterend",c))},u:function(){detachAfter(i),detachNode(n)},d:function(){e._bindingGroups[0].splice(e._bindingGroups[0].indexOf(r),1),removeListener(r,"change",l)}}}function create_each_block_1$5(e,t){var n,r,a,o,i,s=t.tpl,c=(t.each_value_1,t.tpl_index_1,s.title);function l(){e.set({embed_type:r.__value})}return{c:function(){n=createElement("label"),r=createElement("input"),o=createText(" "),i=createElement("noscript"),this.h()},h:function(){e._bindingGroups[1].push(r),addListener(r,"change",l),setAttribute(r,"type","radio"),r.__value=a=s.id,r.value=r.__value,r.className="svelte-pryd0d",n.className="radio"},m:function(e,a){insertNode(n,e,a),appendNode(r,n),r.checked=r.__value===t.embed_type,appendNode(o,n),appendNode(i,n),i.insertAdjacentHTML("afterend",c)},p:function(e,t){s=t.tpl,t.each_value_1,t.tpl_index_1,r.checked=r.__value===t.embed_type,e.embed_templates&&a!==(a=s.id)&&(r.__value=a),r.value=r.__value,e.embed_templates&&c!==(c=s.title)&&(detachAfter(i),i.insertAdjacentHTML("afterend",c))},u:function(){detachAfter(i),detachNode(n)},d:function(){e._bindingGroups[1].splice(e._bindingGroups[1].indexOf(r),1),removeListener(r,"change",l)}}}function create_each_block_2$2(e,t){var n,r,a,o,i,s,c=t.tpl,l=(t.each_value_2,t.tpl_index_2,c.title),u=c.text;return{c:function(){n=createElement("div"),r=createElement("b"),a=createText(l),o=createText(":"),i=createText(" "),s=createElement("noscript")},m:function(e,t){insertNode(n,e,t),appendNode(r,n),appendNode(a,r),appendNode(o,r),appendNode(i,n),appendNode(s,n),s.insertAdjacentHTML("afterend",u)},p:function(e,t){c=t.tpl,t.each_value_2,t.tpl_index_2,e.embed_templates&&l!==(l=c.title)&&(a.data=l),e.embed_templates&&u!==(u=c.text)&&(detachAfter(s),s.insertAdjacentHTML("afterend",u))},u:function(){detachAfter(s),detachNode(n)},d:noop}}function create_if_block_11(e,t){var n;return{c:function(){n=createElement("p")},m:function(e,r){insertNode(n,e,r),n.innerHTML=t.exportIntro},p:function(e,t){e.exportIntro&&(n.innerHTML=t.exportIntro)},u:function(){n.innerHTML="",detachNode(n)},d:noop}}function create_each_block_3(e,t){var n,r=t.action,a=(t.each_value_3,t.action_index,r&&create_if_block_12(e,t));return{c:function(){a&&a.c(),n=createComment()},m:function(e,t){a&&a.m(e,t),insertNode(n,e,t)},p:function(t,o){r=o.action,o.each_value_3,o.action_index,r?a?a.p(t,o):((a=create_if_block_12(e,o)).c(),a.m(n.parentNode,n)):a&&(a.u(),a.d(),a=null)},u:function(){a&&a.u(),detachNode(n)},d:function(){a&&a.d()}}}function create_if_block_13(e,t){var n,r,a,o=t.action,i=(t.each_value_3,t.action_index,o.banner.text);return{c:function(){n=createElement("div"),r=createText(i),this.h()},h:function(){n.className="banner",n.style.cssText=a=o.banner.style},m:function(e,t){insertNode(n,e,t),appendNode(r,n)},p:function(e,t){o=t.action,t.each_value_3,t.action_index,e.sortedChartActions&&i!==(i=o.banner.text)&&(r.data=i),e.sortedChartActions&&a!==(a=o.banner.style)&&(n.style.cssText=a)},u:function(){detachNode(n)},d:noop}}function create_if_block_12(e,t){var n,r,a,o,i,s,c,l,u=t.action,d=(t.each_value_3,t.action_index,u.title),h=u.banner&&"FALSE"!=u.banner.text&&"-"!=u.banner.text&&create_if_block_13(e,t);return{c:function(){n=createElement("li"),r=createElement("a"),a=createElement("i"),i=createElement("span"),c=createText("\n                "),h&&h.c(),this.h()},h:function(){a.className=o="fa fa-"+u.icon+" svelte-pryd0d",i.className="title svelte-pryd0d",addListener(r,"click",click_handler$4),setAttribute(r,"role","button"),r.href=s=u.url?u.url:"#"+u.id,r._svelte={component:e,each_value_3:t.each_value_3,action_index:t.action_index},n.className=l="action action-"+u.id+" "+(u.class||"")+" "+(u.id==t.active_action?"active":"")+" svelte-pryd0d"},m:function(e,t){insertNode(n,e,t),appendNode(r,n),appendNode(a,r),appendNode(i,r),i.innerHTML=d,appendNode(c,n),h&&h.m(n,null)},p:function(t,c){u=c.action,c.each_value_3,c.action_index,t.sortedChartActions&&o!==(o="fa fa-"+u.icon+" svelte-pryd0d")&&(a.className=o),t.sortedChartActions&&d!==(d=u.title)&&(i.innerHTML=d),t.sortedChartActions&&s!==(s=u.url?u.url:"#"+u.id)&&(r.href=s),r._svelte.each_value_3=c.each_value_3,r._svelte.action_index=c.action_index,u.banner&&"FALSE"!=u.banner.text&&"-"!=u.banner.text?h?h.p(t,c):((h=create_if_block_13(e,c)).c(),h.m(n,null)):h&&(h.u(),h.d(),h=null),(t.sortedChartActions||t.active_action)&&l!==(l="action action-"+u.id+" "+(u.class||"")+" "+(u.id==c.active_action?"active":"")+" svelte-pryd0d")&&(n.className=l)},u:function(){i.innerHTML="",detachNode(n),h&&h.u()},d:function(){removeListener(r,"click",click_handler$4),h&&h.d()}}}function click_handler$4(e){var t=this._svelte.component,n=this._svelte.each_value_3[this._svelte.action_index];t.select(n,e)}function Publish(e){init(this,e),this.refs={},this._state=assign(assign(this.store._init(["id","publicUrl","metadata","actions"]),data_1()),e.data),this.store._add(this,["id","publicUrl","metadata","actions"]),this._recompute({shareurl_type:1,$id:1,$publicUrl:1,plugin_shareurls:1,published:1,embed_type:1,$metadata:1,chartActions:1,$actions:1},this._state),this._bindingGroups=[[],[]],this._handlers.state=[onstate$1],this._handlers.destroy=[removeFromStore],this._slotted=e.slots||{};var t=this;e.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this.slots={},this._fragment=create_main_fragment$19(this,this._state),this.root._oncreate.push(function(){var e={shareurl_type:1,$id:1,$publicUrl:1,plugin_shareurls:1,published:1,embed_type:1,$metadata:1,chartActions:1,$actions:1,publishHed:1,publishIntro:1,publishing:1,needs_republish:1,progress:1,publish_error:1,shareUrl:1,embed_templates:1,embedCode:1,copy_success:1,beforeExport:1,exportHed:1,exportIntro:1,sortedChartActions:1,active_action:1,Action:1};onstate$1.call(t,{changed:e,current:t._state}),oncreate$8.call(t),t.fire("update",{changed:e,current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),this._lock=!0,callAll(this._beforecreate),callAll(this._oncreate),callAll(this._aftercreate),this._lock=!1)}assign(Publish.prototype,proto),assign(Publish.prototype,methods$12),Publish.prototype._recompute=function(e,t){(e.shareurl_type||e.$id||e.$publicUrl||e.plugin_shareurls||e.published)&&this._differs(t.shareUrl,t.shareUrl=shareUrl(t))&&(e.shareUrl=!0),(e.embed_type||e.$metadata||e.$publicUrl)&&this._differs(t.embedCode,t.embedCode=embedCode(t))&&(e.embedCode=!0),(e.chartActions||e.$actions)&&this._differs(t.sortedChartActions,t.sortedChartActions=sortedChartActions(t))&&(e.sortedChartActions=!0)};var commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var core=createCommonjsModule(function(e,t){var n;e.exports=(n=n||function(e,t){var n=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),r={},a=r.lib={},o=a.Base={extend:function(e){var t=n(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},i=a.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,a=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<a;o++){var i=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=i<<24-(r+o)%4*8}else for(var o=0;o<a;o+=4)t[r+o>>>2]=n[o>>>2];return this.sigBytes+=a,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n,r=[],a=function(t){var t=t,n=987654321,r=4294967295;return function(){var a=((n=36969*(65535&n)+(n>>16)&r)<<16)+(t=18e3*(65535&t)+(t>>16)&r)&r;return a/=4294967296,(a+=.5)*(e.random()>.5?1:-1)}},o=0;o<t;o+=4){var s=a(4294967296*(n||e.random()));n=987654071*s(),r.push(4294967296*s()|0)}return new i.init(r,t)}}),s=r.enc={},c=s.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],a=0;a<n;a++){var o=t[a>>>2]>>>24-a%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new i.init(n,t/2)}},l=s.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],a=0;a<n;a++){var o=t[a>>>2]>>>24-a%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new i.init(n,t)}},u=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},d=a.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new i.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=u.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,a=n.sigBytes,o=this.blockSize,s=4*o,c=a/s,l=(c=t?e.ceil(c):e.max((0|c)-this._minBufferSize,0))*o,u=e.min(4*l,a);if(l){for(var d=0;d<l;d+=o)this._doProcessBlock(r,d);var h=r.splice(0,l);n.sigBytes-=u}return new i.init(h,u)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),h=(a.Hasher=d.extend({cfg:o.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new h.HMAC.init(e,n).finalize(t)}}}),r.algo={});return r}(Math),n)}),x64Core=createCommonjsModule(function(e,t){var n,r,a,o,i,s;e.exports=(a=(r=n=core).lib,o=a.Base,i=a.WordArray,(s=r.x64={}).Word=o.extend({init:function(e,t){this.high=e,this.low=t}}),s.WordArray=o.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,n=[],r=0;r<t;r++){var a=e[r];n.push(a.high),n.push(a.low)}return i.create(n,this.sigBytes)},clone:function(){for(var e=o.clone.call(this),t=e.words=this.words.slice(0),n=t.length,r=0;r<n;r++)t[r]=t[r].clone();return e}}),n)}),libTypedarrays=createCommonjsModule(function(e,t){var n;e.exports=(n=core,function(){if("function"==typeof ArrayBuffer){var e=n.lib.WordArray,t=e.init;(e.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var n=e.byteLength,r=[],a=0;a<n;a++)r[a>>>2]|=e[a]<<24-a%4*8;t.call(this,r,n)}else t.apply(this,arguments)}).prototype=e}}(),n.lib.WordArray)}),encUtf16=createCommonjsModule(function(e,t){var n;e.exports=(n=core,function(){var e=n,t=e.lib.WordArray,r=e.enc;function a(e){return e<<8&4278255360|e>>>8&16711935}r.Utf16=r.Utf16BE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],a=0;a<n;a+=2){var o=t[a>>>2]>>>16-a%4*8&65535;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var n=e.length,r=[],a=0;a<n;a++)r[a>>>1]|=e.charCodeAt(a)<<16-a%2*16;return t.create(r,2*n)}},r.Utf16LE={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],o=0;o<n;o+=2){var i=a(t[o>>>2]>>>16-o%4*8&65535);r.push(String.fromCharCode(i))}return r.join("")},parse:function(e){for(var n=e.length,r=[],o=0;o<n;o++)r[o>>>1]|=a(e.charCodeAt(o)<<16-o%2*16);return t.create(r,2*n)}}}(),n.enc.Utf16)}),encBase64=createCommonjsModule(function(e,t){var n,r,a;e.exports=(a=(r=n=core).lib.WordArray,r.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();for(var a=[],o=0;o<n;o+=3)for(var i=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,s=0;s<4&&o+.75*s<n;s++)a.push(r.charAt(i>>>6*(3-s)&63));var c=r.charAt(64);if(c)for(;a.length%4;)a.push(c);return a.join("")},parse:function(e){var t=e.length,n=this._map,r=this._reverseMap;if(!r){r=this._reverseMap=[];for(var o=0;o<n.length;o++)r[n.charCodeAt(o)]=o}var i=n.charAt(64);if(i){var s=e.indexOf(i);-1!==s&&(t=s)}return function(e,t,n){for(var r=[],o=0,i=0;i<t;i++)if(i%4){var s=n[e.charCodeAt(i-1)]<<i%4*2,c=n[e.charCodeAt(i)]>>>6-i%4*2;r[o>>>2]|=(s|c)<<24-o%4*8,o++}return a.create(r,o)}(e,t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},n.enc.Base64)}),md5=createCommonjsModule(function(e,t){var n;e.exports=(n=core,function(e){var t=n,r=t.lib,a=r.WordArray,o=r.Hasher,i=t.algo,s=[];!function(){for(var t=0;t<64;t++)s[t]=4294967296*e.abs(e.sin(t+1))|0}();var c=i.MD5=o.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,a=e[r];e[r]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var o=this._hash.words,i=e[t+0],c=e[t+1],f=e[t+2],p=e[t+3],m=e[t+4],_=e[t+5],v=e[t+6],g=e[t+7],b=e[t+8],y=e[t+9],N=e[t+10],x=e[t+11],w=e[t+12],k=e[t+13],M=e[t+14],T=e[t+15],E=o[0],C=o[1],S=o[2],$=o[3];C=h(C=h(C=h(C=h(C=d(C=d(C=d(C=d(C=u(C=u(C=u(C=u(C=l(C=l(C=l(C=l(C,S=l(S,$=l($,E=l(E,C,S,$,i,7,s[0]),C,S,c,12,s[1]),E,C,f,17,s[2]),$,E,p,22,s[3]),S=l(S,$=l($,E=l(E,C,S,$,m,7,s[4]),C,S,_,12,s[5]),E,C,v,17,s[6]),$,E,g,22,s[7]),S=l(S,$=l($,E=l(E,C,S,$,b,7,s[8]),C,S,y,12,s[9]),E,C,N,17,s[10]),$,E,x,22,s[11]),S=l(S,$=l($,E=l(E,C,S,$,w,7,s[12]),C,S,k,12,s[13]),E,C,M,17,s[14]),$,E,T,22,s[15]),S=u(S,$=u($,E=u(E,C,S,$,c,5,s[16]),C,S,v,9,s[17]),E,C,x,14,s[18]),$,E,i,20,s[19]),S=u(S,$=u($,E=u(E,C,S,$,_,5,s[20]),C,S,N,9,s[21]),E,C,T,14,s[22]),$,E,m,20,s[23]),S=u(S,$=u($,E=u(E,C,S,$,y,5,s[24]),C,S,M,9,s[25]),E,C,p,14,s[26]),$,E,b,20,s[27]),S=u(S,$=u($,E=u(E,C,S,$,k,5,s[28]),C,S,f,9,s[29]),E,C,g,14,s[30]),$,E,w,20,s[31]),S=d(S,$=d($,E=d(E,C,S,$,_,4,s[32]),C,S,b,11,s[33]),E,C,x,16,s[34]),$,E,M,23,s[35]),S=d(S,$=d($,E=d(E,C,S,$,c,4,s[36]),C,S,m,11,s[37]),E,C,g,16,s[38]),$,E,N,23,s[39]),S=d(S,$=d($,E=d(E,C,S,$,k,4,s[40]),C,S,i,11,s[41]),E,C,p,16,s[42]),$,E,v,23,s[43]),S=d(S,$=d($,E=d(E,C,S,$,y,4,s[44]),C,S,w,11,s[45]),E,C,T,16,s[46]),$,E,f,23,s[47]),S=h(S,$=h($,E=h(E,C,S,$,i,6,s[48]),C,S,g,10,s[49]),E,C,M,15,s[50]),$,E,_,21,s[51]),S=h(S,$=h($,E=h(E,C,S,$,w,6,s[52]),C,S,p,10,s[53]),E,C,N,15,s[54]),$,E,c,21,s[55]),S=h(S,$=h($,E=h(E,C,S,$,b,6,s[56]),C,S,T,10,s[57]),E,C,v,15,s[58]),$,E,k,21,s[59]),S=h(S,$=h($,E=h(E,C,S,$,m,6,s[60]),C,S,x,10,s[61]),E,C,f,15,s[62]),$,E,y,21,s[63]),o[0]=o[0]+E|0,o[1]=o[1]+C|0,o[2]=o[2]+S|0,o[3]=o[3]+$|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,a=8*t.sigBytes;n[a>>>5]|=128<<24-a%32;var o=e.floor(r/4294967296),i=r;n[15+(a+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(a+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),t.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,c=s.words,l=0;l<4;l++){var u=c[l];c[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return s},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function l(e,t,n,r,a,o,i){var s=e+(t&n|~t&r)+a+i;return(s<<o|s>>>32-o)+t}function u(e,t,n,r,a,o,i){var s=e+(t&r|n&~r)+a+i;return(s<<o|s>>>32-o)+t}function d(e,t,n,r,a,o,i){var s=e+(t^n^r)+a+i;return(s<<o|s>>>32-o)+t}function h(e,t,n,r,a,o,i){var s=e+(n^(t|~r))+a+i;return(s<<o|s>>>32-o)+t}t.MD5=o._createHelper(c),t.HmacMD5=o._createHmacHelper(c)}(Math),n.MD5)}),sha1=createCommonjsModule(function(e,t){var n,r,a,o,i,s,c;e.exports=(a=(r=n=core).lib,o=a.WordArray,i=a.Hasher,s=[],c=r.algo.SHA1=i.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],a=n[1],o=n[2],i=n[3],c=n[4],l=0;l<80;l++){if(l<16)s[l]=0|e[t+l];else{var u=s[l-3]^s[l-8]^s[l-14]^s[l-16];s[l]=u<<1|u>>>31}var d=(r<<5|r>>>27)+c+s[l];d+=l<20?1518500249+(a&o|~a&i):l<40?1859775393+(a^o^i):l<60?(a&o|a&i|o&i)-1894007588:(a^o^i)-899497514,c=i,i=o,o=a<<30|a>>>2,a=r,r=d}n[0]=n[0]+r|0,n[1]=n[1]+a|0,n[2]=n[2]+o|0,n[3]=n[3]+i|0,n[4]=n[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=Math.floor(n/4294967296),t[15+(r+64>>>9<<4)]=n,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}}),r.SHA1=i._createHelper(c),r.HmacSHA1=i._createHmacHelper(c),n.SHA1)}),sha256=createCommonjsModule(function(e,t){var n;e.exports=(n=core,function(e){var t=n,r=t.lib,a=r.WordArray,o=r.Hasher,i=t.algo,s=[],c=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;r<=n;r++)if(!(t%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,a=0;a<64;)t(r)&&(a<8&&(s[a]=n(e.pow(r,.5))),c[a]=n(e.pow(r,1/3)),a++),r++}();var l=[],u=i.SHA256=o.extend({_doReset:function(){this._hash=new a.init(s.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],a=n[1],o=n[2],i=n[3],s=n[4],u=n[5],d=n[6],h=n[7],f=0;f<64;f++){if(f<16)l[f]=0|e[t+f];else{var p=l[f-15],m=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,_=l[f-2],v=(_<<15|_>>>17)^(_<<13|_>>>19)^_>>>10;l[f]=m+l[f-7]+v+l[f-16]}var g=r&a^r&o^a&o,b=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),y=h+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&u^~s&d)+c[f]+l[f];h=d,d=u,u=s,s=i+y|0,i=o,o=a,a=r,r=y+(b+g)|0}n[0]=n[0]+r|0,n[1]=n[1]+a|0,n[2]=n[2]+o|0,n[3]=n[3]+i|0,n[4]=n[4]+s|0,n[5]=n[5]+u|0,n[6]=n[6]+d|0,n[7]=n[7]+h|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,a=8*t.sigBytes;return n[a>>>5]|=128<<24-a%32,n[14+(a+64>>>9<<4)]=e.floor(r/4294967296),n[15+(a+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(u),t.HmacSHA256=o._createHmacHelper(u)}(Math),n.SHA256)}),sha224=createCommonjsModule(function(e,t){var n,r,a,o,i,s;e.exports=(a=(r=n=core).lib.WordArray,o=r.algo,i=o.SHA256,s=o.SHA224=i.extend({_doReset:function(){this._hash=new a.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=i._doFinalize.call(this);return e.sigBytes-=4,e}}),r.SHA224=i._createHelper(s),r.HmacSHA224=i._createHmacHelper(s),n.SHA224)}),sha512=createCommonjsModule(function(e,t){var n;e.exports=(n=core,function(){var e=n,t=e.lib.Hasher,r=e.x64,a=r.Word,o=r.WordArray,i=e.algo;function s(){return a.create.apply(a,arguments)}var c=[s(1116352408,3609767458),s(1899447441,602891725),s(3049323471,3964484399),s(3921009573,2173295548),s(961987163,4081628472),s(1508970993,3053834265),s(2453635748,2937671579),s(2870763221,3664609560),s(3624381080,2734883394),s(310598401,1164996542),s(607225278,1323610764),s(1426881987,3590304994),s(1925078388,4068182383),s(2162078206,991336113),s(2614888103,633803317),s(3248222580,3479774868),s(3835390401,2666613458),s(4022224774,944711139),s(264347078,2341262773),s(604807628,2007800933),s(770255983,1495990901),s(1249150122,1856431235),s(1555081692,3175218132),s(1996064986,2198950837),s(2554220882,3999719339),s(2821834349,766784016),s(2952996808,2566594879),s(3210313671,3203337956),s(3336571891,1034457026),s(3584528711,2466948901),s(113926993,3758326383),s(338241895,168717936),s(666307205,1188179964),s(773529912,1546045734),s(1294757372,1522805485),s(1396182291,2643833823),s(1695183700,2343527390),s(1986661051,1014477480),s(2177026350,1206759142),s(2456956037,344077627),s(2730485921,1290863460),s(2820302411,3158454273),s(3259730800,3505952657),s(3345764771,106217008),s(3516065817,3606008344),s(3600352804,1432725776),s(4094571909,1467031594),s(275423344,851169720),s(430227734,3100823752),s(506948616,1363258195),s(659060556,3750685593),s(883997877,3785050280),s(958139571,3318307427),s(1322822218,3812723403),s(1537002063,2003034995),s(1747873779,3602036899),s(1955562222,1575990012),s(2024104815,1125592928),s(2227730452,2716904306),s(2361852424,442776044),s(2428436474,593698344),s(2756734187,3733110249),s(3204031479,2999351573),s(3329325298,3815920427),s(3391569614,3928383900),s(3515267271,566280711),s(3940187606,3454069534),s(4118630271,4000239992),s(116418474,1914138554),s(174292421,2731055270),s(289380356,3203993006),s(460393269,320620315),s(685471733,587496836),s(852142971,1086792851),s(1017036298,365543100),s(1126000580,2618297676),s(1288033470,3409855158),s(1501505948,4234509866),s(1607167915,987167468),s(1816402316,1246189591)],l=[];!function(){for(var e=0;e<80;e++)l[e]=s()}();var u=i.SHA512=t.extend({_doReset:function(){this._hash=new o.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],a=n[1],o=n[2],i=n[3],s=n[4],u=n[5],d=n[6],h=n[7],f=r.high,p=r.low,m=a.high,_=a.low,v=o.high,g=o.low,b=i.high,y=i.low,N=s.high,x=s.low,w=u.high,k=u.low,M=d.high,T=d.low,E=h.high,C=h.low,S=f,$=p,D=m,L=_,A=v,Y=g,H=b,F=y,R=N,B=x,I=w,U=k,O=M,P=T,j=E,z=C,W=0;W<80;W++){var V=l[W];if(W<16)var q=V.high=0|e[t+2*W],G=V.low=0|e[t+2*W+1];else{var J=l[W-15],X=J.high,K=J.low,Z=(X>>>1|K<<31)^(X>>>8|K<<24)^X>>>7,Q=(K>>>1|X<<31)^(K>>>8|X<<24)^(K>>>7|X<<25),ee=l[W-2],te=ee.high,ne=ee.low,re=(te>>>19|ne<<13)^(te<<3|ne>>>29)^te>>>6,ae=(ne>>>19|te<<13)^(ne<<3|te>>>29)^(ne>>>6|te<<26),oe=l[W-7],ie=oe.high,se=oe.low,ce=l[W-16],le=ce.high,ue=ce.low;q=(q=(q=Z+ie+((G=Q+se)>>>0<Q>>>0?1:0))+re+((G+=ae)>>>0<ae>>>0?1:0))+le+((G+=ue)>>>0<ue>>>0?1:0),V.high=q,V.low=G}var de,he=R&I^~R&O,fe=B&U^~B&P,pe=S&D^S&A^D&A,me=$&L^$&Y^L&Y,_e=(S>>>28|$<<4)^(S<<30|$>>>2)^(S<<25|$>>>7),ve=($>>>28|S<<4)^($<<30|S>>>2)^($<<25|S>>>7),ge=(R>>>14|B<<18)^(R>>>18|B<<14)^(R<<23|B>>>9),be=(B>>>14|R<<18)^(B>>>18|R<<14)^(B<<23|R>>>9),ye=c[W],Ne=ye.high,xe=ye.low,we=j+ge+((de=z+be)>>>0<z>>>0?1:0),ke=ve+me;j=O,z=P,O=I,P=U,I=R,U=B,R=H+(we=(we=(we=we+he+((de+=fe)>>>0<fe>>>0?1:0))+Ne+((de+=xe)>>>0<xe>>>0?1:0))+q+((de+=G)>>>0<G>>>0?1:0))+((B=F+de|0)>>>0<F>>>0?1:0)|0,H=A,F=Y,A=D,Y=L,D=S,L=$,S=we+(_e+pe+(ke>>>0<ve>>>0?1:0))+(($=de+ke|0)>>>0<de>>>0?1:0)|0}p=r.low=p+$,r.high=f+S+(p>>>0<$>>>0?1:0),_=a.low=_+L,a.high=m+D+(_>>>0<L>>>0?1:0),g=o.low=g+Y,o.high=v+A+(g>>>0<Y>>>0?1:0),y=i.low=y+F,i.high=b+H+(y>>>0<F>>>0?1:0),x=s.low=x+B,s.high=N+R+(x>>>0<B>>>0?1:0),k=u.low=k+U,u.high=w+I+(k>>>0<U>>>0?1:0),T=d.low=T+P,d.high=M+O+(T>>>0<P>>>0?1:0),C=h.low=C+z,h.high=E+j+(C>>>0<z>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;return t[r>>>5]|=128<<24-r%32,t[30+(r+128>>>10<<5)]=Math.floor(n/4294967296),t[31+(r+128>>>10<<5)]=n,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=t.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});e.SHA512=t._createHelper(u),e.HmacSHA512=t._createHmacHelper(u)}(),n.SHA512)}),sha384=createCommonjsModule(function(e,t){var n,r,a,o,i,s,c,l;e.exports=(a=(r=n=core).x64,o=a.Word,i=a.WordArray,s=r.algo,c=s.SHA512,l=s.SHA384=c.extend({_doReset:function(){this._hash=new i.init([new o.init(3418070365,3238371032),new o.init(1654270250,914150663),new o.init(2438529370,812702999),new o.init(355462360,4144912697),new o.init(1731405415,4290775857),new o.init(2394180231,1750603025),new o.init(3675008525,1694076839),new o.init(1203062813,3204075428)])},_doFinalize:function(){var e=c._doFinalize.call(this);return e.sigBytes-=16,e}}),r.SHA384=c._createHelper(l),r.HmacSHA384=c._createHmacHelper(l),n.SHA384)}),sha3=createCommonjsModule(function(e,t){var n;e.exports=(n=core,function(e){var t=n,r=t.lib,a=r.WordArray,o=r.Hasher,i=t.x64.Word,s=t.algo,c=[],l=[],u=[];!function(){for(var e=1,t=0,n=0;n<24;n++){c[e+5*t]=(n+1)*(n+2)/2%64;var r=(2*e+3*t)%5;e=t%5,t=r}for(e=0;e<5;e++)for(t=0;t<5;t++)l[e+5*t]=t+(2*e+3*t)%5*5;for(var a=1,o=0;o<24;o++){for(var s=0,d=0,h=0;h<7;h++){if(1&a){var f=(1<<h)-1;f<32?d^=1<<f:s^=1<<f-32}128&a?a=a<<1^113:a<<=1}u[o]=i.create(s,d)}}();var d=[];!function(){for(var e=0;e<25;e++)d[e]=i.create()}();var h=s.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new i.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var n=this._state,r=this.blockSize/2,a=0;a<r;a++){var o=e[t+2*a],i=e[t+2*a+1];o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),(C=n[a]).high^=i,C.low^=o}for(var s=0;s<24;s++){for(var h=0;h<5;h++){for(var f=0,p=0,m=0;m<5;m++)f^=(C=n[h+5*m]).high,p^=C.low;var _=d[h];_.high=f,_.low=p}for(h=0;h<5;h++){var v=d[(h+4)%5],g=d[(h+1)%5],b=g.high,y=g.low;for(f=v.high^(b<<1|y>>>31),p=v.low^(y<<1|b>>>31),m=0;m<5;m++)(C=n[h+5*m]).high^=f,C.low^=p}for(var N=1;N<25;N++){var x=(C=n[N]).high,w=C.low,k=c[N];k<32?(f=x<<k|w>>>32-k,p=w<<k|x>>>32-k):(f=w<<k-32|x>>>64-k,p=x<<k-32|w>>>64-k);var M=d[l[N]];M.high=f,M.low=p}var T=d[0],E=n[0];for(T.high=E.high,T.low=E.low,h=0;h<5;h++)for(m=0;m<5;m++){var C=n[N=h+5*m],S=d[N],$=d[(h+1)%5+5*m],D=d[(h+2)%5+5*m];C.high=S.high^~$.high&D.high,C.low=S.low^~$.low&D.low}C=n[0];var L=u[s];C.high^=L.high,C.low^=L.low}},_doFinalize:function(){var t=this._data,n=t.words,r=(this._nDataBytes,8*t.sigBytes),o=32*this.blockSize;n[r>>>5]|=1<<24-r%32,n[(e.ceil((r+1)/o)*o>>>5)-1]|=128,t.sigBytes=4*n.length,this._process();for(var i=this._state,s=this.cfg.outputLength/8,c=s/8,l=[],u=0;u<c;u++){var d=i[u],h=d.high,f=d.low;h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),l.push(f),l.push(h)}return new a.init(l,s)},clone:function(){for(var e=o.clone.call(this),t=e._state=this._state.slice(0),n=0;n<25;n++)t[n]=t[n].clone();return e}});t.SHA3=o._createHelper(h),t.HmacSHA3=o._createHmacHelper(h)}(Math),n.SHA3)}),ripemd160=createCommonjsModule(function(e,t){var n;e.exports=(n=core,function(e){var t=n,r=t.lib,a=r.WordArray,o=r.Hasher,i=t.algo,s=a.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=a.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),l=a.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),u=a.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),d=a.create([0,1518500249,1859775393,2400959708,2840853838]),h=a.create([1352829926,1548603684,1836072691,2053994217,0]),f=i.RIPEMD160=o.extend({_doReset:function(){this._hash=a.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var r=t+n,a=e[r];e[r]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}var o,i,f,y,N,x,w,k,M,T,E,C=this._hash.words,S=d.words,$=h.words,D=s.words,L=c.words,A=l.words,Y=u.words;for(x=o=C[0],w=i=C[1],k=f=C[2],M=y=C[3],T=N=C[4],n=0;n<80;n+=1)E=o+e[t+D[n]]|0,E+=n<16?p(i,f,y)+S[0]:n<32?m(i,f,y)+S[1]:n<48?_(i,f,y)+S[2]:n<64?v(i,f,y)+S[3]:g(i,f,y)+S[4],E=(E=b(E|=0,A[n]))+N|0,o=N,N=y,y=b(f,10),f=i,i=E,E=x+e[t+L[n]]|0,E+=n<16?g(w,k,M)+$[0]:n<32?v(w,k,M)+$[1]:n<48?_(w,k,M)+$[2]:n<64?m(w,k,M)+$[3]:p(w,k,M)+$[4],E=(E=b(E|=0,Y[n]))+T|0,x=T,T=M,M=b(k,10),k=w,w=E;E=C[1]+f+M|0,C[1]=C[2]+y+T|0,C[2]=C[3]+N+x|0,C[3]=C[4]+o+w|0,C[4]=C[0]+i+k|0,C[0]=E},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32,t[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process();for(var a=this._hash,o=a.words,i=0;i<5;i++){var s=o[i];o[i]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return a},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function p(e,t,n){return e^t^n}function m(e,t,n){return e&t|~e&n}function _(e,t,n){return(e|~t)^n}function v(e,t,n){return e&n|t&~n}function g(e,t,n){return e^(t|~n)}function b(e,t){return e<<t|e>>>32-t}t.RIPEMD160=o._createHelper(f),t.HmacRIPEMD160=o._createHmacHelper(f)}(Math),n.RIPEMD160)}),hmac=createCommonjsModule(function(e,t){var n,r,a,o,i,s;e.exports=(r=(n=core).lib,a=r.Base,o=n.enc,i=o.Utf8,s=n.algo,void(s.HMAC=a.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=i.parse(t));var n=e.blockSize,r=4*n;t.sigBytes>r&&(t=e.finalize(t)),t.clamp();for(var a=this._oKey=t.clone(),o=this._iKey=t.clone(),s=a.words,c=o.words,l=0;l<n;l++)s[l]^=1549556828,c[l]^=909522486;a.sigBytes=o.sigBytes=r,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,n=t.finalize(e);t.reset();var r=t.finalize(this._oKey.clone().concat(n));return r}})))}),pbkdf2=createCommonjsModule(function(e,t){var n,r,a,o,i,s,c,l,u;e.exports=(a=(r=n=core).lib,o=a.Base,i=a.WordArray,s=r.algo,c=s.SHA1,l=s.HMAC,u=s.PBKDF2=o.extend({cfg:o.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,r=l.create(n.hasher,e),a=i.create(),o=i.create([1]),s=a.words,c=o.words,u=n.keySize,d=n.iterations;s.length<u;){var h=r.update(t).finalize(o);r.reset();for(var f=h.words,p=f.length,m=h,_=1;_<d;_++){m=r.finalize(m),r.reset();for(var v=m.words,g=0;g<p;g++)f[g]^=v[g]}a.concat(h),c[0]++}return a.sigBytes=4*u,a}}),r.PBKDF2=function(e,t,n){return u.create(n).compute(e,t)},n.PBKDF2)}),evpkdf=createCommonjsModule(function(e,t){var n,r,a,o,i,s,c,l;e.exports=(a=(r=n=core).lib,o=a.Base,i=a.WordArray,s=r.algo,c=s.MD5,l=s.EvpKDF=o.extend({cfg:o.extend({keySize:4,hasher:c,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,r=n.hasher.create(),a=i.create(),o=a.words,s=n.keySize,c=n.iterations;o.length<s;){l&&r.update(l);var l=r.update(e).finalize(t);r.reset();for(var u=1;u<c;u++)l=r.finalize(l),r.reset();a.concat(l)}return a.sigBytes=4*s,a}}),r.EvpKDF=function(e,t,n){return l.create(n).compute(e,t)},n.EvpKDF)}),cipherCore=createCommonjsModule(function(e,t){var n;e.exports=void((n=core).lib.Cipher||function(e){var t=n,r=t.lib,a=r.Base,o=r.WordArray,i=r.BufferedBlockAlgorithm,s=t.enc,c=(s.Utf8,s.Base64),l=t.algo,u=l.EvpKDF,d=r.Cipher=i.extend({cfg:a.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?w:y}return function(t){return{encrypt:function(n,r,a){return e(r).encrypt(t,n,r,a)},decrypt:function(n,r,a){return e(r).decrypt(t,n,r,a)}}}}()}),h=(r.StreamCipher=d.extend({_doFinalize:function(){var e=this._process(!0);return e},blockSize:1}),t.mode={}),f=r.BlockCipherMode=a.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),p=h.CBC=function(){var t=f.extend();function n(t,n,r){var a=this._iv;if(a){var o=a;this._iv=e}else var o=this._prevBlock;for(var i=0;i<r;i++)t[n+i]^=o[i]}return t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,a=r.blockSize;n.call(this,e,t,a),r.encryptBlock(e,t),this._prevBlock=e.slice(t,t+a)}}),t.Decryptor=t.extend({processBlock:function(e,t){var r=this._cipher,a=r.blockSize,o=e.slice(t,t+a);r.decryptBlock(e,t),n.call(this,e,t,a),this._prevBlock=o}}),t}(),m=t.pad={},_=m.Pkcs7={pad:function(e,t){for(var n=4*t,r=n-e.sigBytes%n,a=r<<24|r<<16|r<<8|r,i=[],s=0;s<r;s+=4)i.push(a);var c=o.create(i,r);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},v=(r.BlockCipher=d.extend({cfg:d.cfg.extend({mode:p,padding:_}),reset:function(){d.reset.call(this);var e=this.cfg,t=e.iv,n=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=n.createEncryptor;else{var r=n.createDecryptor;this._minBufferSize=1}this._mode&&this._mode.__creator==r?this._mode.init(this,t&&t.words):(this._mode=r.call(n,this,t&&t.words),this._mode.__creator=r)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else{var t=this._process(!0);e.unpad(t)}return t},blockSize:4}),r.CipherParams=a.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),g=t.format={},b=g.OpenSSL={stringify:function(e){var t=e.ciphertext,n=e.salt;if(n)var r=o.create([1398893684,1701076831]).concat(n).concat(t);else var r=t;return r.toString(c)},parse:function(e){var t=c.parse(e),n=t.words;if(1398893684==n[0]&&1701076831==n[1]){var r=o.create(n.slice(2,4));n.splice(0,4),t.sigBytes-=16}return v.create({ciphertext:t,salt:r})}},y=r.SerializableCipher=a.extend({cfg:a.extend({format:b}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var a=e.createEncryptor(n,r),o=a.finalize(t),i=a.cfg;return v.create({ciphertext:o,key:n,iv:i.iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var a=e.createDecryptor(n,r).finalize(t.ciphertext);return a},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),N=t.kdf={},x=N.OpenSSL={execute:function(e,t,n,r){r||(r=o.random(8));var a=u.create({keySize:t+n}).compute(e,r),i=o.create(a.words.slice(t),4*n);return a.sigBytes=4*t,v.create({key:a,iv:i,salt:r})}},w=r.PasswordBasedCipher=y.extend({cfg:y.cfg.extend({kdf:x}),encrypt:function(e,t,n,r){var a=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize);r.iv=a.iv;var o=y.encrypt.call(this,e,t,a.key,r);return o.mixIn(a),o},decrypt:function(e,t,n,r){r=this.cfg.extend(r),t=this._parse(t,r.format);var a=r.kdf.execute(n,e.keySize,e.ivSize,t.salt);r.iv=a.iv;var o=y.decrypt.call(this,e,t,a.key,r);return o}})}())}),modeCfb=createCommonjsModule(function(e,t){var n;e.exports=((n=core).mode.CFB=function(){var e=n.lib.BlockCipherMode.extend();function t(e,t,n,r){var a=this._iv;if(a){var o=a.slice(0);this._iv=void 0}else o=this._prevBlock;r.encryptBlock(o,0);for(var i=0;i<n;i++)e[t+i]^=o[i]}return e.Encryptor=e.extend({processBlock:function(e,n){var r=this._cipher,a=r.blockSize;t.call(this,e,n,a,r),this._prevBlock=e.slice(n,n+a)}}),e.Decryptor=e.extend({processBlock:function(e,n){var r=this._cipher,a=r.blockSize,o=e.slice(n,n+a);t.call(this,e,n,a,r),this._prevBlock=o}}),e}(),n.mode.CFB)}),modeCtr=createCommonjsModule(function(e,t){var n,r,a;e.exports=((n=core).mode.CTR=(r=n.lib.BlockCipherMode.extend(),a=r.Encryptor=r.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,a=this._iv,o=this._counter;a&&(o=this._counter=a.slice(0),this._iv=void 0);var i=o.slice(0);n.encryptBlock(i,0),o[r-1]=o[r-1]+1|0;for(var s=0;s<r;s++)e[t+s]^=i[s]}}),r.Decryptor=a,r),n.mode.CTR)}),modeCtrGladman=createCommonjsModule(function(e,t){var n;e.exports=((n=core).mode.CTRGladman=function(){var e=n.lib.BlockCipherMode.extend();function t(e){if(255==(e>>24&255)){var t=e>>16&255,n=e>>8&255,r=255&e;255===t?(t=0,255===n?(n=0,255===r?r=0:++r):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=r}else e+=1<<24;return e}var r=e.Encryptor=e.extend({processBlock:function(e,n){var r=this._cipher,a=r.blockSize,o=this._iv,i=this._counter;o&&(i=this._counter=o.slice(0),this._iv=void 0),function(e){0===(e[0]=t(e[0]))&&(e[1]=t(e[1]))}(i);var s=i.slice(0);r.encryptBlock(s,0);for(var c=0;c<a;c++)e[n+c]^=s[c]}});return e.Decryptor=r,e}(),n.mode.CTRGladman)}),modeOfb=createCommonjsModule(function(e,t){var n,r,a;e.exports=((n=core).mode.OFB=(r=n.lib.BlockCipherMode.extend(),a=r.Encryptor=r.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,a=this._iv,o=this._keystream;a&&(o=this._keystream=a.slice(0),this._iv=void 0),n.encryptBlock(o,0);for(var i=0;i<r;i++)e[t+i]^=o[i]}}),r.Decryptor=a,r),n.mode.OFB)}),modeEcb=createCommonjsModule(function(e,t){var n,r;e.exports=((n=core).mode.ECB=((r=n.lib.BlockCipherMode.extend()).Encryptor=r.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),r.Decryptor=r.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),r),n.mode.ECB)}),padAnsix923=createCommonjsModule(function(e,t){var n;e.exports=((n=core).pad.AnsiX923={pad:function(e,t){var n=e.sigBytes,r=4*t,a=r-n%r,o=n+a-1;e.clamp(),e.words[o>>>2]|=a<<24-o%4*8,e.sigBytes+=a},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},n.pad.Ansix923)}),padIso10126=createCommonjsModule(function(e,t){var n;e.exports=((n=core).pad.Iso10126={pad:function(e,t){var r=4*t,a=r-e.sigBytes%r;e.concat(n.lib.WordArray.random(a-1)).concat(n.lib.WordArray.create([a<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},n.pad.Iso10126)}),padIso97971=createCommonjsModule(function(e,t){var n;e.exports=((n=core).pad.Iso97971={pad:function(e,t){e.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(e,t)},unpad:function(e){n.pad.ZeroPadding.unpad(e),e.sigBytes--}},n.pad.Iso97971)}),padZeropadding=createCommonjsModule(function(e,t){var n;e.exports=((n=core).pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){for(var t=e.words,n=e.sigBytes-1;!(t[n>>>2]>>>24-n%4*8&255);)n--;e.sigBytes=n+1}},n.pad.ZeroPadding)}),padNopadding=createCommonjsModule(function(e,t){var n;e.exports=((n=core).pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding)}),formatHex=createCommonjsModule(function(e,t){var n,r,a,o;e.exports=(a=(r=n=core).lib.CipherParams,o=r.enc.Hex,r.format.Hex={stringify:function(e){return e.ciphertext.toString(o)},parse:function(e){var t=o.parse(e);return a.create({ciphertext:t})}},n.format.Hex)}),aes=createCommonjsModule(function(e,t){var n;e.exports=(n=core,function(){var e=n,t=e.lib.BlockCipher,r=e.algo,a=[],o=[],i=[],s=[],c=[],l=[],u=[],d=[],h=[],f=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var n=0,r=0;for(t=0;t<256;t++){var p=r^r<<1^r<<2^r<<3^r<<4;p=p>>>8^255&p^99,a[n]=p,o[p]=n;var m=e[n],_=e[m],v=e[_],g=257*e[p]^16843008*p;i[n]=g<<24|g>>>8,s[n]=g<<16|g>>>16,c[n]=g<<8|g>>>24,l[n]=g,g=16843009*v^65537*_^257*m^16843008*n,u[p]=g<<24|g>>>8,d[p]=g<<16|g>>>16,h[p]=g<<8|g>>>24,f[p]=g,n?(n=m^e[e[e[v^m]]],r^=e[e[r]]):n=r=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],m=r.AES=t.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,n=e.sigBytes/4,r=4*((this._nRounds=n+6)+1),o=this._keySchedule=[],i=0;i<r;i++)if(i<n)o[i]=t[i];else{var s=o[i-1];i%n?n>6&&i%n==4&&(s=a[s>>>24]<<24|a[s>>>16&255]<<16|a[s>>>8&255]<<8|a[255&s]):(s=a[(s=s<<8|s>>>24)>>>24]<<24|a[s>>>16&255]<<16|a[s>>>8&255]<<8|a[255&s],s^=p[i/n|0]<<24),o[i]=o[i-n]^s}for(var c=this._invKeySchedule=[],l=0;l<r;l++)i=r-l,s=l%4?o[i]:o[i-4],c[l]=l<4||i<=4?s:u[a[s>>>24]]^d[a[s>>>16&255]]^h[a[s>>>8&255]]^f[a[255&s]]}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,i,s,c,l,a)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,u,d,h,f,o),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,a,o,i,s){for(var c=this._nRounds,l=e[t]^n[0],u=e[t+1]^n[1],d=e[t+2]^n[2],h=e[t+3]^n[3],f=4,p=1;p<c;p++){var m=r[l>>>24]^a[u>>>16&255]^o[d>>>8&255]^i[255&h]^n[f++],_=r[u>>>24]^a[d>>>16&255]^o[h>>>8&255]^i[255&l]^n[f++],v=r[d>>>24]^a[h>>>16&255]^o[l>>>8&255]^i[255&u]^n[f++],g=r[h>>>24]^a[l>>>16&255]^o[u>>>8&255]^i[255&d]^n[f++];l=m,u=_,d=v,h=g}m=(s[l>>>24]<<24|s[u>>>16&255]<<16|s[d>>>8&255]<<8|s[255&h])^n[f++],_=(s[u>>>24]<<24|s[d>>>16&255]<<16|s[h>>>8&255]<<8|s[255&l])^n[f++],v=(s[d>>>24]<<24|s[h>>>16&255]<<16|s[l>>>8&255]<<8|s[255&u])^n[f++],g=(s[h>>>24]<<24|s[l>>>16&255]<<16|s[u>>>8&255]<<8|s[255&d])^n[f++],e[t]=m,e[t+1]=_,e[t+2]=v,e[t+3]=g},keySize:8});e.AES=t._createHelper(m)}(),n.AES)}),tripledes=createCommonjsModule(function(e,t){var n;e.exports=(n=core,function(){var e=n,t=e.lib,r=t.WordArray,a=t.BlockCipher,o=e.algo,i=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],l=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],u=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=o.DES=a.extend({_doReset:function(){for(var e=this._key.words,t=[],n=0;n<56;n++){var r=i[n]-1;t[n]=e[r>>>5]>>>31-r%32&1}for(var a=this._subKeys=[],o=0;o<16;o++){var l=a[o]=[],u=c[o];for(n=0;n<24;n++)l[n/6|0]|=t[(s[n]-1+u)%28]<<31-n%6,l[4+(n/6|0)]|=t[28+(s[n+24]-1+u)%28]<<31-n%6;for(l[0]=l[0]<<1|l[0]>>>31,n=1;n<7;n++)l[n]=l[n]>>>4*(n-1)+3;l[7]=l[7]<<5|l[7]>>>27}var d=this._invSubKeys=[];for(n=0;n<16;n++)d[n]=a[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,n){this._lBlock=e[t],this._rBlock=e[t+1],h.call(this,4,252645135),h.call(this,16,65535),f.call(this,2,858993459),f.call(this,8,16711935),h.call(this,1,1431655765);for(var r=0;r<16;r++){for(var a=n[r],o=this._lBlock,i=this._rBlock,s=0,c=0;c<8;c++)s|=l[c][((i^a[c])&u[c])>>>0];this._lBlock=i,this._rBlock=o^s}var d=this._lBlock;this._lBlock=this._rBlock,this._rBlock=d,h.call(this,1,1431655765),f.call(this,8,16711935),f.call(this,2,858993459),h.call(this,16,65535),h.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function h(e,t){var n=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=n,this._lBlock^=n<<e}function f(e,t){var n=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=n,this._rBlock^=n<<e}e.DES=a._createHelper(d);var p=o.TripleDES=a.extend({_doReset:function(){var e=this._key.words;this._des1=d.createEncryptor(r.create(e.slice(0,2))),this._des2=d.createEncryptor(r.create(e.slice(2,4))),this._des3=d.createEncryptor(r.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});e.TripleDES=a._createHelper(p)}(),n.TripleDES)}),rc4=createCommonjsModule(function(e,t){var n;e.exports=(n=core,function(){var e=n,t=e.lib.StreamCipher,r=e.algo,a=r.RC4=t.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes,r=this._S=[],a=0;a<256;a++)r[a]=a;a=0;for(var o=0;a<256;a++){var i=a%n,s=t[i>>>2]>>>24-i%4*8&255;o=(o+r[a]+s)%256;var c=r[a];r[a]=r[o],r[o]=c}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=o.call(this)},keySize:8,ivSize:0});function o(){for(var e=this._S,t=this._i,n=this._j,r=0,a=0;a<4;a++){n=(n+e[t=(t+1)%256])%256;var o=e[t];e[t]=e[n],e[n]=o,r|=e[(e[t]+e[n])%256]<<24-8*a}return this._i=t,this._j=n,r}e.RC4=t._createHelper(a);var i=r.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)o.call(this)}});e.RC4Drop=t._createHelper(i)}(),n.RC4)}),rabbit=createCommonjsModule(function(e,t){var n;e.exports=(n=core,function(){var e=n,t=e.lib.StreamCipher,r=[],a=[],o=[],i=e.algo.Rabbit=t.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,n=0;n<4;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);var r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],a=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,n=0;n<4;n++)s.call(this);for(n=0;n<8;n++)a[n]^=r[n+4&7];if(t){var o=t.words,i=o[0],c=o[1],l=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),u=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),d=l>>>16|4294901760&u,h=u<<16|65535&l;for(a[0]^=l,a[1]^=d,a[2]^=u,a[3]^=h,a[4]^=l,a[5]^=d,a[6]^=u,a[7]^=h,n=0;n<4;n++)s.call(this)}},_doProcessBlock:function(e,t){var n=this._X;s.call(this),r[0]=n[0]^n[5]>>>16^n[3]<<16,r[1]=n[2]^n[7]>>>16^n[5]<<16,r[2]=n[4]^n[1]>>>16^n[7]<<16,r[3]=n[6]^n[3]>>>16^n[1]<<16;for(var a=0;a<4;a++)r[a]=16711935&(r[a]<<8|r[a]>>>24)|4278255360&(r[a]<<24|r[a]>>>8),e[t+a]^=r[a]},blockSize:4,ivSize:2});function s(){for(var e=this._X,t=this._C,n=0;n<8;n++)a[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0)|0,this._b=t[7]>>>0<a[7]>>>0?1:0,n=0;n<8;n++){var r=e[n]+t[n],i=65535&r,s=r>>>16,c=((i*i>>>17)+i*s>>>15)+s*s,l=((4294901760&r)*r|0)+((65535&r)*r|0);o[n]=c^l}e[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,e[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,e[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,e[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,e[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,e[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,e[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,e[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}e.Rabbit=t._createHelper(i)}(),n.Rabbit)}),rabbitLegacy=createCommonjsModule(function(e,t){var n;e.exports=(n=core,function(){var e=n,t=e.lib.StreamCipher,r=[],a=[],o=[],i=e.algo.RabbitLegacy=t.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],r=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var a=0;a<4;a++)s.call(this);for(a=0;a<8;a++)r[a]^=n[a+4&7];if(t){var o=t.words,i=o[0],c=o[1],l=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),u=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),d=l>>>16|4294901760&u,h=u<<16|65535&l;for(r[0]^=l,r[1]^=d,r[2]^=u,r[3]^=h,r[4]^=l,r[5]^=d,r[6]^=u,r[7]^=h,a=0;a<4;a++)s.call(this)}},_doProcessBlock:function(e,t){var n=this._X;s.call(this),r[0]=n[0]^n[5]>>>16^n[3]<<16,r[1]=n[2]^n[7]>>>16^n[5]<<16,r[2]=n[4]^n[1]>>>16^n[7]<<16,r[3]=n[6]^n[3]>>>16^n[1]<<16;for(var a=0;a<4;a++)r[a]=16711935&(r[a]<<8|r[a]>>>24)|4278255360&(r[a]<<24|r[a]>>>8),e[t+a]^=r[a]},blockSize:4,ivSize:2});function s(){for(var e=this._X,t=this._C,n=0;n<8;n++)a[n]=t[n];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0)|0,this._b=t[7]>>>0<a[7]>>>0?1:0,n=0;n<8;n++){var r=e[n]+t[n],i=65535&r,s=r>>>16,c=((i*i>>>17)+i*s>>>15)+s*s,l=((4294901760&r)*r|0)+((65535&r)*r|0);o[n]=c^l}e[0]=o[0]+(o[7]<<16|o[7]>>>16)+(o[6]<<16|o[6]>>>16)|0,e[1]=o[1]+(o[0]<<8|o[0]>>>24)+o[7]|0,e[2]=o[2]+(o[1]<<16|o[1]>>>16)+(o[0]<<16|o[0]>>>16)|0,e[3]=o[3]+(o[2]<<8|o[2]>>>24)+o[1]|0,e[4]=o[4]+(o[3]<<16|o[3]>>>16)+(o[2]<<16|o[2]>>>16)|0,e[5]=o[5]+(o[4]<<8|o[4]>>>24)+o[3]|0,e[6]=o[6]+(o[5]<<16|o[5]>>>16)+(o[4]<<16|o[4]>>>16)|0,e[7]=o[7]+(o[6]<<8|o[6]>>>24)+o[5]|0}e.RabbitLegacy=t._createHelper(i)}(),n.RabbitLegacy)}),cryptoJs=createCommonjsModule(function(e,t){e.exports=core});function emailError(e){var t=e.remoteEmailError;return t||""}function passwordError(e){var t=e.password,n=e.remotePasswordError;return n||(t&&(!t||t.length<6)?"Password must be at least six characters":"")}function password2Error(e){var t=e.passwordError,n=e.password,r=e.password2;return t?"":r!=n?"The two passwords must be identical":""}function data$18(){return{successMsg:"",errorMsg:"",email:"",password:"",password2:"",remoteEmailError:"",remotePasswordError:"",keeplogin:!0,loginForm:!0,resetPassword:!1,alternativeSignIns:[]}}var methods$13={login:function(e,t,n){var r=this,a=this.encryptPassword(t);postJSON("/api/auth/login",JSON.stringify({email:e,pwhash:a,keeplogin:n}),function(e){"ok"==e.status?r.store.set({user:e.data}):console.log("error",e)})},signUp:function(){},reset:function(){this.set({successMsg:"",errorMsg:"",remotePasswordError:"",remoteEmailError:""})},sendNewPassword:function(e){var t=this;if(!e)return this.set({errorMsg:"email must not be empty"});this.reset(),postJSON("/api/account/reset-password",JSON.stringify({email:e}),function(e){"ok"==e.status?t.set({resetPassword:!1,successMsg:e.data}):t.set({resetPassword:!1,remoteEmailError:e.message})})},toSignUp:function(e,t){e.preventDefault(),this.set({loginForm:!t})},resetPassword:function(e,t){e.preventDefault(),this.set({resetPassword:t})},encryptPassword:function(e){var t=window.dw.backend.__auth_salt;return cryptoJs.HmacSHA256(e,t).toString()}};function oncreate$9(){var e=this;getJSON("/api/auth/alternative-signins",function(t){"ok"==t.status&&e.set({alternativeSignIns:t.data})})}function create_main_fragment$20(e,t){var n;function r(e){return e.loginForm?create_if_block$13:create_if_block_9$2}var a=r(t),o=a(e,t);return{c:function(){o.c(),n=createComment()},m:function(e,t){o.m(e,t),insertNode(n,e,t)},p:function(t,i){a===(a=r(i))&&o?o.p(t,i):(o.u(),o.d(),(o=a(e,i)).c(),o.m(n.parentNode,n))},u:function(){o.u(),detachNode(n)},d:function(){o.d()}}}function create_if_block_1$9(e,t){var n;return{c:function(){n=createElement("div"),this.h()},h:function(){n.className="alert alert-success"},m:function(e,r){insertNode(n,e,r),n.innerHTML=t.successMsg},p:function(e,t){e.successMsg&&(n.innerHTML=t.successMsg)},u:function(){n.innerHTML="",detachNode(n)},d:noop}}function create_if_block_2$6(e,t){var n;return{c:function(){n=createElement("div"),this.h()},h:function(){n.className="alert alert-error"},m:function(e,r){insertNode(n,e,r),n.innerHTML=t.errorMsg},p:function(e,t){e.errorMsg&&(n.innerHTML=t.errorMsg)},u:function(){n.innerHTML="",detachNode(n)},d:noop}}function create_if_block_3$3(e,t){var n,r,a,o,i,s,c,l,u,d,h,f,p,m,_,v,g,b=__("password"),y=!1,N=__("Remember login?");function x(){y=!0,e.set({password:s.value}),y=!1}function w(){e.set({keeplogin:_.checked})}return{c:function(){n=createElement("div"),r=createElement("label"),a=createText(b),o=createText("\n                "),i=createElement("div"),s=createElement("input"),c=createText("\n                    "),l=createElement("span"),u=createText(t.passwordError),h=createText("\n            "),f=createElement("div"),p=createElement("div"),m=createElement("label"),_=createElement("input"),v=createText("  "),g=createText(N),this.h()},h:function(){r.className="control-label svelte-ll2rku",addListener(s,"input",x),s.className="input-xlarge span3 svelte-ll2rku",setAttribute(s,"type","password"),s.placeholder="",l.className="help-inline",i.className="controls",n.className=d="control-group "+(t.passwordError?"error":"")+" svelte-ll2rku",addListener(_,"change",w),setAttribute(_,"type","checkbox"),_.className="svelte-ll2rku",m.className="checkbox",p.className="controls",f.className="control-group"},m:function(e,d){insertNode(n,e,d),appendNode(r,n),appendNode(a,r),appendNode(o,n),appendNode(i,n),appendNode(s,i),s.value=t.password,appendNode(c,i),appendNode(l,i),appendNode(u,l),insertNode(h,e,d),insertNode(f,e,d),appendNode(p,f),appendNode(m,p),appendNode(_,m),_.checked=t.keeplogin,appendNode(v,m),appendNode(g,m)},p:function(e,t){y||(s.value=t.password),e.passwordError&&(u.data=t.passwordError),e.passwordError&&d!==(d="control-group "+(t.passwordError?"error":"")+" svelte-ll2rku")&&(n.className=d),_.checked=t.keeplogin},u:function(){detachNode(n),detachNode(h),detachNode(f)},d:function(){removeListener(s,"input",x),removeListener(_,"change",w)}}}function create_if_block_4$2(e,t){var n,r,a,o,i,s,c=__("Login"),l=__("login / signup / headline");function u(t){var n=e.get();e.login(n.email,n.password,n.keeplogin)}function d(t){e.toSignUp(t,!0)}return{c:function(){n=createElement("button"),r=createElement("i"),a=createText(" "),o=createText(c),i=createText("\n          or  \n        "),s=createElement("button"),this.h()},h:function(){r.className="fa fa-sign-in fa-fw",addListener(n,"click",u),n.className="btn btn-large btn-primary",addListener(s,"click",d),s.className="btn btn-large"},m:function(e,t){insertNode(n,e,t),appendNode(r,n),appendNode(a,n),appendNode(o,n),insertNode(i,e,t),insertNode(s,e,t),s.innerHTML=l},p:noop,u:function(){s.innerHTML="",detachNode(n),detachNode(i),detachNode(s)},d:function(){removeListener(n,"click",u),removeListener(s,"click",d)}}}function create_if_block_5$2(e,t){var n,r,a=__("Send new password");function o(t){var n=e.get();e.sendNewPassword(n.email)}return{c:function(){n=createElement("button"),r=createText(a),this.h()},h:function(){addListener(n,"click",o),n.className="btn btn-large btn-info"},m:function(e,t){insertNode(n,e,t),appendNode(r,n)},p:noop,u:function(){detachNode(n)},d:function(){removeListener(n,"click",o)}}}function create_if_block_6$2(e,t){var n,r,a=__("Return to login...");function o(t){e.resetPassword(t,!1)}return{c:function(){n=createElement("a"),r=createText(a),this.h()},h:function(){addListener(n,"click",o),n.href="#"},m:function(e,t){insertNode(n,e,t),appendNode(r,n)},u:function(){detachNode(n)},d:function(){removeListener(n,"click",o)}}}function create_if_block_7$2(e,t){var n,r,a=__("Can't recall your password?");function o(t){e.resetPassword(t,!0)}return{c:function(){n=createElement("a"),r=createText(a),this.h()},h:function(){addListener(n,"click",o),n.href="#"},m:function(e,t){insertNode(n,e,t),appendNode(r,n)},u:function(){detachNode(n)},d:function(){removeListener(n,"click",o)}}}function create_each_block$10(e,t){var n,r,a,o,i,s,c,l=t.signin,u=(t.each_value,t.signin_index,l.label);return{c:function(){n=createElement("a"),r=createElement("i"),o=createText(" "),i=createText(u),c=createText("  "),this.h()},h:function(){r.className=a=l.icon+" svelte-ll2rku",n.className="btn",n.href=s=l.url},m:function(e,t){insertNode(n,e,t),appendNode(r,n),appendNode(o,n),appendNode(i,n),insertNode(c,e,t)},p:function(e,t){l=t.signin,t.each_value,t.signin_index,e.alternativeSignIns&&a!==(a=l.icon+" svelte-ll2rku")&&(r.className=a),e.alternativeSignIns&&u!==(u=l.label)&&(i.data=u),e.alternativeSignIns&&s!==(s=l.url)&&(n.href=s)},u:function(){detachNode(n),detachNode(c)},d:noop}}function create_if_block_8$2(e,t){for(var n,r,a,o,i,s=t.alternativeSignIns,c=[],l=0;l<s.length;l+=1)c[l]=create_each_block$10(e,assign(assign({},t),{each_value:s,signin:s[l],signin_index:l}));return{c:function(){n=createElement("div"),r=createElement("hr"),a=createText("\n        "),(o=createElement("p")).textContent="Alternatively, you can sign in using these providers:",i=createText("\n        ");for(var e=0;e<c.length;e+=1)c[e].c();this.h()},h:function(){o.className="svelte-ll2rku",setStyle(n,"margin-top","10px")},m:function(e,t){insertNode(n,e,t),appendNode(r,n),appendNode(a,n),appendNode(o,n),appendNode(i,n);for(var s=0;s<c.length;s+=1)c[s].m(n,null)},p:function(t,r){var a=r.alternativeSignIns;if(t.alternativeSignIns){for(var o=0;o<a.length;o+=1){var i=assign(assign({},r),{each_value:a,signin:a[o],signin_index:o});c[o]?c[o].p(t,i):(c[o]=create_each_block$10(e,i),c[o].c(),c[o].m(n,null))}for(;o<c.length;o+=1)c[o].u(),c[o].d();c.length=a.length}},u:function(){detachNode(n);for(var e=0;e<c.length;e+=1)c[e].u()},d:function(){destroyEach(c)}}}function create_if_block$13(e,t){var n,r,a,o,i,s,c,l,u,d,h,f,p,m,_,v,g,b,y,N,x,w,k,M,T=__("login / login / headline"),E=__("login / login / intro"),C=__("email"),S=!1,$=t.successMsg&&create_if_block_1$9(e,t),D=t.errorMsg&&create_if_block_2$6(e,t);function L(){S=!0,e.set({email:m.value}),S=!1}var A=!t.resetPassword&&create_if_block_3$3(e,t);function Y(e){return e.resetPassword?create_if_block_5$2:create_if_block_4$2}var H=Y(t),F=H(e,t);function R(e){return e.resetPassword?create_if_block_6$2:create_if_block_7$2}var B=R(t),I=B(e,t),U=t.alternativeSignIns.length&&create_if_block_8$2(e,t);return{c:function(){n=createElement("h2"),r=createText("\n    "),a=createElement("p"),o=createText("\n\n    "),i=createElement("div"),$&&$.c(),s=createText("\n        "),D&&D.c(),c=createText("\n        "),l=createElement("form"),u=createElement("div"),d=createElement("label"),h=createText(C),f=createText("\n                "),p=createElement("div"),m=createElement("input"),_=createText("\n                    "),v=createElement("span"),g=createText(t.emailError),y=createText("\n            "),A&&A.c(),N=createText("\n\n        "),F.c(),x=createText("\n\n        "),w=createElement("div"),I.c(),k=createText("\n\n    "),U&&U.c(),M=createComment(),this.h()},h:function(){a.className="svelte-ll2rku",d.className="control-label svelte-ll2rku",addListener(m,"input",L),m.className="input-xlarge span3 svelte-ll2rku",setAttribute(m,"type","email"),m.placeholder="name@example.com",v.className="help-inline",p.className="controls",u.className=b="control-group "+(t.emailError?"error":"")+" svelte-ll2rku",l.className="form-vertical",setStyle(w,"margin-top","10px"),i.className="login-form"},m:function(e,b){insertNode(n,e,b),n.innerHTML=T,insertNode(r,e,b),insertNode(a,e,b),a.innerHTML=E,insertNode(o,e,b),insertNode(i,e,b),$&&$.m(i,null),appendNode(s,i),D&&D.m(i,null),appendNode(c,i),appendNode(l,i),appendNode(u,l),appendNode(d,u),appendNode(h,d),appendNode(f,u),appendNode(p,u),appendNode(m,p),m.value=t.email,appendNode(_,p),appendNode(v,p),appendNode(g,v),appendNode(y,l),A&&A.m(l,null),appendNode(N,i),F.m(i,null),appendNode(x,i),appendNode(w,i),I.m(w,null),insertNode(k,e,b),U&&U.m(e,b),insertNode(M,e,b)},p:function(t,n){n.successMsg?$?$.p(t,n):(($=create_if_block_1$9(e,n)).c(),$.m(i,s)):$&&($.u(),$.d(),$=null),n.errorMsg?D?D.p(t,n):((D=create_if_block_2$6(e,n)).c(),D.m(i,c)):D&&(D.u(),D.d(),D=null),S||(m.value=n.email),t.emailError&&(g.data=n.emailError),t.emailError&&b!==(b="control-group "+(n.emailError?"error":"")+" svelte-ll2rku")&&(u.className=b),n.resetPassword?A&&(A.u(),A.d(),A=null):A?A.p(t,n):((A=create_if_block_3$3(e,n)).c(),A.m(l,null)),H===(H=Y(n))&&F?F.p(t,n):(F.u(),F.d(),(F=H(e,n)).c(),F.m(i,x)),B!==(B=R(n))&&(I.u(),I.d(),(I=B(e,n)).c(),I.m(w,null)),n.alternativeSignIns.length?U?U.p(t,n):((U=create_if_block_8$2(e,n)).c(),U.m(M.parentNode,M)):U&&(U.u(),U.d(),U=null)},u:function(){n.innerHTML="",a.innerHTML="",detachNode(n),detachNode(r),detachNode(a),detachNode(o),detachNode(i),$&&$.u(),D&&D.u(),A&&A.u(),F.u(),I.u(),detachNode(k),U&&U.u(),detachNode(M)},d:function(){$&&$.d(),D&&D.d(),removeListener(m,"input",L),A&&A.d(),F.d(),I.d(),U&&U.d()}}}function create_if_block_9$2(e,t){var n,r,a,o,i,s,c,l,u,d,h,f,p,m,_,v,g,b,y,N,x,w,k,M,T,E,C,S,$,D,L,A,Y,H,F,R,B,I,U,O,P,j,z,W,V,q=__("login / signup / headline"),G=__("login / signup / intro"),J=__("email"),X=!1,K=__("password"),Z=!1,Q=__("repeat password"),ee=!1,te=__("Sign Up"),ne=__("Login");function re(){X=!0,e.set({email:h.value}),X=!1}function ae(){Z=!0,e.set({password:w.value}),Z=!1}function oe(){ee=!0,e.set({password2:Y.value}),ee=!1}function ie(t){e.signUp()}function se(t){e.toSignUp(t,!1)}return{c:function(){n=createElement("h2"),r=createText("\n    "),a=createElement("p"),o=createText("\n\n    "),i=createElement("form"),s=createElement("div"),c=createElement("label"),l=createText(J),u=createText("\n            "),d=createElement("div"),h=createElement("input"),f=createText("\n                "),p=createElement("span"),m=createText(t.emailError),v=createText("\n        "),g=createElement("div"),b=createElement("label"),y=createText(K),N=createText("\n            "),x=createElement("div"),w=createElement("input"),k=createText("\n                "),M=createElement("span"),T=createText(t.passwordError),C=createText("\n        "),S=createElement("div"),$=createElement("label"),D=createText(Q),L=createText("\n            "),A=createElement("div"),Y=createElement("input"),H=createText("\n                "),F=createElement("span"),R=createText(t.password2Error),I=createText("\n\n    "),U=createElement("a"),O=createElement("i"),P=createText(" "),j=createText(te),z=createText("\n      or  \n    "),W=createElement("a"),V=createText(ne),this.h()},h:function(){a.className="svelte-ll2rku",c.className="control-label svelte-ll2rku",addListener(h,"input",re),h.dataset.lpignore="true",h.className="input-xxlarge span3 svelte-ll2rku",setAttribute(h,"type","email"),h.placeholder="name@example.com",p.className="help-inline",d.className="controls",s.className=_="control-group "+(t.emailError?"error":"")+" svelte-ll2rku",b.className="control-label svelte-ll2rku",addListener(w,"input",ae),w.dataset.lpignore="true",w.className="input-xxlarge span3 svelte-ll2rku",setAttribute(w,"type","password"),w.placeholder="",M.className="help-inline",x.className="controls",g.className=E="control-group "+(t.passwordError?"error":"")+" svelte-ll2rku",$.className="control-label svelte-ll2rku",addListener(Y,"input",oe),Y.dataset.lpignore="true",Y.className="input-xxlarge span3 svelte-ll2rku",setAttribute(Y,"type","password"),Y.placeholder="",F.className="help-inline",A.className="controls",S.className=B="control-group "+(t.password2Error?"error":"")+" svelte-ll2rku",i.className="form-vertical",O.className="fa fa-pencil fa-fw",addListener(U,"click",ie),U.className="btn btn-large btn-primary",addListener(W,"click",se),W.className="btn btn-login btn-large"},m:function(e,_){insertNode(n,e,_),n.innerHTML=q,insertNode(r,e,_),insertNode(a,e,_),a.innerHTML=G,insertNode(o,e,_),insertNode(i,e,_),appendNode(s,i),appendNode(c,s),appendNode(l,c),appendNode(u,s),appendNode(d,s),appendNode(h,d),h.value=t.email,appendNode(f,d),appendNode(p,d),appendNode(m,p),appendNode(v,i),appendNode(g,i),appendNode(b,g),appendNode(y,b),appendNode(N,g),appendNode(x,g),appendNode(w,x),w.value=t.password,appendNode(k,x),appendNode(M,x),appendNode(T,M),appendNode(C,i),appendNode(S,i),appendNode($,S),appendNode(D,$),appendNode(L,S),appendNode(A,S),appendNode(Y,A),Y.value=t.password2,appendNode(H,A),appendNode(F,A),appendNode(R,F),insertNode(I,e,_),insertNode(U,e,_),appendNode(O,U),appendNode(P,U),appendNode(j,U),insertNode(z,e,_),insertNode(W,e,_),appendNode(V,W)},p:function(e,t){X||(h.value=t.email),e.emailError&&(m.data=t.emailError),e.emailError&&_!==(_="control-group "+(t.emailError?"error":"")+" svelte-ll2rku")&&(s.className=_),Z||(w.value=t.password),e.passwordError&&(T.data=t.passwordError),e.passwordError&&E!==(E="control-group "+(t.passwordError?"error":"")+" svelte-ll2rku")&&(g.className=E),ee||(Y.value=t.password2),e.password2Error&&(R.data=t.password2Error),e.password2Error&&B!==(B="control-group "+(t.password2Error?"error":"")+" svelte-ll2rku")&&(S.className=B)},u:function(){n.innerHTML="",a.innerHTML="",detachNode(n),detachNode(r),detachNode(a),detachNode(o),detachNode(i),detachNode(I),detachNode(U),detachNode(z),detachNode(W)},d:function(){removeListener(h,"input",re),removeListener(w,"input",ae),removeListener(Y,"input",oe),removeListener(U,"click",ie),removeListener(W,"click",se)}}}function SignInForm(e){init(this,e),this._state=assign(data$18(),e.data),this._recompute({remoteEmailError:1,password:1,remotePasswordError:1,passwordError:1,password2:1},this._state);var t=this;e.root||(this._oncreate=[]),this._fragment=create_main_fragment$20(this,this._state),this.root._oncreate.push(function(){oncreate$9.call(t),t.fire("update",{changed:{remoteEmailError:1,password:1,remotePasswordError:1,passwordError:1,password2:1,loginForm:1,successMsg:1,errorMsg:1,emailError:1,email:1,resetPassword:1,keeplogin:1,alternativeSignIns:1,password2Error:1},current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),callAll(this._oncreate))}function create_main_fragment$21(e,t){var n;function r(e){return e.$user.mayPublish?create_if_block$14:e.$user.isLoggedIn?create_if_block_2$7:create_if_block_1$10}var a=r(t),o=a(e,t);return{c:function(){o.c(),n=createComment()},m:function(e,t){o.m(e,t),insertNode(n,e,t)},p:function(t,i){a!==(a=r(i))&&(o.u(),o.d(),(o=a(e,i)).c(),o.m(n.parentNode,n))},u:function(){o.u(),detachNode(n)},d:function(){o.d()}}}function create_if_block$14(e,t){var n=new Publish({root:e.root});return{c:function(){n._fragment.c()},m:function(e,t){n._mount(e,t)},u:function(){n._unmount()},d:function(){n.destroy(!1)}}}function create_if_block_1$10(e,t){var n,r,a=new SignInForm({root:e.root,data:{loginForm:1}});return{c:function(){(n=createElement("div")).textContent="To publish a chart, you need to be signed in to Datawrapper",r=createText("\n    "),a._fragment.c(),this.h()},h:function(){n.className="alert alert-info",setStyle(n,"margin-top","30px")},m:function(e,t){insertNode(n,e,t),insertNode(r,e,t),a._mount(e,t)},u:function(){detachNode(n),detachNode(r),a._unmount()},d:function(){a.destroy(!1)}}}function create_if_block_2$7(e,t){return{c:noop,m:noop,u:noop,d:noop}}function PublishLogic(e){init(this,e),this._state=assign(this.store._init(["user"]),e.data),this.store._add(this,["user"]),this._handlers.destroy=[removeFromStore],e.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=create_main_fragment$21(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),this._lock=!0,callAll(this._beforecreate),callAll(this._oncreate),callAll(this._aftercreate),this._lock=!1)}function data$19(){return{PublishLogic:PublishLogic}}function oncreate$10(){var e=this;this.store.observe("publishLogic",function(t){t?(loadStylesheet(t.css),loadScript(t.src,function(){require([t.mod],function(n){e.set({PublishLogic:n.App}),e.refs.publish.set(t.data)})})):e.set({PublishLogic:PublishLogic})})}function create_main_fragment$22(e,t){var n,r,a=t.PublishLogic;function o(t){return{root:e.root}}if(a)var i=new a(o());return{c:function(){n=createElement("div"),r=createElement("div"),i&&i._fragment.c(),this.h()},h:function(){r.className="publish-step is-published",n.className="dw-create-publish"},m:function(t,a){insertNode(n,t,a),appendNode(r,n),i&&(i._mount(r,null),e.refs.publish=i)},p:function(t,n){a!==(a=n.PublishLogic)&&(i&&i.destroy(),a?((i=new a(o()))._fragment.c(),i._mount(r,null),e.refs.publish=i):e.refs.publish===i&&(e.refs.publish=null))},u:function(){detachNode(n)},d:function(){i&&i.destroy(!1)}}}function PublishSidebar(e){init(this,e),this.refs={},this._state=assign(data$19(),e.data);var t=this;e.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=create_main_fragment$22(this,this._state),this.root._oncreate.push(function(){oncreate$10.call(t),t.fire("update",{changed:{PublishLogic:1},current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),this._lock=!0,callAll(this._beforecreate),callAll(this._oncreate),callAll(this._aftercreate),this._lock=!1)}function data$20(){return{datasets:[],steps:[{id:"upload",title:__("Upload Data")},{id:"describe",title:__("Check & Describe")},{id:"visualize",title:__("Visualize")},{id:"publish",title:__("Publish & Embed")}]}}function oncreate$11(){}function create_main_fragment$23(e,t){var n,r,a={},o={};"step"in t&&(o.active=t.step,a.active=!0),"maxStep"in t&&(o.maxStep=t.maxStep,a.maxStep=!0),"steps"in t&&(o.steps=t.steps,a.steps=!0);var i=new EditorNav({root:e.root,data:o,_bind:function(t,n){e.get();var r={};!a.active&&t.active&&(r.step=n.active),!a.maxStep&&t.maxStep&&(r.maxStep=n.maxStep),!a.steps&&t.steps&&(r.steps=n.steps),e._set(r),a={}}});function s(e){return"upload"==e.step?create_if_block$15:"describe"==e.step?create_if_block_1$11:"visualize"==e.step?create_if_block_2$8:"publish"==e.step?create_if_block_3$4:create_if_block_4$3}e.root._beforecreate.push(function(){i._bind({active:1,maxStep:1,steps:1},i.get())});var c=s(t),l=c(e,t);return{c:function(){i._fragment.c(),n=createText("\n\n"),r=createElement("div"),l.c()},m:function(e,t){i._mount(e,t),insertNode(n,e,t),insertNode(r,e,t),l.m(r,null)},p:function(t,n){var o={};!a.active&&t.step&&(o.active=n.step,a.active=!0),!a.maxStep&&t.maxStep&&(o.maxStep=n.maxStep,a.maxStep=!0),!a.steps&&t.steps&&(o.steps=n.steps,a.steps=!0),i._set(o),a={},c===(c=s(n))&&l?l.p(t,n):(l.u(),l.d(),(l=c(e,n)).c(),l.m(r,null))},u:function(){i._unmount(),detachNode(n),detachNode(r),l.u()},d:function(){i.destroy(!1),l.d()}}}function create_if_block$15(e,t){var n={},r={};"$dataReadonly"in t&&(r.readonly=t.$dataReadonly,n.readonly=!0),"datasets"in t&&(r.datasets=t.datasets,n.datasets=!0);var a=new UploadStep({root:e.root,data:r,_bind:function(t,r){e.get();var a={},o={};!n.readonly&&t.readonly&&(o.dataReadonly=r.readonly),!n.datasets&&t.datasets&&(a.datasets=r.datasets),e.store.set(o),e._set(a),n={}}});return e.root._beforecreate.push(function(){a._bind({readonly:1,datasets:1},a.get())}),{c:function(){a._fragment.c()},m:function(e,t){a._mount(e,t)},p:function(e,t){var r={};!n.readonly&&e.$dataReadonly&&(r.readonly=t.$dataReadonly,n.readonly=!0),!n.datasets&&e.datasets&&(r.datasets=t.datasets,n.datasets=!0),a._set(r),n={}},u:function(){a._unmount()},d:function(){a.destroy(!1)}}}function create_if_block_1$11(e,t){var n=new DescribeStep({root:e.root});return{c:function(){n._fragment.c()},m:function(e,t){n._mount(e,t)},p:noop,u:function(){n._unmount()},d:function(){n.destroy(!1)}}}function create_if_block_2$8(e,t){var n=new VisualizeStep({root:e.root});return{c:function(){n._fragment.c()},m:function(e,t){n._mount(e,t)},p:noop,u:function(){n._unmount()},d:function(){n.destroy(!1)}}}function create_if_block_3$4(e,t){var n=new PublishSidebar({root:e.root});return{c:function(){n._fragment.c()},m:function(e,t){n._mount(e,t)},p:noop,u:function(){n._unmount()},d:function(){n.destroy(!1)}}}function create_if_block_4$3(e,t){var n;return{c:function(){n=createText(":(")},m:function(e,t){insertNode(n,e,t)},p:noop,u:function(){detachNode(n)},d:noop}}function ChartEditor(e){init(this,e),this._state=assign(assign(this.store._init(["dataReadonly"]),data$20()),e.data),this.store._add(this,["dataReadonly"]),this._handlers.destroy=[removeFromStore];var t=this;e.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=create_main_fragment$23(this,this._state),this.root._oncreate.push(function(){oncreate$11.call(t),t.fire("update",{changed:{step:1,maxStep:1,steps:1,$dataReadonly:1,datasets:1},current:t._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),this._lock=!0,callAll(this._beforecreate),callAll(this._oncreate),callAll(this._aftercreate),this._lock=!1)}function Store(e,t){this._observers={pre:blankObject(),post:blankObject()},this._handlers={},this._dependents=[],this._computed=blankObject(),this._sortedComputedProperties=[],this._state=assign({},e),this._differs=t&&t.immutable?_differsImmutable:_differs}function _some(e,t,n){t=cb(t,n);for(var r=!isArrayLike(e)&&_keys(e),a=(r||e).length,o=0;o<a;o++){var i=r?r[o]:o;if(t(e[i],i,e))return!0}return!1}function json(e){return{dataset:function(){if(e.url)return fetch(e.url).then(function(e){return e.text()}).then(function(e){return JSON.parse(e)});if(e.csv)return new Promise(function(t){t(e.csv)}).then(function(e){return JSON.parse(e)});throw"you need to provide either an URL or CSV data."},parse:function(){return JSON.parse(e.csv)}}}function reorderColumns(e,t){var n=e.getMetadata("data.column-order",[]);return n.length&&n.length==t.numColumns()&&t.columnOrder(n),t}function applyChanges(e,t){var n=e.getMetadata("data.changes",[]),r=e.getMetadata("data.transpose",!1);return n.forEach(function(e){var n="row",a="column";r&&(n="column",a="row"),t.hasColumn(e[a])&&(0===e[n]?t.column(e[a]).title(e.value):t.column(e[a]).raw(e[n]-1,e.value))}),_each(e.getMetadata("data.column-format",{}),function(e,n){e.type&&t.hasColumn(n)&&"auto"!=e.type&&t.column(n).type(e.type),e["input-format"]&&t.hasColumn(n)&&t.column(n).type(!0).format(e["input-format"])}),t}function _isBoolean(e){return!0===e||!1===e||"[object Boolean]"===toString.call(e)}function addComputedColumns(chart,dataset){var v_columns=chart.getMetadata("describe.computed-columns",{}),data=dataset.list(),columnNameToVar={},col_aggregates={};return dataset.eachColumn(function(e){e.isComputed||(columnNameToVar[e.name()]=column_name_to_var(e.name()),"number"==e.type()&&(col_aggregates[e.name()]={min:d3_min(e.values()),max:d3_max(e.values()),sum:d3_sum(e.values()),mean:d3_mean(e.values()),median:d3_median(e.values())}))}),_each(v_columns,add_computed_column),dataset;function add_computed_column(formula,name){var datefmt=function(e){return e.getFullYear()+"-"+left_pad(1+e.getMonth(),2,0)+"-"+left_pad(1+e.getDate(),2,0)},values=data.map(function(row,row_i){var context=[];return context.push("var __row = "+row_i+";"),row.forEach(function(e,t){columnNameToVar[t]&&(context.push("var "+columnNameToVar[t]+" = "+JSON.stringify(e)+";"),"number"==dataset.column(t).type()&&(context.push("var "+columnNameToVar[t]+"__sum = "+col_aggregates[t].sum+";"),context.push("var "+columnNameToVar[t]+"__min = "+col_aggregates[t].min+";"),context.push("var "+columnNameToVar[t]+"__max = "+col_aggregates[t].max+";"),context.push("var "+columnNameToVar[t]+"__mean = "+col_aggregates[t].mean+";"),context.push("var "+columnNameToVar[t]+"__median = "+col_aggregates[t].median+";")))}),context.push("var max = Math.max, min = Math.min;"),function(){try{return eval(this.context.join("\n")+"\n"+formula)}catch(e){return console.warn(e),"n/a"}}.call({context:context})}).map(function(e){return _isBoolean(e)?e?"yes":"no":_isDate(e)?datefmt(e):_isNumber(e)?""+e:String(e)}),v_col=dw.column(name,values);v_col.isComputed=!0,dataset.add(v_col)}function column_name_to_var(e){return e.toString().toLowerCase().replace(/\s+/g,"_").replace(/[^\w\-]+/g,"").replace(/-/g,"_").replace(/\_\_+/g,"_").replace(/^_+/,"").replace(/_+$/,"").replace(/^(\d)/,"_$1").replace(/^(abstract|arguments|await|boolean|break|byte|case|catch|char|class|const|continue|debugger|default|delete|do|double|else|enum|eval|export|extends|false|final|finally|float|for|function|goto|if|implements|import|in|instanceof|int|interface|let|long|native|new|null|package|private|protected|public|return|short|static|super|switch|synchronized|this|throw|throws|transient|true|try|typeof|var|void|volatile|while|window|with|yield)$/,"$1_")}function d3_min(e){var t,n,r=-1,a=e.length;if(1===arguments.length){for(;++r<a;)if(null!=(n=e[r])&&n>=n){t=n;break}for(;++r<a;)null!=(n=e[r])&&t>n&&(t=n)}return t}function d3_max(e){var t,n,r=-1,a=e.length;if(1===arguments.length){for(;++r<a;)if(null!=(n=e[r])&&n>=n){t=n;break}for(;++r<a;)null!=(n=e[r])&&n>t&&(t=n)}return t}function d3_sum(e){var t,n=0,r=e.length,a=-1;if(1===arguments.length)for(;++a<r;)d3_numeric(t=+e[a])&&(n+=t);return n}function d3_mean(e){for(var t,n=0,r=e.length,a=-1,o=r;++a<r;)d3_numeric(t=d3_number(e[a]))?n+=t:--o;if(o)return n/o}function d3_median(e){var t,n=[],r=e.length,a=-1;if(1===arguments.length)for(;++a<r;)d3_numeric(t=d3_number(e[a]))&&n.push(t);if(n.length)return d3_quantile(n.sort(d3_ascending),.5)}function d3_quantile(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),a=+e[r-1],o=n-r;return o?a+o*(e[r]-a):a}function d3_number(e){return null===e?NaN:+e}function d3_numeric(e){return!isNaN(e)}function d3_ascending(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function left_pad(e,t,n){for(e=String(e);e.length<t;)e=String(n)+e;return e}}function loadGlobalizeLocale(e,t){window.Globalize.cultures.hasOwnProperty(e)?(window.Globalize.culture(e),"function"==typeof t&&t()):getScript("/static/vendor/globalize/cultures/globalize.culture."+e+".js",function(){window.Globalize.culture(e),"function"==typeof t&&t()})}function getScript(e,t){var n=document.createElement("script"),r=document.getElementsByTagName("script")[0];n.async=1,n.onload=n.onreadystatechange=function(e,r){(r||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n=void 0,r||t&&t())},n.src=URL,r.parentNode.insertBefore(n,r)}function getNestedValue(e,t){for(var n=0;n<t.length;n+=1){if(!e)return;e=e[t[n]]}return e}function observeDeep(e,t,n){var r=e.replace(/\[(\d+)\]/g,".$1").split("."),a=r[0],o=t.bind(this),i=getNestedValue(this.get(),r);return n&&!1===n.init||o(i),this.on(n&&n.defer?"update":"state",function(e){var t=e.changed,n=e.current;e.previous;if(t[a]){var s=getNestedValue(n,r);s===i&&"object"!=typeof s&&"function"!=typeof s||(o(s,i),i=s)}})}assign(SignInForm.prototype,proto),assign(SignInForm.prototype,methods$13),SignInForm.prototype._recompute=function(e,t){e.remoteEmailError&&this._differs(t.emailError,t.emailError=emailError(t))&&(e.emailError=!0),(e.password||e.remotePasswordError)&&this._differs(t.passwordError,t.passwordError=passwordError(t))&&(e.passwordError=!0),(e.passwordError||e.password||e.password2)&&this._differs(t.password2Error,t.password2Error=password2Error(t))&&(e.password2Error=!0)},assign(PublishLogic.prototype,proto),assign(PublishSidebar.prototype,proto),assign(ChartEditor.prototype,proto),assign(Store.prototype,{_add:function(e,t){this._dependents.push({component:e,props:t})},_init:function(e){for(var t={},n=0;n<e.length;n+=1){var r=e[n];t["$"+r]=this._state[r]}return t},_remove:function(e){for(var t=this._dependents.length;t--;)if(this._dependents[t].component===e)return void this._dependents.splice(t,1)},_sortComputedProperties:function(){var e,t=this._computed,n=this._sortedComputedProperties=[],r=blankObject();function a(o){if(e[o])throw new Error("Cyclical dependency detected");if(!r[o]){r[o]=!0;var i=t[o];i&&(e[o]=!0,i.deps.forEach(a),n.push(i))}}for(var o in this._computed)e=blankObject(),a(o)},compute:function(e,t,n){var r,a=this,o={deps:t,update:function(o,i,s){var c=t.map(function(e){return e in i&&(s=!0),o[e]});if(s){var l=n.apply(null,c);a._differs(l,r)&&(r=l,i[e]=!0,o[e]=r)}}};o.update(this._state,{},!0),this._computed[e]=o,this._sortComputedProperties()},fire:fire,get:get,observe:observe,on:on,onchange:function(e){return console.warn("store.onchange is deprecated in favour of store.on('state', event => {...})"),this.on("state",function(t){e(t.current,t.changed)})},set:function(e){var t=this._state,n=this._changed={},r=!1;for(var a in e){if(this._computed[a])throw new Error("'"+a+"' is a read-only property");this._differs(e[a],t[a])&&(n[a]=r=!0)}if(r){this._state=assign(assign({},t),e);for(var o=0;o<this._sortedComputedProperties.length;o+=1)this._sortedComputedProperties[o].update(this._state,n);this.fire("state",{changed:n,current:this._state,previous:t});var i=this._dependents.slice();for(o=0;o<i.length;o+=1){var s=i[o],c={};r=!1;for(var l=0;l<s.props.length;l+=1){var u=s.props[l];u in n&&(c["$"+u]=this._state[u],r=!0)}r&&s.component.set(c)}this.fire("update",{changed:n,current:this._state,previous:t})}}});var storeChanges=_debounce(function(e,t){var n=e.serialize();putJSON("/api/2/charts/"+n.id,JSON.stringify(n),function(){t&&t()})},1e3),storeData=_debounce(function(e,t){var n=e.getMetadata("data.json")?JSON.stringify(e.dataset()):e.rawData();putJSON("/api/2/charts/"+e.get("id")+"/data",n,function(){t&&t()})},1e3),Chart=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(e,t){var n=this,r={firstRowIsHeader:this.getMetadata("data.horizontal-header",!0),transpose:this.getMetadata("data.transpose",!1)};return e&&!t?r.csv=e:r.url=t||"data.csv",r.csv&&this.set({_rawData:r.csv}),(this.getMetadata("data.json",!1)?json(r):delimited(r)).dataset().then(function(e){return n.dataset(e),e}).catch(function(e){console.error("nope",e)})},t.prototype.dataset=function(e){if(arguments.length){!0!==e&&(this._dataset_cache=e);var t="function"!=typeof e.list;return this._dataset=t?e:reorderColumns(this,applyChanges(this,addComputedColumns(this,!0===e?this._dataset_cache:e))),t&&this.set({dataset:e}),this._dataset}return this._dataset},t.prototype.theme=function(e){return arguments.length?(this.set({theme:e}),this):this.get().theme},t.prototype.vis=function(e){return arguments.length?(this.set({vis:e}),this):this.get().vis},t.prototype.locale=function(e,t){return arguments.length&&(this._locale=e=e.replace("_","-"),window.Globalize&&loadGlobalizeLocale(e,t)),this._locale},t.prototype.getMetadata=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null);var n=this.get().metadata;if(!e)return n;var r=n;return _some(e.split("."),function(e){return!(!_isUndefined(r)&&!_isNull(r))||(r=r[e],!1)}),_isUndefined(r)||_isNull(r)?t:r},t.prototype.setMetadata=function(e,t){var n=e.split("."),r=n.pop(),a=this.get().metadata,o=a;return n.forEach(function(e){(_isUndefined(o[e])||_isNull(o[e]))&&(o[e]={}),o=o[e]}),is_equal(o[r],t)||(o[r]=t,this.set({metadata:a})),this},t.prototype.store=function(e){storeChanges(this,e)},t.prototype.storeData=function(e){storeData(this,e)},t.prototype.serialize=function(){var e=this.get(),t={};return["id","title","theme","createdAt","lastModifiedAt","type","metadata","authorId","showInGallery","language","guestSession","lastEditStep","publishedAt","publicUrl","publicVersion","organizationId","forkedFrom","externalData","forkable","isFork","inFolder","author"].forEach(function(n){t[n]=e[n]}),t},t.prototype.passiveMode=function(){var e=this;this.set({passiveMode:!0}),setTimeout(function(){return e.set({passiveMode:!1})},100)},t.prototype.isPassive=function(){return this.get().passiveMode},t.prototype.rawData=function(){return this.get()._rawData},t.prototype.dataCellChanged=function(e,t){var n=this.getMetadata("data.changes",[]),r=this.get("data.transpose",!1),a=!1;return n.forEach(function(n){var o="row",i="column";r&&(o="column",i="row"),e===n[i]&&n[o]===t&&(a=!0)}),a},t}(Store);function is_equal(e,t){return JSON.stringify(e)===JSON.stringify(t)}Chart.prototype.observeDeep=observeDeep;var data$21={},main={App:ChartEditor,Chart:Chart,data:data$21,utils:{getJSON:getJSON}};return main});
