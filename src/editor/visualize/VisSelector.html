<div class="vis-selector-unfolded">
    <div class="vis-thumbs">
        {#each activeChartTypes as vis}
        <a on:click="select(vis)" class="vis-thumb {active===vis.id?'active':''}">
            {@html vis.icon}
            <div class="title">{vis.title}</div>
        </a>
        {/each}
    </div>
    <div class="vis-archive-select">
        Archived chart types:
        <select bind:value="active">
            <option value="{undefined}"></option>
            {#each archivedChartTypes as vis}
            <option value="{vis.id}">{vis.title}</option>
            {/each}
        </select>
    </div>
</div>


<script>
    import {__} from '../../shared/l10n';

    export default {
        helpers: { __ },
        computed: {
            chartTypes({$visualizations}) {
                return $visualizations.filter(vis => vis.title &&
                    vis['svelte-workflow'] === 'chart' &&
                    vis.namespace !== 'map');
            },
            activeChartTypes({chartTypes}) {
                return chartTypes.filter(vis => !vis.archived);
            },
            archivedChartTypes({chartTypes}) {
                return chartTypes.filter(vis => vis.archived);
            }
        },
        methods: {
            select(vis) {
                this.set({active: vis.id});
            }
        },
        data() {
            return {
                active: 'd3-bars'
            };
        }
    }
</script>
